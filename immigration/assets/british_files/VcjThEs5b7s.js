/*!CK:3188133293!*//*1456742533,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["5SdS7"]); }

__d('EventsDashboardUtils',['fbt','ISO8601','DateStrings','Map'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l={_getSectionName:function(m,n,o){var p=new Date(),q=i.toDate(n.node.time_range.start.substring(0,10)),r=o?i.toDate(o.node.time_range.start.substring(0,10)):null;switch(m){case 'this_week':return h._("THIS WEEK");case 'next_week':return h._("NEXT WEEK");case 'first_month':if(p.getMonth()===q.getMonth()){return o?h._("LATER THIS MONTH"):h._("THIS MONTH");}else return r&&r.getMonth()===q.getMonth()?h._("LATER IN {month}",[h.param('month',j.getUppercaseMonthName(q.getMonth()+1))]):h._("NEXT MONTH");case 'second_month':var s=q.getMonth()-p.getMonth();return s===1||s===-11?h._("NEXT MONTH"):h._("{month}",[h.param('month',j.getUppercaseMonthName(q.getMonth()+1))]);case 'this_year':if(p.getFullYear()===q.getFullYear()){return o?h._("LATER THIS YEAR"):h._("THIS YEAR");}else return r&&r.getFullYear()===q.getFullYear()?h._("LATER IN {year}",[h.param('year',q.getFullYear())]):h._("{year}",[h.param('year',q.getFullYear())]);default:return h._("{year}",[h.param('year',q.getFullYear())]);}},breakUpcomingEventsIntoSections:function(m){var n=[];if(!m||m.length===0){n.push({events:m,key:'upcoming',isPast:false,title:h._("UPCOMING EVENTS")});return n;}var o=new Date(new Date().setHours(0,0,0,0)),p=new Date(o);p.setDate(o.getDate()+(8-o.getDay()));var q=new Date(p);q.setDate(p.getDate()+7);var r=new Date(q);r.setMonth(q.getMonth()+1);r.setDate(1);var s=new Date(r);s.setMonth(r.getMonth()+1);var t=new Date(s);t.setMonth(0);t.setFullYear(s.getFullYear()+1);var u=new k();for(var v=m,w=Array.isArray(v),x=0,v=w?v:v[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var y;if(w){if(x>=v.length)break;y=v[x++];}else{x=v.next();if(x.done)break;y=x.value;}var event=y,z=i.toDate(event.node.time_range.start.substring(0,10));if(z<p){if(!u.has('this_week'))u.set('this_week',[]);u.get('this_week').push(event);}else if(z<q){if(!u.has('next_week'))u.set('next_week',[]);u.get('next_week').push(event);}else if(z<r){if(!u.has('first_month'))u.set('first_month',[]);u.get('first_month').push(event);}else if(z<s){if(!u.has('second_month'))u.set('second_month',[]);u.get('second_month').push(event);}else if(z<t){if(!u.has('this_year'))u.set('this_year',[]);u.get('this_year').push(event);}else{var aa='year_'+z.getFullYear().toString();if(!u.has(aa))u.set(aa,[]);u.get(aa).push(event);}}var ba=null;u.forEach(function(ca,da){n.push({key:da,title:this._getSectionName(da,ca[0],ba),events:ca,isPast:false});ba=ca[ca.length-1];},this);return n;},breakPastEventsIntoSections:function(m){if(!m||m.length===0)return [];var n=[];n.push({events:m,key:'past',isPast:true,title:h._("PAST EVENTS")});return n;},getRecentlyAddedEventsSection:function(m){if(!m||m.length===0)return [];var n=[];n.push({events:m,key:'recently_added',isPast:false,title:h._("RECENTLY ADDED EVENTS")});return n;}};f.exports=l;},null);
__d('EventsWatchGating',['EventsWatchGatingData'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={shouldUseWatchUI:function(j){if(j.connection_style===null||j.connection_style!=='INTERESTED')return false;return h.watch_word!==null;}};f.exports=i;},null);
__d('EventsProfileLink.react',['React','Relay','BusinessURI.brands','Link.react','URI','ReactComponentWithPureRenderMixin'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n=h.PropTypes,o=h.createClass({displayName:'EventsProfileLink',mixins:[m],propTypes:{showhovercard:n.bool},getDefaultProps:function(){return {showhovercard:false};},render:function(){var p=null;if(this.props.showhovercard)p=new l('/ajax/hovercard/event.php').addQueryData('id',this.props.event.id).toString();return (h.createElement(k,{href:j(this.props.event.url),'data-hovercard':p},this.props.event.name));}});f.exports=i.createContainer(o,{fragments:{event:function(){return function(){return {children:[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{fieldName:'name',kind:'Field',metadata:{},type:'String'},{fieldName:'url',kind:'Field',metadata:{},type:'Url'}],id:'E4vseoTiPs4Z:0',kind:'Fragment',metadata:{},name:'EventsProfileLink_react_EventRelayQL',type:'Event'};}();}}});},null);
__d('PageEventsTabLink.react',['React','Relay','Link.react','URI','ReactComponentWithPureRenderMixin'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m=h.PropTypes,n=h.createClass({displayName:'PageEventsTabLink',mixins:[l],propTypes:{showhovercard:m.bool},getDefaultProps:function(){return {showhovercard:false};},render:function(){var o=null;if(this.props.showhovercard)o=new k('/ajax/hovercard/hovercard.php').addQueryData('id',this.props.page.id).toString();return (h.createElement(j,{href:this.props.page.url,'data-hovercard':o},this.props.page.name));}});f.exports=i.createContainer(n,{fragments:{page:function(){return function(){return {children:[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{fieldName:'name',kind:'Field',metadata:{},type:'String'},{fieldName:'url',kind:'Field',metadata:{},type:'Url'},{fieldName:'is_owned',kind:'Field',metadata:{},type:'Boolean'}],id:'e7K9Z05v/CRS:0',kind:'Fragment',metadata:{},name:'PageEventsTabLink_react_PageRelayQL',type:'Page'};}();}}});},null);
__d('ProfileAddOrRemoveEventMutation',['Relay'],function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();i=babelHelpers.inherits(k,h.Mutation);j=i&&i.prototype;k.prototype.getMutation=function(){return function(){return {calls:[{kind:'Call',metadata:{},name:'add_or_remove_event_from_profile',value:{kind:'CallVariable',callVariableName:'input'}}],children:[{fieldName:'client_mutation_id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],kind:'Mutation',metadata:{inputType:'AddOrRemoveEventFromProfileData!'},name:'ProfileAddOrRemoveEventMutation',responseType:'AddOrRemoveEventFromProfileResponsePayload'};}();};k.prototype.getVariables=function(){return {event_id:this.props.event_id,profile_id:this.props.profile_id,context:{event_action_history:this.props.event_action_history},actor_id:this.props.actor_id,action_type:this.props.action_type};};k.prototype.getFatQuery=function(){return function(){return {children:[{children:[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'}],fieldName:'event',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id'},type:'Event'}],id:'+1hJFmdkxOxh:0',kind:'Fragment',metadata:{pattern:true},name:'ProfileAddOrRemoveEventMutationRelayQL',type:'AddOrRemoveEventFromProfileResponsePayload'};}();};k.prototype.getConfigs=function(){return [];};function k(){i.apply(this,arguments);}f.exports=k;},null);
__d('ProfileHideOwnedEventMutation',['Relay'],function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();i=babelHelpers.inherits(k,h.Mutation);j=i&&i.prototype;k.prototype.getMutation=function(){return function(){return {calls:[{kind:'Call',metadata:{},name:'hide_owned_event_from_profile',value:{kind:'CallVariable',callVariableName:'input'}}],children:[{fieldName:'client_mutation_id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],kind:'Mutation',metadata:{inputType:'HideOwnedEventFromProfileData!'},name:'ProfileHideOwnedEventMutation',responseType:'HideOwnedEventFromProfileResponsePayload'};}();};k.prototype.getVariables=function(){return {event_id:this.props.event_id,profile_id:this.props.profile_id,context:{event_action_history:this.props.event_action_history},actor_id:this.props.actor_id,action_type:this.props.action_type};};k.prototype.getFatQuery=function(){return function(){return {children:[{children:[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'}],fieldName:'event',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id'},type:'Event'}],id:'NIsMkwiruZxT:3',kind:'Fragment',metadata:{pattern:true},name:'ProfileHideOwnedEventMutationRelayQL',type:'HideOwnedEventFromProfileResponsePayload'};}();};k.prototype.getConfigs=function(){return [];};function k(){i.apply(this,arguments);}f.exports=k;},null);
__d('EventInfoRow.react',['ActionList.react','Arbiter','DateStrings','EventsProfileLink.react','FBOverlayBase.react','FBOverlayContainer.react','FBOverlayElement.react','Grid.react','ISO8601','Link.react','PageEventsTabLink.react','ProfileAddOrRemoveEventMutation','ProfileHideOwnedEventMutation','React','Relay','RelayAPIConfig','XUICloseButton.react','XUIText.react','cx','fbt','formatDate','ReactComponentWithPureRenderMixin','PublicEventButtonBarIfLoggedIn'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca){'use strict';if(c.__markCompiled)c.__markCompiled();var da=c('PublicEventButtonBarIfLoggedIn').ButtonBar,ea=u.PropTypes,fa=o.GridItem,ga=u.createClass({displayName:'EventInfoRow',mixins:[ca],propTypes:{appID:ea.string.isRequired,connectingWord:ea.string.isRequired,actionHistory:ea.string.isRequired,isPastEvent:ea.bool,isHiddenEvent:ea.bool,isAddedToCalendar:ea.bool},componentDidMount:function(){i.subscribe('event_updated',function(ha,ia){if(ia.id.toString()===this.props.event.id)this.props.relay.forceFetch();}.bind(this));},getInitialState:function(){return {hasAdminHiddenEventRow:this.props.isHiddenEvent,hasAdminRemovedEventRow:false};},_onHideButtonClick:function(){this.setState({hasAdminHiddenEventRow:true});v.Store.commitUpdate(new t({event_id:this.props.event.id,profile_id:this.props.page.id,event_action_history:this.props.actionHistory,actor_id:w.actorID,action_type:'hide'}));},_onUnhideButtonClick:function(){this.setState({hasAdminHiddenEventRow:false});v.Store.commitUpdate(new t({event_id:this.props.event.id,profile_id:this.props.page.id,event_action_history:this.props.actionHistory,actor_id:w.actorID,action_type:'add'}));},_onRemoveAddedEventButtonClick:function(){this.setState({hasAdminRemovedEventRow:true});v.Store.commitUpdate(new s({event_id:this.props.event.id,profile_id:this.props.page.id,event_action_history:this.props.actionHistory,actor_id:w.actorID,action_type:'remove'}));},_onUndoRemovedEventButtonClick:function(){this.setState({hasAdminRemovedEventRow:false});v.Store.commitUpdate(new s({event_id:this.props.event.id,profile_id:this.props.page.id,event_action_history:this.props.actionHistory,actor_id:w.actorID,action_type:'add'}));},_getIsViewerPageAdmin:function(){var ha=this.props.page.viewer_profile_permissions;return ha.indexOf('CREATE_CONTENT')>-1;},_getIsViewerEventAdmin:function(){return this.props.event.event_viewer_capability.is_viewer_admin;},_renderHiddenEvent:function(){return (u.createElement(o,{cols:3,className:"_4dmd _4eok"},u.createElement(fa,{className:"_4dme"}),u.createElement(fa,{className:"_4dmt"},u.createElement('div',{className:"_4dmu"}))));},render:function(){var event=this.props.event,ha=p.toDate(event.time_range.start.substring(0,10)),ia=j.getUppercaseMonthNameShort(ha.getMonth()+1),ja=ba(ha,'d'),ka=new Date(new Date().setHours(0,0,0,0)),la=ka.setDate(ka.getDate()+2),ma=ha>=ka&&ha<la||event.is_event_draft,na=((event.event_place||{}).city||{}).contextual_name,oa=null;if(na&&event.event_place.contextual_name!==na){oa=u.createElement(r,{page:event.event_place,showhovercard:true});}else{na=null;oa=u.createElement('span',null,(event.event_place||{}).contextual_name);}var pa=event.start_time_sentence,qa=event.suggested_event_context_sentence&&event.suggested_event_context_sentence.text;if(event.is_event_draft){pa=aa._("Draft");qa=null;if(event.scheduled_publish_timestamp){var ra=new Date().getFullYear()===new Date(event.scheduled_publish_timestamp*1000).getFullYear()?ba(event.scheduled_publish_timestamp,'F j'):ba(event.scheduled_publish_timestamp,'F j, Y');pa=aa._("Scheduled for {event_scheduled_date e.g. February 4} at {event_scheduled_time e.g. 11:03 pm}",[aa.param('event_scheduled_date e.g. February 4',ra),aa.param('event_scheduled_time e.g. 11:03 pm',ba(event.scheduled_publish_timestamp,'g:i A'))]);}}else if(event.is_canceled){pa=aa._("This event was canceled.");qa=null;na=null;oa=null;}var sa=[];if(this.state.hasAdminHiddenEventRow){sa.push(u.createElement(fa,{key:'date',className:"_4dme"}));sa.push(u.createElement(fa,{key:'center',className:"_4eor"},u.createElement('div',{className:"_4eos"},u.createElement('div',{className:"_4dmk _5v9z"},aa._("You have hidden {event} from your page.",[aa.param('event',u.createElement(k,{event:this.props.event,showhovercard:true}))])))));sa.push(u.createElement(fa,{key:'cta',className:"_4dmt"},u.createElement('div',{className:"_4dmu"},u.createElement(q,{onClick:this._onUnhideButtonClick},aa._("Unhide")))));}else if(this.state.hasAdminRemovedEventRow){sa.push(u.createElement(fa,{key:'date',className:"_4dme"}));sa.push(u.createElement(fa,{key:'center',className:"_4eor"},u.createElement('div',{className:"_4eos"},u.createElement('div',{className:"_4dmk _5v9-"},aa._("You have removed {event} from your page.",[aa.param('event',u.createElement(k,{event:this.props.event,showhovercard:true}))])))));sa.push(u.createElement(fa,{key:'cta',className:"_4dmt"},u.createElement('div',{className:"_4dmu"},u.createElement(q,{onClick:this._onUndoRemovedEventButtonClick},aa._("Undo")))));}else{sa.push(u.createElement(fa,{key:'date',className:"_4dme"},u.createElement('div',{className:"_5x8v _5a5j _5a5h"},u.createElement('span',{className:"_5a4z"},ja),u.createElement('span',{className:"_5a4-"},ia))));sa.push(u.createElement(fa,{key:'title',className:"_4dmi"},u.createElement('div',{className:"_4dmj"},u.createElement('div',{className:"_4dmk"},u.createElement(k,{event:event,showhovercard:true})),u.createElement('div',{className:"_4dml"},u.createElement(h,null,u.createElement(y,{className:ma?"_2-xx":''},pa),qa)))));sa.push(u.createElement(fa,{key:'location',className:"_4dmm"},u.createElement('div',{className:"_4dmn"},u.createElement('div',{className:"_30n-"},oa),u.createElement('div',{className:"_30n_"},na))));var ta=null;if(da)ta=u.createElement(da,babelHelpers['extends']({event:event,pageID:this.props.page.id},this.props));sa.push(u.createElement(fa,{key:'cta',className:"_4dmt"},u.createElement('div',{className:"_4dmu"},ta)));}var ua=u.createElement(o,{cols:sa.length,className:(!this._getIsViewerPageAdmin()?"_4dmd":'')+(' '+"_4eok")+(this.props.isPastEvent?' '+"_10c5":'')+(event.is_canceled?' '+"_5va2":'')},sa);if(!this._getIsViewerPageAdmin()||this.state.hasAdminHiddenEventRow||this.state.hasAdminRemovedEventRow)return ua;var va=!this.props.isAddedToCalendar?aa._("Hide event"):aa._("Remove event"),wa=!this.props.isAddedToCalendar?this._onHideButtonClick:this._onRemoveAddedEventButtonClick;return (u.createElement(m,{className:"_4dmd"},u.createElement(l,null,ua),u.createElement(n,{horizontal:'right',vertical:'top'},u.createElement('div',{className:"_4eot"},u.createElement(x,{onClick:wa,size:'small',tooltip:va})))));}});f.exports=v.createContainer(ga,{fragments:{page:function(){return function(){return {children:[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{fieldName:'viewer_profile_permissions',kind:'Field',metadata:{isPlural:true},type:'String'}],id:'UZbuWFDxIKas:0',kind:'Fragment',metadata:{},name:'EventInfoRow_react_PageRelayQL',type:'Page'};}();},event:function(){return function(ha,ia,ja){return {children:[].concat.apply([],[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{children:[{fieldName:'start',kind:'Field',metadata:{},type:'String'}],directives:[{kind:'Directive',name:'fixme_fat_interface',args:[]}],fieldName:'time_range',kind:'Field',metadata:{canHaveSubselections:true},type:'EventTimeRange'},{fieldName:'is_event_draft',kind:'Field',metadata:{},type:'Boolean'},{fieldName:'scheduled_publish_timestamp',kind:'Field',metadata:{},type:'Time'},{calls:[{kind:'Call',metadata:{type:'EventStartTimeSentenceFormat'},name:'format',value:{kind:'CallValue',callValue:'SHORT_TIME_LABEL'}}],fieldName:'start_time_sentence',kind:'Field',metadata:{},type:'String'},{calls:[{kind:'Call',metadata:{},name:'show_category',value:{kind:'CallValue',callValue:false}}],children:[{fieldName:'text',kind:'Field',metadata:{},type:'String'}],fieldName:'suggested_event_context_sentence',kind:'Field',metadata:{canHaveSubselections:true},type:'TextWithEntities'},{children:[].concat.apply([],[{fieldName:'contextual_name',kind:'Field',metadata:{},type:'String'},{children:[{fieldName:'contextual_name',kind:'Field',metadata:{},type:'String'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],directives:[{kind:'Directive',name:'fixme_fat_interface',args:[]}],fieldName:'city',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id'},type:'Page'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'},v.QL.__frag(ha),{children:[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'}],id:'zl9Czin6wxbN:1',kind:'Fragment',metadata:{isAbstract:true},name:'IdFragment',type:'Node'}]),fieldName:'event_place',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isAbstract:true},type:'Place'},{children:[{fieldName:'is_viewer_admin',kind:'Field',metadata:{},type:'Boolean'}],fieldName:'event_viewer_capability',kind:'Field',metadata:{canHaveSubselections:true},type:'EventViewerCapability'},{fieldName:'is_canceled',kind:'Field',metadata:{},type:'Boolean'},v.QL.__frag(ia),v.QL.__frag(ja)]),id:'zl9Czin6wxbN:2',kind:'Fragment',metadata:{},name:'EventInfoRow_react_EventRelayQL',type:'Event'};}(r.getFragment('page'),k.getFragment('event'),da&&da.getFragment('event'));}}});},null);
__d('EventRSVPActionStrings',['fbt'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={getInterestedActionText:function(){return h._("Interested");},getInterestedDecidedText:function(){return h._("Interested");},getInterestedNegateText:function(){return h._("Not interested");},getGoingActionText:function(){return h._("Going");},getGoingDecidedText:function(){return h._("Going");},getGoingNegateText:function(){return h._("Not Going");}};f.exports=i;},null);
__d('PublicEventWatchStatusSelector.react',['React','Relay','EventRSVPActions','EventRSVPActionStrings','EventWatchStatus','Image.react','MenuSeparator.react','PopoverMenu.react','ReactComponentWithPureRenderMixin','ReactXUIMenu','XUIButton.react','XUIPopoverButton.react','cx','ix','invariant','xuiglyph'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){'use strict';if(c.__markCompiled)c.__markCompiled();var x=q.SelectableMenu,y=q.Item,z=q.SelectableItem,aa=h.createClass({displayName:'PublicEventWatchStatusSelector',mixins:[p],_getFirstActionButton:function(){var ba=k.getInterestedActionText(),ca=h.createElement(m,{src:this._getWatchActionGlyph()});return (h.createElement(r,{label:ba,image:ca,onClick:this._onPrimaryWatch}));},_onPrimaryWatch:function(){j.handleWatchAction(this.props.event,this.props.actionHistory);},_getWatchActionGlyph:function(){var ba=this.props.event.viewer_watch_status===l.WATCHED;return ba?w({name:'checkmark',shade:'dark',size:'small'}):u('/images/events/interested-button.png');},_getWatchedMenu:function(){var ba=h.createElement(x,{onItemClick:this._onItemClick},h.createElement(y,{value:l.GOING},k.getGoingActionText()),h.createElement(z,{selected:true},k.getInterestedActionText()),h.createElement(n,null),h.createElement(y,{value:l.UNWATCHED},k.getInterestedNegateText())),ca=h.createElement(m,{src:this._getWatchActionGlyph()});return (h.createElement(o,{menu:ba},h.createElement(s,{label:k.getInterestedDecidedText(),image:ca})));},_onItemClick:function(ba,ca){var da=ca.item.getValue();if(da===l.UNWATCHED){j.handleUnwatchAction(this.props.event,this.props.actionHistory);return;}else if(da===l.GOING){j.handleWatchGoingAction(this.props.event,this.props.actionHistory);return;}else if(da===l.WATCHED){j.handleWatchAction(this.props.event,this.props.actionHistory);return;}},_getGoingMenu:function(){var ba=h.createElement(x,{onItemClick:this._onItemClick},h.createElement(z,{selected:true},k.getGoingDecidedText()),h.createElement(y,{value:l.WATCHED},k.getInterestedActionText()),h.createElement(n,null),h.createElement(y,{value:l.UNWATCHED},k.getGoingNegateText())),ca=h.createElement(m,{src:w({name:'checkmark',shade:'dark',size:'small'})});return (h.createElement(o,{menu:ba},h.createElement(s,{label:k.getGoingDecidedText(),image:ca})));},render:function(){var ba=this.props.event.viewer_watch_status,ca=null;if(ba===l.UNWATCHED||ba===l.DECLINED){ca=this._getFirstActionButton();}else if(ba===l.WATCHED){ca=this._getWatchedMenu();}else if(ba===l.GOING)ca=this._getGoingMenu();return (h.createElement('div',{key:'watchui',className:"_2ib4"},ca));}});f.exports=i.createContainer(aa,{fragments:{event:function(){return function(){return {children:[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{fieldName:'viewer_watch_status',kind:'Field',metadata:{},type:'EventWatchStatus'},{fieldName:'connection_style',kind:'Field',metadata:{},type:'ConnectionStyle'},{children:[{fieldName:'is_viewer_admin',kind:'Field',metadata:{},type:'Boolean'},{fieldName:'can_viewer_edit',kind:'Field',metadata:{},type:'Boolean'},{fieldName:'can_viewer_join',kind:'Field',metadata:{},type:'Boolean'},{fieldName:'can_viewer_promote',kind:'Field',metadata:{},type:'Boolean'}],fieldName:'event_viewer_capability',kind:'Field',metadata:{canHaveSubselections:true},type:'EventViewerCapability'}],id:'/jNNp4sT/3Du:g',kind:'Fragment',metadata:{},name:'PublicEventWatchStatusSelector_react_EventRelayQL',type:'Event'};}();}}});},null);
__d("XEventEditDialogController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ajax\/events\/edit\/page\/",{event_id:{type:"Int",required:true},acontext:{type:"String",required:true},focus_field:{type:"Enum",enumType:1},extra_data:{type:"String"},__asyncDialog:{type:"Int"}});},null);
__d('PublicEventButtonBar.react',['React','ReactDOM','Relay','FBJSON','cx','fbt','Image.react','xuiglyph','XUIButton.react','URI','EventGuestStatus','EventRSVPActions','ReactComponentWithPureRenderMixin','EventsWatchGating','PublicEventWatchStatusSelector.react','EventPromoteActions.react','XEventEditDialogController'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){'use strict';if(c.__markCompiled)c.__markCompiled();var y=h.PropTypes,z=h.createClass({displayName:'PublicEventButtonBar',mixins:[t],propTypes:{pageID:y.string.isRequired,appID:y.string.isRequired,actionHistory:y.string.isRequired,connectingWord:y.string.isRequired,isPastEvent:y.bool.isRequired},getInitialState:function(){var event=this.props.event,aa=event.viewer_guest_status===r.GOING,ba=aa||event.event_viewer_capability.can_viewer_join&&!event.event_viewer_capability.is_viewer_admin,ca=!event.event_viewer_capability.is_viewer_admin&&u.shouldUseWatchUI(event);return {hasViewerJoined:aa,showRSVPButton:ba,showWatchUI:ca};},_handleRSVPChange:function(){var event=this.props.event,aa=this.state.hasViewerJoined?r.NOT_GOING:r.GOING;this.setState({hasViewerJoined:aa===r.GOING});s.handleRSVPChange(event,aa,this.props.actionHistory);},_getRSVPLabel:function(){if(this.props.connectingWord==='interested'){return this.state.hasViewerJoined?m._("Interested"):m._("Interested");}else if(this.props.connectingWord==='add')return this.state.hasViewerJoined?m._("Added"):m._("Add Event");return this.state.hasViewerJoined?m._("Joined"):m._("Join");},_canShowPromoteActions:function(){var aa=this.props.event.event_viewer_capability;return !this.props.isPastEvent&&aa.is_viewer_admin&&(aa.can_viewer_promote||aa.can_viewer_see_boost_result);},render:function(){var event=this.props.event;if(this.props.isPastEvent||this.props.event.is_canceled)return h.createElement('div',null);var aa=[];if(event.event_buy_ticket_url&&!event.event_viewer_capability.is_viewer_admin){var ba=m._("Get Tickets");aa.push(h.createElement('div',{key:'ticket',className:"_2ib4"},h.createElement(p,{href:event.event_buy_ticket_url,target:'_blank',label:ba})));}if(this.state.showWatchUI){aa.push(h.createElement('div',{key:'watchui',className:"_2ib4"},h.createElement(v,{event:event,actionHistory:this.props.actionHistory})));}else if(this.state.showRSVPButton){var ca=this.state.hasViewerJoined?o({name:'checkmark',shade:'accent',size:'small'}):o({name:'plus',shade:'dark',size:'small'}),da=h.createElement(n,{src:ca});aa.push(h.createElement('div',{key:'rsvp',className:"_2ib4"},h.createElement(p,{label:this._getRSVPLabel(),image:da,onClick:this._handleRSVPChange})));}if(this._canShowPromoteActions()){var ea=event.event_viewer_capability;aa.push(h.createElement('div',{key:'promote',className:"_2ib4"},h.createElement(w,{eventID:event.id,pageID:this.props.pageID,appID:this.props.appID,actionHistory:this.props.actionHistory,isViewerAdmin:ea.is_viewer_admin,canViewerPromote:ea.can_viewer_promote,canViewerSeeBoostResult:ea.can_viewer_see_boost_result,canViewerPromoteAsParent:ea.can_viewer_promote_as_parent,canViewerPromoteTicket:ea.can_viewer_promote_ticket})));}if(event.event_viewer_capability.can_viewer_edit){var fa={action_history:this.props.actionHistory},ga=x.getURIBuilder().setInt('event_id',event.id).setString('acontext',k.stringify(fa)).getURI();aa.push(h.createElement('div',{key:'edit',className:"_2ib4"},h.createElement(p,{href:'#',ajaxify:ga,rel:'dialog',label:m._("Edit")})));}if(!aa)return h.createElement('div',null);aa=aa.slice(aa.length-2,aa.length);return (h.createElement('div',{className:"_2ib5"},aa));}});f.exports=j.createContainer(z,{fragments:{event:function(){return function(aa){return {children:[].concat.apply([],[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{fieldName:'viewer_guest_status',kind:'Field',metadata:{},type:'EventGuestStatus'},{fieldName:'event_buy_ticket_url',kind:'Field',metadata:{},type:'Url'},{fieldName:'connection_style',kind:'Field',metadata:{},type:'ConnectionStyle'},{children:[{fieldName:'is_viewer_admin',kind:'Field',metadata:{},type:'Boolean'},{fieldName:'can_viewer_edit',kind:'Field',metadata:{},type:'Boolean'},{fieldName:'can_viewer_join',kind:'Field',metadata:{},type:'Boolean'},{fieldName:'can_viewer_promote',kind:'Field',metadata:{},type:'Boolean'},{fieldName:'can_viewer_see_boost_result',kind:'Field',metadata:{},type:'Boolean'},{fieldName:'can_viewer_promote_as_parent',kind:'Field',metadata:{},type:'Boolean'},{fieldName:'can_viewer_promote_ticket',kind:'Field',metadata:{},type:'Boolean'}],fieldName:'event_viewer_capability',kind:'Field',metadata:{canHaveSubselections:true},type:'EventViewerCapability'},{fieldName:'is_canceled',kind:'Field',metadata:{},type:'Boolean'},j.QL.__frag(aa)]),id:'+VPwCqJ6tMYd:g',kind:'Fragment',metadata:{},name:'PublicEventButtonBar_react_EventRelayQL',type:'Event'};}(v.getFragment('event'));}}});},null);
__d("XEventPageCreateDialogController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ajax\/events\/create\/page\/",{page_id:{type:"Int",required:true},acontext:{type:"String",required:true},__asyncDialog:{type:"Int"}});},null);
__d('TimelineEventsCalendarApp.react',['React','Relay','cx','fbt','xuiglyph','FBJSON','ISO8601','EventsActionsLogger','EventsDashboardUtils','EventInfoRow.react','Image.react','OnVisible.react','XEventPageCreateDialogController','XUIButton.react','XUICard.react','XUICardSection.react','XUISpinner.react'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){'use strict';if(c.__markCompiled)c.__markCompiled();var y=10,z=h.createClass({displayName:'TimelineEventsCalendarApp',componentDidMount:function(){o.log(null,{type:o.Type.COMPONENT_DID_MOUNT,target:o.Target.RESULT_LIST,acontext:{action_history:this.props.actionHistory},extraData:{}},{});},_getIsViewerPageAdmin:function(){var ba=this.props.page.viewer_profile_permissions;return ba.indexOf("CREATE_CONTENT")>-1;},_getNoEventsComingUpSection:function(){if(this._getIsViewerPageAdmin()){var ba=t.getURIBuilder().setInt('page_id',this.props.page.id).setString('acontext',m.stringify({action_history:this.props.actionHistory})).getURI();return (h.createElement('span',null,h.createElement('div',null,k._("You don't have any upcoming events")),h.createElement(u,{className:"_3-8w",href:'#',ajaxify:ba,rel:'dialog',use:'confirm',image:h.createElement(r,{src:l({name:'plus',shade:'white'})}),label:k._("Create Event")})));}return k._("{page_name} does not have any upcoming events.",[k.param('page_name',this.props.page.name)]);},_loadMore:function(ba){if(ba){this.props.relay.setVariables({upcoming_count:this.props.relay.variables.upcoming_count+y});}else this.props.relay.setVariables({past_count:this.props.relay.variables.past_count+y});},_renderSection:function(ba){var ca=null,da=ba.isPast;if(ba.events.length===0){ca=h.createElement('div',{className:"_2pi1 _52jv"},this._getNoEventsComingUpSection());}else ca=ba.events.map(function(ea){return (h.createElement(q,{key:ea.node.id,page:this.props.page,appID:this.props.appID,event:ea.node,connectingWord:this.props.connectingWord,actionHistory:this.props.actionHistory,isPastEvent:da,isHiddenEvent:ea.is_hidden_on_profile_calendar,isAddedToCalendar:ea.is_added_to_profile_calendar}));}.bind(this));return (h.createElement(w,{key:ba.key},h.createElement('div',{className:"_27nv"},ba.title),ca));},render:function(){var ba=this.props.page.upcoming_events.edges,ca=this.props.page.past_events.edges,da=[];if(this.props.recently_added_events){this.props.recently_added_events.sort(function(ja,ka){return (n.toDate(ka.time_range.start.substring(0,10))<n.toDate(ja.time_range.start.substring(0,10)));});this.props.recently_added_events.forEach(function(ja){var ka={};ka.node=ja;da.push(ka);});}var ea=p.getRecentlyAddedEventsSection(da);ea=ea.concat(p.breakUpcomingEventsIntoSections(ba));var fa=ba.length>=this.props.relay.variables.upcoming_count;if(!fa&&ca.length>0)ea=ea.concat(p.breakPastEventsIntoSections(ca));var ga=ea.map(function(ja){return this._renderSection(ja);}.bind(this)),ha=fa||ca.length>=this.props.relay.variables.past_count,ia=null;if(ha)ia=h.createElement(w,null,h.createElement('div',null,h.createElement(s,{buffer:100,ref:'onVisible',onVisible:this._loadMore.bind(this,fa)},h.createElement('div',{className:"_2pi1"+(' '+"_52jv")},h.createElement(x,{background:'light',size:'large'})))));return (h.createElement(v,null,ga,ia));}}),aa=i.createContainer(z,{initialVariables:{upcoming_count:y,past_count:y},fragments:{page:function(){return function(ba,ca,da){return {children:[].concat.apply([],[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{fieldName:'name',kind:'Field',metadata:{},type:'String'},{fieldName:'viewer_profile_permissions',kind:'Field',metadata:{isPlural:true},type:'String'},{alias:'upcoming_events',calls:[{kind:'Call',metadata:{},name:'upcoming',value:{kind:'CallValue',callValue:true}},{kind:'Call',metadata:{type:'[EventStateEnum]'},name:'allowed_states',value:[{kind:'CallValue',callValue:'CANCELED'},{kind:'CallValue',callValue:'DRAFT'},{kind:'CallValue',callValue:'SCHEDULED_DRAFT_FOR_PUBLICATION'},{kind:'CallValue',callValue:'PUBLISHED'}]},{kind:'Call',metadata:{},name:'filter_out_canceled_events_if_not_connected',value:{kind:'CallValue',callValue:true}},{kind:'Call',metadata:{},name:'first',value:{kind:'CallVariable',callVariableName:'upcoming_count'}}],children:[{children:[{fieldName:'is_hidden_on_profile_calendar',kind:'Field',metadata:{},type:'Boolean'},{fieldName:'is_added_to_profile_calendar',kind:'Field',metadata:{},type:'Boolean'},{children:[].concat.apply([],[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{children:[{fieldName:'start',kind:'Field',metadata:{},type:'String'}],directives:[{kind:'Directive',name:'fixme_fat_interface',args:[]}],fieldName:'time_range',kind:'Field',metadata:{canHaveSubselections:true},type:'EventTimeRange'},i.QL.__frag(ba)]),fieldName:'node',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isRequisite:true},type:'Event'},{fieldName:'cursor',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'edges',kind:'Field',metadata:{canHaveSubselections:true,isPlural:true},type:'AllOwnedEventsEdge'},{children:[{fieldName:'has_next_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'},{fieldName:'has_previous_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'}],fieldName:'page_info',kind:'Field',metadata:{canHaveSubselections:true,isGenerated:true,isRequisite:true},type:'PageInfo'}],fieldName:'all_owned_events',kind:'Field',metadata:{canHaveSubselections:true,isConnection:true,isFindable:true},type:'AllOwnedEventsConnection'},{alias:'past_events',calls:[{kind:'Call',metadata:{},name:'past',value:{kind:'CallValue',callValue:true}},{kind:'Call',metadata:{type:'[EventStateEnum]'},name:'allowed_states',value:[{kind:'CallValue',callValue:'CANCELED'},{kind:'CallValue',callValue:'DRAFT'},{kind:'CallValue',callValue:'SCHEDULED_DRAFT_FOR_PUBLICATION'},{kind:'CallValue',callValue:'PUBLISHED'}]},{kind:'Call',metadata:{},name:'filter_out_canceled_events_if_not_connected',value:{kind:'CallValue',callValue:true}},{kind:'Call',metadata:{},name:'first',value:{kind:'CallVariable',callVariableName:'past_count'}}],children:[{children:[{fieldName:'is_hidden_on_profile_calendar',kind:'Field',metadata:{},type:'Boolean'},{fieldName:'is_added_to_profile_calendar',kind:'Field',metadata:{},type:'Boolean'},{children:[].concat.apply([],[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{children:[{fieldName:'start',kind:'Field',metadata:{},type:'String'}],directives:[{kind:'Directive',name:'fixme_fat_interface',args:[]}],fieldName:'time_range',kind:'Field',metadata:{canHaveSubselections:true},type:'EventTimeRange'},i.QL.__frag(ca)]),fieldName:'node',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isRequisite:true},type:'Event'},{fieldName:'cursor',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'edges',kind:'Field',metadata:{canHaveSubselections:true,isPlural:true},type:'AllOwnedEventsEdge'},{children:[{fieldName:'has_next_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'},{fieldName:'has_previous_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'}],fieldName:'page_info',kind:'Field',metadata:{canHaveSubselections:true,isGenerated:true,isRequisite:true},type:'PageInfo'}],fieldName:'all_owned_events',kind:'Field',metadata:{canHaveSubselections:true,isConnection:true,isFindable:true},type:'AllOwnedEventsConnection'},i.QL.__frag(da)]),id:'ouMUDc1l4VW5:0',kind:'Fragment',metadata:{},name:'TimelineEventsCalendarApp_react_PageRelayQL',type:'Page'};}(q.getFragment('event'),q.getFragment('event'),q.getFragment('page'));},recently_added_events:function(){return function(ba){return {children:[].concat.apply([],[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{children:[{fieldName:'start',kind:'Field',metadata:{},type:'String'}],directives:[{kind:'Directive',name:'fixme_fat_interface',args:[]}],fieldName:'time_range',kind:'Field',metadata:{canHaveSubselections:true},type:'EventTimeRange'},i.QL.__frag(ba)]),id:'i/9j0l0PTHiD:1',kind:'Fragment',metadata:{plural:true},name:'TimelineEventsCalendarApp_react_Recently_added_eventsRelayQL',type:'Event'};}(q.getFragment('event'));}}});aa.moduleName='TimelineEventsCalendarApp.react';f.exports=aa;},null);
__d('TimelineEventsCalendarRoute',['Relay'],function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();i=babelHelpers.inherits(k,h.Route);j=i&&i.prototype;function k(){i.apply(this,arguments);}k.routeName='TimelineEventsCalendarRoute';k.path='/timeline/events/react';k.paramDefinitions={profileid:{type:'String',required:true},appID:{type:'String',required:true},connectingWord:{type:'String',required:true},actionHistory:{type:'String',required:true},recentEventIDs:{type:'IntVector',required:false}};k.queries={page:function(l){return function(m){return {calls:[{kind:'Call',metadata:{},name:'id',value:{kind:'CallVariable',callVariableName:'profileid'}}],children:[].concat.apply([],[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'},h.QL.__frag(m)]),fieldName:'node',kind:'Query',metadata:{isAbstract:true,identifyingArgName:'id'},name:'TimelineEventsCalendarRoute',type:'Node'};}(l.getFragment('page'));},recently_added_events:function(l){return function(m){return {calls:[{kind:'Call',metadata:{},name:'ids',value:{kind:'CallVariable',callVariableName:'recentEventIDs'}}],children:[].concat.apply([],[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'},h.QL.__frag(m)]),fieldName:'nodes',kind:'Query',metadata:{isAbstract:true,identifyingArgName:'ids'},name:'TimelineEventsCalendarRoute',type:'Node'};}(l.getFragment('recently_added_events'));},viewer:function(l){return function(m){return {children:[].concat.apply([],[h.QL.__frag(m)]),fieldName:'viewer',kind:'Query',metadata:{},name:'TimelineEventsCalendarRoute',type:'Viewer'};}(l.getFragment('viewer'));}};f.exports=k;},null);
__d('TimelineEventsCalendar',['DliteWeb','RelayRouter','getURIBuilder','TimelineEventsCalendarRoute','TimelineEventsCalendarApp.react'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m={mount:function(n,o,p,q,r,s){var t=j(k).setString('profileid',o).setString('appID',p).setString('connectingWord',r).setString('actionHistory',q).setIntVector('recentEventIDs',s).getURI();h.bootstrap(l,n,i.createRouteFromURI(k,t));}};f.exports=m;},null);