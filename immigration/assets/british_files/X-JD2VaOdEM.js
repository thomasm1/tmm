/*!CK:2978670404!*//*1456274913,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["p26U6"]); }

__d("Shaka",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();var h={};(function(i){var j,k=this;function l(ek,fk){var gk=ek.split("."),hk=k;gk[0] in hk||!hk.execScript||hk.execScript("var "+gk[0]);for(var ik;gk.length&&(ik=gk.shift());)gk.length||void 0===fk?hk[ik]?hk=hk[ik]:hk=hk[ik]={}:hk[ik]=fk;}function m(ek,fk){function gk(){}gk.prototype=fk.prototype;ek.mb=fk.prototype;ek.prototype=new gk();ek.prototype.constructor=ek;ek.ib=function(hk,ik,jk){return fk.prototype[ik].apply(hk,Array.prototype.slice.call(arguments,2));};}function n(ek){var fk=console[ek];fk?fk.bind||(console[ek]=function(){fk.apply(console,arguments);}):console[ek]=function(){};}n("error");n("warn");n("info");n("log");n("debug");function o(ek){s[ek]={V:r(),end:NaN};}function p(ek){if(ek=s[ek])ek.end=r();}function q(ek){return (ek=s[ek])&&ek.end?ek.end-ek.V:NaN;}var r=i.performance&&i.performance.now?i.performance.now.bind(i.performance):Date.now,s={};function t(){}function u(){var ek=HTMLVideoElement.prototype;!ek.getVideoPlaybackQuality&&"webkitDroppedFrameCount" in ek&&(ek.getVideoPlaybackQuality=v);}l("shaka.polyfill.VideoPlaybackQuality.install",u);function v(){return {droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0};}function w(){return Promise.reject(Error("The key system specified is not supported."));}function x(ek){return null==ek?Promise.resolve():Promise.reject(Error("MediaKeys not supported."));}function y(){throw new TypeError("Illegal constructor.");}y.prototype.createSession=function(){};y.prototype.setServerCertificate=function(){};function z(){throw new TypeError("Illegal constructor.");}z.prototype.getConfiguration=function(){};z.prototype.createMediaKeys=function(){};function aa(){var ek=Element.prototype;ek.requestFullscreen=ek.requestFullscreen||ek.mozRequestFullScreen||ek.msRequestFullscreen||ek.webkitRequestFullscreen;ek=Document.prototype;ek.exitFullscreen=ek.exitFullscreen||ek.mozCancelFullScreen||ek.msExitFullscreen||ek.webkitExitFullscreen;"fullscreenElement" in document||Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement;}});document.addEventListener("webkitfullscreenchange",ba);document.addEventListener("webkitfullscreenerror",ba);document.addEventListener("mozfullscreenchange",ba);document.addEventListener("mozfullscreenerror",ba);document.addEventListener("MSFullscreenChange",ba);document.addEventListener("MSFullscreenError",ba);}l("shaka.polyfill.Fullscreen.install",aa);function ba(ek){var fk=ek.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),fk=new Event(fk,ek);ek.target.dispatchEvent(fk);}function ca(){var ek="CustomEvent" in i;if(ek)try{new CustomEvent("");}catch(fk){ek=false;}ek||(i.CustomEvent=da);}l("shaka.polyfill.CustomEvent.install",ca);function da(ek,fk){var gk=document.createEvent("CustomEvent"),hk=fk||{bubbles:false,cancelable:false,detail:null};gk.initCustomEvent(ek,!!hk.bubbles,!!hk.cancelable,hk.detail);return gk;}function ea(ek){var fk=new CustomEvent(ek.type,{detail:ek.detail,bubbles:!!ek.bubbles}),gk;for(gk in ek)gk in fk||(fk[gk]=ek[gk]);return fk;}function fa(ek){return new CustomEvent("error",{detail:ek,bubbles:true});}function ga(){var ek,fk,gk=new Promise(function(hk,ik){ek=hk;fk=ik;});gk.resolve=ek;gk.reject=fk;gk.destroy=ga.prototype.destroy;return gk;}ga.prototype.destroy=function(){this.catch(function(){});var ek=Error("Destroyed!");ek.type="destroy";this.reject(ek);};function ha(ek){this.b=ek;this.c=0==ia;this.a=0;}var ia=1;function ja(ek){return ek.a<ek.b.byteLength;}function ka(ek){var fk=ek.b.getUint8(ek.a);ek.a+=1;return fk;}function la(ek){var fk=ek.b.getUint32(ek.a,ek.c);ek.a+=4;return fk;}function ma(ek){var fk,gk;ek.c?(fk=ek.b.getUint32(ek.a,true),gk=ek.b.getUint32(ek.a+4,true)):(gk=ek.b.getUint32(ek.a,false),fk=ek.b.getUint32(ek.a+4,false));if(2097151<gk)throw new RangeError("DataViewReader: Overflow reading 64-bit value.");ek.a+=8;return gk*Math.pow(2,32)+fk;}function na(ek){if(ek.a+16>ek.b.byteLength)throw new RangeError("DataViewReader: Read past end of DataView.");var fk=new Uint8Array(ek.b.buffer,ek.a,16);ek.a+=16;return fk;}function oa(ek,fk){if(ek.a+fk>ek.b.byteLength)throw new RangeError("DataViewReader: Skip past end of DataView.");ek.a+=fk;}var pa={"output-restricted":"The required output protection is not available.","output-not-allowed":"The required output protection is not available.",expired:"The decryption key has expired.","internal-error":"The key system has encountered an unspecified error."},qa=0;function ra(ek){return Object.keys(ek).map(function(fk){return ek[fk];});}function sa(ek,fk){var gk=ua(ek,fk,"number");if(null==gk)return null;if(isNaN(gk)||gk==Number.NEGATIVE_INFINITY||gk==Number.POSITIVE_INFINITY)throw new RangeError("'"+fk+"' must be finite.");if(0>gk)throw new RangeError("'"+fk+"' must be >= 0");return gk;}function ta(ek,fk){return ua(ek,fk,"string");}function ua(ek,fk,gk){ek=ek[fk];if(null==ek)return null;if(typeof ek!=gk)throw new TypeError("'"+fk+"' must be a "+gk+".");return ek;}function va(ek,fk,gk){ek=ek[fk];if(null==ek)return null;if(!(ek instanceof gk))throw new TypeError("'"+fk+"' must be an instance of "+gk.name+".");return ek;}function wa(ek,fk){return fk.bind(ek);}function xa(ek,fk){for(var gk={},hk=0;hk<ek.length;++hk){var ik=fk?fk(ek[hk]):ek[hk].toString();gk[ik]=ek[hk];}var hk=[],jk;for(jk in gk)hk.push(gk[jk]);return hk;}function ya(ek){ek.split("").reduce(function(fk,gk,hk){return fk+(hk&&0==hk%4?" "+gk:gk);});}function za(ek){return String.fromCharCode.apply(null,ek);}l("shaka.util.Uint8ArrayUtils.toString",za);function ab(ek){for(var fk=new Uint8Array(ek.length),gk=0;gk<ek.length;++gk)fk[gk]=ek.charCodeAt(gk);return fk;}l("shaka.util.Uint8ArrayUtils.fromString",ab);l("shaka.util.Uint8ArrayUtils.toBase64",function(ek,fk){var gk=void 0==fk?true:fk,hk=i.btoa(za(ek)).replace(/\+/g,"-").replace(/\//g,"_");return gk?hk:hk.replace(/=*$/,"");});function bb(ek){return ab(i.atob(ek.replace(/-/g,"+").replace(/_/g,"/")));}l("shaka.util.Uint8ArrayUtils.fromBase64",bb);l("shaka.util.Uint8ArrayUtils.fromHex",function(ek){for(var fk=new Uint8Array(ek.length/2),gk=0;gk<ek.length;gk+=2)fk[gk/2]=i.parseInt(ek.substr(gk,2),16);return fk;});function cb(ek){for(var fk="",gk=0;gk<ek.length;++gk){var hk=ek[gk].toString(16);1==hk.length&&(hk="0"+hk);fk+=hk;}return fk;}l("shaka.util.Uint8ArrayUtils.toHex",cb);function db(ek,fk){if(!ek&&!fk)return true;if(!ek||!fk||ek.length!=fk.length)return false;for(var gk=0;gk<ek.length;++gk)if(ek[gk]!=fk[gk])return false;return true;}function eb(ek){this.systemIds=[];this.cencKeyIds=[];ek=new ha(new DataView(ek.buffer));try{for(;ja(ek);){var gk=ek.a,hk=la(ek),ik=la(ek);1==hk?hk=ma(ek):0==hk&&(hk=ek.b.byteLength-gk);if(1886614376!=ik){oa(ek,hk-(ek.a-gk));}else{var jk=ka(ek);if(1<jk){oa(ek,hk-(ek.a-gk));}else{oa(ek,3);var kk=cb(na(ek)),lk=[];if(0<jk)for(var mk=la(ek),nk=0;nk<mk;++nk){var ok=cb(na(ek));lk.push(ok);}var pk=la(ek);oa(ek,pk);this.cencKeyIds.push.apply(this.cencKeyIds,lk);this.systemIds.push(kk);ek.a!=gk+hk&&oa(ek,hk-(ek.a-gk));}}}}catch(fk){}}function fb(ek){this.c=Math.exp(Math.log(.5)/ek);this.a=this.b=0;}fb.prototype.sample=function(ek,fk){var gk=Math.pow(this.c,ek);this.b=fk*(1-gk)+gk*this.b;this.a+=ek;};function gb(ek){return ek.b/(1-Math.pow(ek.c,ek.a));}function hb(ek,fk,gk){kb(fk);kb(gk);return gk==fk||ek>=ib&&gk==fk.split("-")[0]||ek>=jb&&gk.split("-")[0]==fk.split("-")[0]?true:false;}var ib=1,jb=2;function kb(ek){ek=ek.toLowerCase().split("-");var fk=lb[ek[0]];fk&&(ek[0]=fk);return ek.join("-");}var lb={aar:"aa",abk:"ab",afr:"af",aka:"ak",alb:"sq",amh:"am",ara:"ar",arg:"an",arm:"hy",asm:"as",ava:"av",ave:"ae",aym:"ay",aze:"az",bak:"ba",bam:"bm",baq:"eu",bel:"be",ben:"bn",bih:"bh",bis:"bi",bod:"bo",bos:"bs",bre:"br",bul:"bg",bur:"my",cat:"ca",ces:"cs",cha:"ch",che:"ce",chi:"zh",chu:"cu",chv:"cv",cor:"kw",cos:"co",cre:"cr",cym:"cy",cze:"cs",dan:"da",deu:"de",div:"dv",dut:"nl",dzo:"dz",ell:"el",eng:"en",epo:"eo",est:"et",eus:"eu",ewe:"ee",fao:"fo",fas:"fa",fij:"fj",fin:"fi",fra:"fr",fre:"fr",fry:"fy",ful:"ff",geo:"ka",ger:"de",gla:"gd",gle:"ga",glg:"gl",glv:"gv",gre:"el",grn:"gn",guj:"gu",hat:"ht",hau:"ha",heb:"he",her:"hz",hin:"hi",hmo:"ho",hrv:"hr",hun:"hu",hye:"hy",ibo:"ig",ice:"is",ido:"io",iii:"ii",iku:"iu",ile:"ie",ina:"ia",ind:"id",ipk:"ik",isl:"is",ita:"it",jav:"jv",jpn:"ja",kal:"kl",kan:"kn",kas:"ks",kat:"ka",kau:"kr",kaz:"kk",khm:"km",kik:"ki",kin:"rw",kir:"ky",kom:"kv",kon:"kg",kor:"ko",kua:"kj",kur:"ku",lao:"lo",lat:"la",lav:"lv",lim:"li",lin:"ln",lit:"lt",ltz:"lb",lub:"lu",lug:"lg",mac:"mk",mah:"mh",mal:"ml",mao:"mi",mar:"mr",may:"ms",mkd:"mk",mlg:"mg",mlt:"mt",mon:"mn",mri:"mi",msa:"ms",mya:"my",nau:"na",nav:"nv",nbl:"nr",nde:"nd",ndo:"ng",nep:"ne",nld:"nl",nno:"nn",nob:"nb",nor:"no",nya:"ny",oci:"oc",oji:"oj",ori:"or",orm:"om",oss:"os",pan:"pa",per:"fa",pli:"pi",pol:"pl",por:"pt",pus:"ps",que:"qu",roh:"rm",ron:"ro",rum:"ro",run:"rn",rus:"ru",sag:"sg",san:"sa",sin:"si",slk:"sk",slo:"sk",slv:"sl",sme:"se",smo:"sm",sna:"sn",snd:"sd",som:"so",sot:"st",spa:"es",sqi:"sq",srd:"sc",srp:"sr",ssw:"ss",sun:"su",swa:"sw",swe:"sv",tah:"ty",tam:"ta",tat:"tt",tel:"te",tgk:"tg",tgl:"tl",tha:"th",tib:"bo",tir:"ti",ton:"to",tsn:"tn",tso:"ts",tuk:"tk",tur:"tr",twi:"tw",uig:"ug",ukr:"uk",urd:"ur",uzb:"uz",ven:"ve",vie:"vi",vol:"vo",wel:"cy",wln:"wa",wol:"wo",xho:"xh",yid:"yi",yor:"yo",zha:"za",zho:"zh",zul:"zu"};function mb(){this.g=new ga();this.f=false;this.a=null;this.b=[];this.c=null;}function nb(ek,fk){if(ek.f)throw Error("Cannot append to a running task!");ek.b.push(fk);}mb.prototype.start=function(){if(this.f)throw Error("Task already started!");this.f=true;this.b.unshift(function(){});ob(this,void 0);};mb.prototype.end=function(){this.b.splice(1);};function ob(ek,fk){var gk=ek.b[0](fk),hk;gk?(hk=gk[0],ek.c=gk[1]):(hk=Promise.resolve(),ek.c=null);hk.then(wa(ek,function(ik){this.a?(this.b=[],this.c=null,pb(this)):(this.b.shift(),this.b.length?ob(this,ik):(this.g.resolve(ik),this.c=null));})).catch(wa(ek,function(ik){this.b=[];this.c=null;this.a?pb(this):this.g.reject(ik);}));}function pb(ek){var fk=Error("Task aborted.");fk.type="aborted";ek.g.reject(fk);i.setTimeout(function(){this.a.resolve();this.a=null;}.bind(ek),5);}function qb(){this.a={};}qb.prototype.push=function(ek,fk){this.a.hasOwnProperty(ek)?this.a[ek].push(fk):this.a[ek]=[fk];};qb.prototype.get=function(ek){return (ek=this.a[ek])?ek.slice():null;};function rb(ek){var fk=[],gk;for(gk in ek.a)fk.push.apply(fk,ek.a[gk]);return fk;}function sb(ek,fk,gk){if(ek=ek.a[fk])for(fk=0;fk<ek.length;++fk)ek[fk]==gk&&(ek.splice(fk,1),--fk);}function tb(ek){var fk=[],gk;for(gk in ek.a)fk.push(gk);return fk;}function ub(ek){this.qa=new qb();this.s=ek;}l("shaka.util.FakeEventTarget",ub);ub.prototype.addEventListener=function(ek,fk,gk){gk||this.qa.push(ek,fk);};ub.prototype.removeEventListener=function(ek,fk,gk){gk||sb(this.qa,ek,fk);};ub.prototype.dispatchEvent=function(ek){delete ek.srcElement;delete ek.target;delete ek.currentTarget;Object.defineProperties(ek,{srcElement:{value:null,writable:true},target:{value:this,writable:true},currentTarget:{value:null,writable:true}});return vb(this,ek);};function vb(ek,fk){fk.currentTarget=ek;for(var gk=ek.qa.get(fk.type)||[],hk=0;hk<gk.length;++hk){var ik=gk[hk];try{ik.handleEvent?ik.handleEvent(fk):ik.call(ek,fk);}catch(jk){}}ek.s&&fk.bubbles&&vb(ek.s,fk);return fk.defaultPrevented;}function wb(ek){ub.call(this,null);this.a=new fb(3);this.g=new fb(10);this.h=ek||500000;this.f=0;}m(wb,ub);l("shaka.util.EWMABandwidthEstimator",wb);wb.prototype.sample=function(ek,fk){if(!(65536>fk)){ek=Math.max(ek,50);var gk=8000*fk/ek,hk=ek/1000;this.a.sample(hk,gk);this.g.sample(hk,gk);this.dispatchEvent(ea({type:"bandwidth"}));this.f=Date.now();}};wb.prototype.getBandwidth=function(){return .5>this.a.a?this.h:Math.min(gb(this.a),gb(this.g));};wb.prototype.getDataAge=function(){return (Date.now()-this.f)/1000;};wb.prototype.supportsCaching=function(){return false;};function xb(){wb.call(this);}m(xb,wb);l("shaka.util.EWMASignedURLBandwidthEstimator",xb);xb.prototype.supportsCaching=function(){return true;};function yb(ek,fk,gk){wb.call(this,gk);this.c=ek||0;this.b=void 0===fk?Infinity:fk;}m(yb,wb);l("shaka.util.EWMACacheBandwidthEstimator",yb);yb.prototype.sample=function(ek,fk){ek<=this.c&&8000*fk/ek>this.b||wb.prototype.sample.call(this,ek,fk);};yb.prototype.supportsCaching=function(){return Infinity!==this.b&&!!this.c;};function zb(ek){this.b=ek;this.a=new ha(ek);ac||(ac=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])]);}var ac;function bc(ek){var fk;fk=cc(ek);if(7<fk.length)throw new RangeError("EbmlParser: EBML ID must be at most 7 bytes.");for(var gk=0,hk=0;hk<fk.length;hk++)gk=256*gk+fk[hk];fk=gk;gk=cc(ek);ek:{for(hk=0;hk<ac.length;hk++)if(db(gk,ac[hk])){hk=true;break ek;}hk=false;};if(hk)throw new RangeError("EbmlParser: Element cannot contain dynamically sized data.");if(8==gk.length&&gk[1]&224)throw new RangeError("EbmlParser: Variable sized integer value must be at most 53 bits.");for(var hk=gk[0]&(1<<8-gk.length)-1,ik=1;ik<gk.length;ik++)hk=256*hk+gk[ik];gk=hk;gk=ek.a.a+gk<=ek.b.byteLength?gk:ek.b.byteLength-ek.a.a;hk=new DataView(ek.b.buffer,ek.b.byteOffset+ek.a.a,gk);oa(ek.a,gk);return new dc(fk,hk);}function cc(ek){var fk=ka(ek.a),gk;for(gk=1;8>=gk&&!(fk&1<<8-gk);gk++);if(8<gk)throw new RangeError("EbmlParser: Variable sized integer must fit within 8 bytes.");var hk=new Uint8Array(gk);hk[0]=fk;for(fk=1;fk<gk;fk++)hk[fk]=ka(ek.a);return hk;}function dc(ek,fk){this.id=ek;this.a=fk;}function ec(ek){if(8<ek.a.byteLength)throw new RangeError("EbmlElement: Unsigned integer has too many bytes.");if(8==ek.a.byteLength&&ek.a.getUint8(0)&224)throw new RangeError("EbmlParser: Unsigned integer must be at most 53 bits.");for(var fk=0,gk=0;gk<ek.a.byteLength;gk++)var hk=ek.a.getUint8(gk),fk=256*fk+hk;return fk;}function fc(){this.a=new qb();}fc.prototype.destroy=function(){hc(this);this.a=null;};function gc(ek,fk,gk,hk){fk=new ic(fk,gk,hk);ek.a.push(gk,fk);}fc.prototype.ba=function(ek,fk){for(var gk=this.a.get(fk)||[],hk=0;hk<gk.length;++hk){var ik=gk[hk];ik.target==ek&&(ik.ba(),sb(this.a,fk,ik));}};function hc(ek){for(var fk=rb(ek.a),gk=0;gk<fk.length;++gk)fk[gk].ba();ek.a.a={};}function ic(ek,fk,gk){this.target=ek;this.type=fk;this.a=gk;this.target.addEventListener(fk,gk,false);}ic.prototype.ba=function(){this.target&&(this.target.removeEventListener(this.type,this.a,false),this.a=this.target=null);};function jc(ek,fk){try{var hk=new lc(ek,fk);return Promise.resolve(hk);}catch(gk){return Promise.reject(gk);}}function kc(ek){var fk=this.mediaKeys;fk&&fk!=ek&&nc(fk,null);delete this.mediaKeys;(this.mediaKeys=ek)&&nc(ek,this);return Promise.resolve();}function lc(ek,fk){this.a=this.keySystem=ek;var gk=true;"org.w3.clearkey"==ek&&(this.a="webkit-org.w3.clearkey",gk=false);var hk=false,ik;ik=document.getElementsByTagName("video");ik=ik.length?ik[0]:document.createElement("video");for(var jk=0;jk<fk.length;++jk){var kk=fk[jk],lk={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:kk.initDataTypes,sessionTypes:["temporary"]},mk=false;if(kk.audioCapabilities)for(var nk=0;nk<kk.audioCapabilities.length;++nk){var ok=kk.audioCapabilities[nk];ok.contentType&&(mk=true,ik.canPlayType(ok.contentType.split(";")[0],this.a)&&(lk.audioCapabilities.push(ok),hk=true));}if(kk.videoCapabilities)for(nk=0;nk<kk.videoCapabilities.length;++nk)ok=kk.videoCapabilities[nk],ok.contentType&&(mk=true,ik.canPlayType(ok.contentType,this.a)&&(lk.videoCapabilities.push(ok),hk=true));mk||(hk=ik.canPlayType("video/mp4",this.a)||ik.canPlayType("video/webm",this.a));"required"==kk.persistentState&&(gk?(lk.persistentState="required",lk.sessionTypes=["persistent-license"]):hk=false);if(hk){this.b=lk;return;}}throw Error("None of the requested configurations were supported.");}lc.prototype.createMediaKeys=function(){var ek=new mc(this.a);return Promise.resolve(ek);};lc.prototype.getConfiguration=function(){return this.b;};function mc(ek){this.g=ek;this.b=null;this.a=new fc();this.c=[];this.f={};}function nc(ek,fk){ek.b=fk;hc(ek.a);fk&&(gc(ek.a,fk,"webkitneedkey",ek.Za.bind(ek)),gc(ek.a,fk,"webkitkeymessage",ek.Ya.bind(ek)),gc(ek.a,fk,"webkitkeyadded",ek.Wa.bind(ek)),gc(ek.a,fk,"webkitkeyerror",ek.Xa.bind(ek)));}j=mc.prototype;j.createSession=function(ek){var fk=ek||"temporary";if("temporary"!=fk&&"persistent-license"!=fk)throw new TypeError("Session type "+ek+" is unsupported on this platform.");ek=this.b||document.createElement("video");ek.src||(ek.src="about:blank");fk=new pc(ek,this.g,fk);this.c.push(fk);return fk;};j.setServerCertificate=function(){return Promise.reject(Error("setServerCertificate not supported on this platform."));};j.Za=function(ek){ek=ea({type:"encrypted",initDataType:"webm",initData:ek.initData});this.b.dispatchEvent(ek);};j.Ya=function(ek){var fk=oc(this,ek.sessionId);fk&&(ek=ea({type:"message",messageType:void 0==fk.keyStatuses.a?"licenserequest":"licenserenewal",message:ek.message}),fk.b&&(fk.b.resolve(),fk.b=null),fk.dispatchEvent(ek));};j.Wa=function(ek){if(ek=oc(this,ek.sessionId))rc(ek,"usable"),ek.a&&ek.a.resolve(),ek.a=null;};j.Xa=function(ek){var fk=oc(this,ek.sessionId);if(fk){var gk=Error("EME v0.1b key error");gk.errorCode=ek.errorCode;gk.errorCode.systemCode=ek.systemCode;!ek.sessionId&&fk.b?(gk.method="generateRequest",45==ek.systemCode&&(gk.message="Unsupported session type."),fk.b.reject(gk),fk.b=null):ek.sessionId&&fk.a?(gk.method="update",fk.a.reject(gk),fk.a=null):(gk=ek.systemCode,ek.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?rc(fk,"output-restricted"):1==gk?rc(fk,"expired"):rc(fk,"internal-error"));}};function oc(ek,fk){var gk=ek.f[fk];return gk?gk:(gk=ek.c.shift())?(gk.sessionId=fk,ek.f[fk]=gk):null;}function pc(ek,fk,gk){ub.call(this,null);this.f=ek;this.h=false;this.a=this.b=null;this.c=fk;this.g=gk;this.sessionId="";this.expiration=NaN;this.closed=new ga();this.keyStatuses=new tc();}m(pc,ub);function qc(ek,fk,gk){if(ek.h)return Promise.reject(Error("The session is already initialized."));ek.h=true;var hk;try{if("persistent-license"==ek.g){if(gk){hk=ab("LOAD_SESSION|"+gk);}else{var jk=new Uint8Array(fk);hk=ab("PERSISTENT|"+za(jk));}}else hk=new Uint8Array(fk);}catch(ik){return Promise.reject(ik);}ek.b=new ga();try{ek.f.webkitGenerateKeyRequest(ek.c,hk);}catch(kk){if("InvalidStateError"!=kk.name)return ek.b=null,Promise.reject(kk);setTimeout(function(){try{this.f.webkitGenerateKeyRequest(this.c,hk);}catch(lk){this.b.reject(lk),this.b=null;}}.bind(ek),10);}return ek.b;}j=pc.prototype;j.wa=function(ek,fk){if(this.a){this.a.then(this.wa.bind(this,ek,fk)).catch(this.wa.bind(this,ek,fk));}else{this.a=ek;var gk,hk;"webkit-org.w3.clearkey"==this.c?(gk=za(new Uint8Array(fk)),hk=JSON.parse(gk),"oct"!=hk.keys[0].kty&&(this.a.reject(Error("Response is not a valid JSON Web Key Set.")),this.a=null),gk=bb(hk.keys[0].k),hk=bb(hk.keys[0].kid)):(gk=new Uint8Array(fk),hk=null);try{this.f.webkitAddKey(this.c,gk,hk,this.sessionId);}catch(ik){this.a.reject(ik),this.a=null;}}};function rc(ek,fk){var gk=ek.keyStatuses;gk.size=void 0==fk?0:1;gk.a=fk;gk=ea({type:"keystatuseschange"});ek.dispatchEvent(gk);}j.generateRequest=function(ek,fk){return qc(this,fk,null);};j.load=function(ek){return "persistent-license"==this.g?qc(this,null,ek):Promise.reject(Error("Not a persistent session."));};j.update=function(ek){var fk=new ga();this.wa(fk,ek);return fk;};j.close=function(){if("persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;this.f.webkitCancelKeyRequest(this.c,this.sessionId);}this.closed.resolve();return this.closed;};j.remove=function(){return "persistent-license"!=this.g?Promise.reject(Error("Not a persistent session.")):this.close();};function sc(ek){this.b=ek;this.a=0;}sc.prototype.next=function(){return this.a>=this.b.length?{value:void 0,done:true}:{value:this.b[this.a++],done:false};};function tc(){this.size=0;this.a=void 0;}var uc;j=tc.prototype;j.entries=function(){var ek=uc,fk=[];this.a&&fk.push([ek,this.a]);return new sc(fk);};j.forEach=function(ek){this.a&&ek(this.a);};j.get=function(ek){if(this.has(ek))return this.a;};j.has=function(ek){var fk=uc;return this.a&&db(new Uint8Array(ek),fk)?true:false;};j.keys=function(){var ek=uc,fk=[];this.a&&fk.push(ek);return new sc(fk);};j.values=function(){var ek=[];this.a&&ek.push(this.a);return new sc(ek);};function vc(){Navigator.prototype.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(HTMLMediaElement.prototype.webkitGenerateKeyRequest?(uc=new Uint8Array([0]),Navigator.prototype.requestMediaKeySystemAccess=jc,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=kc,i.MediaKeys=mc,i.MediaKeySystemAccess=lc):(Navigator.prototype.requestMediaKeySystemAccess=w,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=x,i.MediaKeys=y,i.MediaKeySystemAccess=z));}l("shaka.polyfill.MediaKeys.install",vc);l("shaka.polyfill.installAll",function(){ca();aa();vc();u();});function wc(ek,fk){this.id=ek;this.lang=fk||"unknown";this.enabled=this.active=false;}l("shaka.player.TextTrack.compare",function(ek,fk){return ek.lang<fk.lang?-1:ek.lang>fk.lang?1:0;});function xc(ek,fk,gk){MediaSource.isTypeSupported(fk);fk=ek.addSourceBuffer(fk);this.j=ek;this.c=fk;this.l=gk;this.h=new fc();this.b=[];this.s=0;this.f=this.a=null;this.o=0;gc(this.h,this.c,"updateend",this.u.bind(this));}var yc=1/60;xc.prototype.destroy=function(){ed(this).catch(function(){});this.f&&this.f.destroy();this.b=this.a=this.f=null;this.h.destroy();this.j=this.c=this.h=null;};function zc(ek,fk){for(var gk=ek.c.buffered,hk=0;hk<gk.length;++hk){var ik=gk.start(hk)-yc,jk=gk.end(hk)+yc;if(fk>=ik&&fk<=jk)return gk.end(hk)-fk;}return 0;}function ad(ek,fk){var gk=fk.a?fk.a-fk.b:1,hk=new bg();hk.a=3;hk.g=1000*gk;hk.c=1000*ek.o;return hk;}function bd(ek,fk,gk,hk){if(ek.a)return ek=Error("Cannot fetch ("+ek.i+"): previous operation not complete."),ek.type="stream",Promise.reject(ek);ek.a=new mb();gk!=ek.c.timestampOffset&&(ek.c.timestampOffset=gk);gk=ad(ek,fk);var ik=jg(fk.url,gk,ek.l),jk=gg.prototype.f.bind(fk.url),kk=0;hk&&nb(ek.a,function(){return [hk.then(function(nk){nk.X>kk&&(kk=nk.X);return gd(this,nk);}.bind(this)),this.g.bind(this)];}.bind(ek));nb(ek.a,wa(ek,function(){return [ik.then(function(nk){nk.X>kk&&(kk=nk.X);this.l.getBandwidth();return gd(this,nk);}.bind(this)),function(){jk();this.g();}.bind(this)];}));var lk=0==ek.c.buffered.length&&0==ek.b.length,mk=null;nb(ek.a,function(){if(0==this.c.buffered.length){var nk=Error("Failed to buffer segment ("+this.i+").");nk.type="stream";return [Promise.reject(nk)];}lk&&(nk=fk.b,mk=this.c.buffered.start(0)-nk);nk=tg(this.b,fk.b);0<=nk?this.b.splice(nk+1,0,fk):this.b.push(fk);}.bind(ek));return fd(ek).then(function(){return Promise.resolve({pa:mk,Ja:kk});}.bind(ek));}function cd(ek){if(ek.a)return ek=Error("Cannot clear ("+ek.i+"): previous operation not complete."),ek.type="stream",Promise.reject(ek);ek.a=new mb();nb(ek.a,function(){var fk;fk:if(0==this.c.buffered.length){fk=Promise.resolve();}else{try{this.c.remove(0,Number.POSITIVE_INFINITY);}catch(gk){fk=Promise.reject(gk);break fk;}this.b=[];fk=this.f=new ga();};return [fk,this.g.bind(this)];}.bind(ek));return fd(ek);}function dd(ek,fk){if(ek.a){var gk=Error("Cannot clearAfter ("+ek.i+"): previous operation not complete.");gk.type="stream";return Promise.reject(gk);}ek.a=new mb();nb(ek.a,function(){return [hd(this,fk),this.g.bind(this)];}.bind(ek));return fd(ek);}function ed(ek){ek.a?(ek=ek.a,ek.a?ek=ek.a:ek.f?(ek.c&&ek.c(),ek.a=new ga(),ek=ek.a):(ek.f=true,ek=Promise.resolve())):ek=Promise.resolve();return ek;}function fd(ek){ek.a.start();return ek.a.g.then(wa(ek,function(){this.a=null;})).catch(wa(ek,function(fk){this.a=null;return Promise.reject(fk);}));}function gd(ek,fk){try{ek.c.appendBuffer(fk);}catch(gk){return Promise.reject(gk);}ek.f=new ga();return ek.f;}function hd(ek,fk){if(0==ek.c.buffered.length)return Promise.resolve();var gk=tg(ek.b,fk);if(-1==gk||gk==ek.b.length-1)return Promise.resolve();try{ek.c.remove(ek.b[gk+1].b,Number.POSITIVE_INFINITY);}catch(hk){return Promise.reject(hk);}ek.b=ek.b.slice(0,gk+1);ek.f=new ga();return ek.f;}xc.prototype.g=function(){"open"==this.j.readyState&&this.c.abort();};xc.prototype.u=function(){this.f.resolve();this.f=null;};function id(){this.fontSize="100%";this.fontColor=ld;this.fontOpacity=nd;this.backgroundColor=md;this.backgroundOpacity=nd;this.fontEdge=od;}l("shaka.player.TextStyle",id);id.prototype.a=function(){var ek=i.localStorage.getItem("ShakaPlayerTextStyle");if(ek){var fk;try{fk=JSON.parse(ek);}catch(gk){return;}if(fk&&"object"==typeof fk){var ek=fk,hk;for(hk in ek)hk in this&&(this[hk]=ek[hk]);}}};id.prototype.load=id.prototype.a;id.prototype.b=function(){i.localStorage.setItem("ShakaPlayerTextStyle",JSON.stringify(this));};id.prototype.store=id.prototype.b;function jd(ek){var fk=[];fk.push("font-size: "+ek.fontSize);fk.push("color: "+kd(ek.fontColor,ek.fontOpacity));fk.push("background-color: "+kd(ek.backgroundColor,ek.backgroundOpacity));for(var gk=[],hk=0;hk<ek.fontEdge.length;++hk){var ik=ek.fontEdge[hk].slice(3,6);gk.push(kd(ek.fontEdge[hk].slice(0,3),ek.fontOpacity)+" "+ik.join("px ")+"px");}fk.push("text-shadow: "+gk.join(","));return fk.join("; ");}function kd(ek,fk){return "rgba("+ek.concat(fk).join(",")+")";}var ld=[255,255,255],md=[0,0,0];id.StandardColors={WHITE:ld,BLACK:md,RED:[255,0,0],GREEN:[0,255,0],BLUE:[0,0,255],YELLOW:[255,255,0],MAGENTA:[255,0,255],CYAN:[0,255,255]};var nd=1;id.StandardOpacities={OPAQUE:nd,SEMI_HIGH:.75,SEMI_LOW:.25,TRANSPARENT:0};var od=[];id.EdgeStyles={NONE:od,RAISED:[[34,34,34,1,1,0],[34,34,34,2,2,0],[34,34,34,3,3,0]],DEPRESSED:[[204,204,204,1,1,0],[204,204,204,0,1,0],[34,34,34,-1,-1,0],[34,34,34,0,-1,0]],UNIFORM:[[34,34,34,0,0,4],[34,34,34,0,0,4],[34,34,34,0,0,4],[34,34,34,0,0,4]],DROP:[[34,34,34,2,2,3],[34,34,34,2,2,4],[34,34,34,2,2,5]]};function pd(ek,fk,gk,hk){this.id=ek;this.bandwidth=fk||0;this.lang=gk||"unknown";this.streamInfoID=hk;this.active=false;}l("shaka.player.AudioTrack.compare",function(ek,fk){return ek.lang<fk.lang?-1:ek.lang>fk.lang?1:ek.bandwidth<fk.bandwidth?-1:ek.bandwidth>fk.bandwidth?1:0;});function qd(ek,fk,gk,hk,ik){this.id=ek;this.bandwidth=fk||0;this.width=gk||0;this.height=hk||0;this.streamInfoID=ik;this.active=false;}function rd(ek,fk){var gk=ek.width*ek.height,hk=fk.width*fk.height;return gk<hk?-1:gk>hk?1:ek.bandwidth<fk.bandwidth?-1:ek.bandwidth>fk.bandwidth?1:0;}l("shaka.player.VideoTrack.compare",rd);function sd(){this.j=this.a="";this.s=false;this.g=this.f=null;this.l=this.i=false;this.o=this.h="";this.c=null;this.b=[];}function td(ek,fk){var gk=ek.b.concat(fk.map(function(hk){return {initData:new Uint8Array(hk.initData.buffer),initDataType:hk.initDataType};}));ek.b=xa(gk,function(hk){return Array.prototype.join.apply(hk.initData)+","+hk.initDataType;});}function ud(ek,fk,gk,hk,ik,jk,kk,lk,mk,nk,ok){this.g=ek;this.j=fk;this.s=gk;this.a=[];this.h=ik||null;this.i=jk||null;this.f=kk==vd;this.l=lk==wd;this.c=mk||"";this.o=nk||"";this.b=ok||null;hk&&this.a.push(hk);}l("shaka.player.DrmSchemeInfo",ud);var vd=1;ud.DistinctiveIdentifier={OPTIONAL:0,REQUIRED:vd};var wd=1;ud.PersistentState={OPTIONAL:0,REQUIRED:wd};ud.createUnencrypted=function(){return new ud("","",false,null);};function xd(){this.minBandwidth=this.maxBandwidth=this.maxWidth=this.maxHeight=null;}xd.prototype.clone=function(){var ek=new xd();ek.maxHeight=this.maxHeight;ek.maxWidth=this.maxWidth;ek.maxBandwidth=this.maxBandwidth;ek.minBandwidth=this.minBandwidth;return ek;};var yd=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function zd(ek){var fk;ek instanceof zd?(ae(this,ek.K),this.O=ek.O,this.H=ek.H,be(this,ek.W),this.I=ek.I,ce(this,ek.a.clone()),this.N=ek.N):ek&&(fk=String(ek).match(yd))?(ae(this,fk[1]||"",true),this.O=de(fk[2]||""),this.H=de(fk[3]||"",true),be(this,fk[4]),this.I=de(fk[5]||"",true),ce(this,fk[6]||"",true),this.N=de(fk[7]||"")):this.a=new le(null);}j=zd.prototype;j.K="";j.O="";j.H="";j.W=null;j.I="";j.N="";j.toString=function(){var ek=[],fk=this.K;fk&&ek.push(ee(fk,ge,true),":");if(fk=this.H){ek.push("//");var gk=this.O;gk&&ek.push(ee(gk,ge,true),"@");ek.push(encodeURIComponent(fk).replace(/%25([0-9a-fA-F]{2})/g,"%$1"));fk=this.W;null!=fk&&ek.push(":",String(fk));}if(fk=this.I)this.H&&"/"!=fk.charAt(0)&&ek.push("/"),ek.push(ee(fk,"/"==fk.charAt(0)?ie:he,true));(fk=this.a.toString())&&ek.push("?",fk);(fk=this.N)&&ek.push("#",ee(fk,ke));return ek.join("");};j.resolve=function(ek){var fk=this.clone();"data"===fk.K&&(fk=new zd());var gk=!!ek.K;gk?ae(fk,ek.K):gk=!!ek.O;gk?fk.O=ek.O:gk=!!ek.H;gk?fk.H=ek.H:gk=null!=ek.W;var hk=ek.I;if(gk){be(fk,ek.W);}else if(gk=!!ek.I){if("/"!=hk.charAt(0))if(this.H&&!this.I){hk="/"+hk;}else{var ik=fk.I.lastIndexOf("/");-1!=ik&&(hk=fk.I.substr(0,ik+1)+hk);}if(".."==hk||"."==hk){hk="";}else if(-1!=hk.indexOf("./")||-1!=hk.indexOf("/.")){for(var ik=0==hk.lastIndexOf("/",0),hk=hk.split("/"),jk=[],kk=0;kk<hk.length;){var lk=hk[kk++];"."==lk?ik&&kk==hk.length&&jk.push(""):".."==lk?((1<jk.length||1==jk.length&&""!=jk[0])&&jk.pop(),ik&&kk==hk.length&&jk.push("")):(jk.push(lk),ik=true);}hk=jk.join("/");}}gk?fk.I=hk:gk=""!==ek.a.toString();gk?ce(fk,ek.a.clone()):gk=!!ek.N;gk&&(fk.N=ek.N);return fk;};j.clone=function(){return new zd(this);};function ae(ek,fk,gk){ek.K=gk?de(fk,true):fk;ek.K&&(ek.K=ek.K.replace(/:$/,""));}function be(ek,fk){if(fk){fk=Number(fk);if(isNaN(fk)||0>fk)throw Error("Bad port number "+fk);ek.W=fk;}else ek.W=null;}function ce(ek,fk,gk){fk instanceof le?ek.a=fk:(gk||(fk=ee(fk,je)),ek.a=new le(fk));}function de(ek,fk){return ek?fk?decodeURI(ek):decodeURIComponent(ek):"";}function ee(ek,fk,gk){return "string"==typeof ek?(ek=encodeURI(ek).replace(fk,fe),gk&&(ek=ek.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),ek):null;}function fe(ek){ek=ek.charCodeAt(0);return "%"+(ek>>4&15).toString(16)+(ek&15).toString(16);}var ge=/[#\/\?@]/g,he=/[\#\?:]/g,ie=/[\#\?]/g,je=/[\#\?@]/g,ke=/#/g;function le(ek){this.b=ek||null;}le.prototype.a=null;le.prototype.c=null;function me(ek,fk,gk){if(!ek.a&&(ek.a={},ek.c=0,ek.b))for(var hk=ek.b.split("&"),ik=0;ik<hk.length;ik++){var jk=hk[ik].indexOf("="),kk=null,lk=null;0<=jk?(kk=hk[ik].substring(0,jk),lk=hk[ik].substring(jk+1)):kk=hk[ik];kk=decodeURIComponent(kk.replace(/\+/g," "));lk=lk||"";me(ek,kk,decodeURIComponent(lk.replace(/\+/g," ")));}ek.b=null;(hk=ek.a.hasOwnProperty(fk)&&ek.a[fk])||(ek.a[fk]=hk=[]);hk.push(gk);ek.c++;}le.prototype.toString=function(){if(this.b)return this.b;if(!this.a)return "";var ek=[],fk;for(fk in this.a)for(var gk=encodeURIComponent(fk),hk=this.a[fk],ik=0;ik<hk.length;ik++){var jk=gk;""!==hk[ik]&&(jk+="="+encodeURIComponent(hk[ik]));ek.push(jk);}return this.b=ek.join("&");};le.prototype.clone=function(){var ek=new le();ek.b=this.b;if(this.a){var fk={},gk;for(gk in this.a)fk[gk]=this.a[gk].concat();ek.a=fk;ek.c=this.c;}return ek;};function ne(ek,fk){var gk=(new DOMParser()).parseFromString(ek,"text/xml");if(!gk)return null;fk||(fk=[new zd("")]);return mf({m:fk},gk,oe);}l("shaka.dash.mpd.parseMpd",ne);function oe(){this.id=this.url=null;this.type="static";this.b=this.j=this.m=null;this.g=5;this.i=this.c=this.f=null;this.h=1;this.a=[];}function pe(){this.g=this.f=this.c=this.m=this.a=this.start=this.id=null;this.b=[];}function qe(){this.i=this.b=this.height=this.width=this.contentType=this.lang=this.group=this.id=null;this.c=false;this.h=this.g=this.f=this.m=null;this.j=[];this.a=[];}function re(){this.value=null;}function se(){this.contentType=this.lang=this.id=null;}function te(){this.a=this.b=this.g=this.m=this.h=this.f=this.height=this.width=this.bandwidth=this.lang=this.id=null;this.c=[];}function ue(){this.value=this.schemeIdUri=this.b=null;this.children=[];this.a=this.pssh=null;}function ve(){this.parsedPssh=this.psshBox=null;}function we(){this.url=null;}function xe(){this.url=null;}function ye(){this.m=null;this.h=1;this.c=this.b=this.f=this.a=this.g=null;}ye.prototype.clone=function(){var ek=new ye();ek.m=qf(this.m);ek.h=this.h;ek.g=this.g;ek.a=rf(this.a);ek.f=rf(this.f);ek.b=rf(this.b);ek.c=rf(this.c);return ek;};function ze(){this.a=this.url=null;}ze.prototype.clone=function(){var ek=new ze();ek.url=qf(this.url);ek.a=rf(this.a);return ek;};function af(){this.a=this.url=null;}af.prototype.clone=function(){var ek=new af();ek.url=qf(this.url);ek.a=rf(this.a);return ek;};function bf(){this.m=null;this.a=1;this.c=this.g=null;this.i=0;this.h=null;this.b=[];this.f=null;}bf.prototype.clone=function(){var ek=new bf();ek.m=qf(this.m);ek.a=this.a;ek.g=this.g;ek.c=this.c;ek.i=this.i;ek.h=rf(this.h);ek.b=qf(this.b)||[];ek.f=rf(this.f);return ek;};function cf(){this.a=this.b=null;}cf.prototype.clone=function(){var ek=new cf();ek.b=qf(this.b);ek.a=rf(this.a);return ek;};function df(){this.b=1;this.a=this.i=null;this.j=0;this.c=this.g=this.f=this.h=null;}df.prototype.clone=function(){var ek=new df();ek.b=this.b;ek.i=this.i;ek.a=this.a;ek.j=this.j;ek.h=this.h;ek.f=this.f;ek.g=this.g;ek.c=rf(this.c);return ek;};function ef(){this.a=[];}ef.prototype.clone=function(){var ek=new ef();ek.a=qf(this.a)||[];return ek;};function ff(){this.c=this.a=this.b=null;}ff.prototype.clone=function(){var ek=new ff();ek.b=this.b;ek.a=this.a;ek.c=this.c;return ek;};function gf(ek,fk){this.V=ek;this.end=fk;}gf.prototype.clone=function(){return new gf(this.V,this.end);};oe.TAG_NAME="MPD";pe.TAG_NAME="Period";qe.TAG_NAME="AdaptationSet";re.TAG_NAME="Role";se.TAG_NAME="ContentComponent";te.TAG_NAME="Representation";ue.TAG_NAME="ContentProtection";ve.TAG_NAME="cenc:pssh";we.TAG_NAME="BaseURL";xe.TAG_NAME="Location";ye.TAG_NAME="SegmentBase";ze.TAG_NAME="RepresentationIndex";af.TAG_NAME="Initialization";bf.TAG_NAME="SegmentList";cf.TAG_NAME="SegmentURL";df.TAG_NAME="SegmentTemplate";ef.TAG_NAME="SegmentTimeline";ff.TAG_NAME="S";oe.prototype.parse=function(ek,fk){this.url=ek.m;this.id=sf(fk,"id",zf);this.type=sf(fk,"type",zf)||"static";this.b=sf(fk,"mediaPresentationDuration",uf);this.g=sf(fk,"minBufferTime",uf,this.g);this.f=sf(fk,"minimumUpdatePeriod",uf,this.f);this.c=sf(fk,"availabilityStartTime",tf,this.c);this.i=sf(fk,"timeShiftBufferDepth",uf,this.i);this.h=sf(fk,"suggestedPresentationDelay",uf,this.h);var gk=ek.m,hk=of(this,fk,we);this.m=jf(gk,hk);if(hk=mf(this,fk,xe))this.j=kf(gk,hk.url);this.a=of(this,fk,pe);};pe.prototype.parse=function(ek,fk){this.id=sf(fk,"id",zf);this.start=sf(fk,"start",uf);this.a=sf(fk,"duration",uf);var gk=of(this,fk,we);this.m=jf(ek.m,gk);this.c=mf(this,fk,ye);this.f=mf(this,fk,bf);this.g=mf(this,fk,df);this.b=of(this,fk,qe);hf(this);};function hf(ek){for(var fk=[],gk=0;gk<ek.b.length;++gk){var hk=ek.b[gk];null!=hk.group&&(fk[hk.group]=true);}for(gk=0;gk<ek.b.length;++gk)if(hk=ek.b[gk],null==hk.group){for(var ik=1;1==fk[ik];)++ik;fk[ik]=true;hk.group=ik;}}qe.prototype.parse=function(ek,fk){var gk=mf(this,fk,se)||{},hk=mf(this,fk,re);this.id=sf(fk,"id",zf);this.group=sf(fk,"group",yf);this.lang=sf(fk,"lang",zf,gk.lang);this.contentType=sf(fk,"contentType",zf,gk.contentType);this.width=sf(fk,"width",xf);this.height=sf(fk,"height",xf);this.b=sf(fk,"mimeType",zf);this.i=sf(fk,"codecs",zf);this.c=hk&&"main"==hk.value;this.lang&&(this.lang=kb(this.lang));gk=of(this,fk,we);this.m=jf(ek.m,gk);this.j=of(this,fk,ue);!this.contentType&&this.b&&(this.contentType=this.b.split("/")[0]);this.f=ek.c?lf(this,fk,ek.c):mf(this,fk,ye);this.g=ek.f?lf(this,fk,ek.f):mf(this,fk,bf);this.h=ek.g?lf(this,fk,ek.g):mf(this,fk,df);this.a=of(this,fk,te);!this.b&&this.a.length&&(this.b=this.a[0].f,!this.contentType&&this.b&&(this.contentType=this.b.split("/")[0]));};re.prototype.parse=function(ek,fk){this.value=sf(fk,"value",zf);};se.prototype.parse=function(ek,fk){this.id=sf(fk,"id",zf);this.lang=sf(fk,"lang",zf);this.contentType=sf(fk,"contentType",zf);this.lang&&(this.lang=kb(this.lang));};te.prototype.parse=function(ek,fk){this.id=sf(fk,"id",zf);this.bandwidth=sf(fk,"bandwidth",xf);this.width=sf(fk,"width",xf,ek.width);this.height=sf(fk,"height",xf,ek.height);this.f=sf(fk,"mimeType",zf,ek.b);this.h=sf(fk,"codecs",zf,ek.i);this.lang=ek.lang;var gk=of(this,fk,we);this.m=jf(ek.m,gk);this.c=of(this,fk,ue);this.g=ek.f?lf(this,fk,ek.f):mf(this,fk,ye);this.b=ek.g?lf(this,fk,ek.g):mf(this,fk,bf);this.a=ek.h?lf(this,fk,ek.h):mf(this,fk,df);0==this.c.length&&(this.c=ek.j);};ue.prototype.parse=function(ek,fk){this.b=fk;this.schemeIdUri=sf(fk,"schemeIdUri",zf);this.value=sf(fk,"value",zf);var gk=sf(fk,"cenc:default_KID",zf);gk&&(this.a=gk.replace(/[-]/g,""));this.pssh=mf(this,fk,ve);this.children=Array.prototype.slice.call(fk.childNodes);};ve.prototype.parse=function(ek,fk){var gk=pf(fk);if(gk){this.psshBox=bb(gk);try{this.parsedPssh=new eb(this.psshBox);}catch(hk){if(!(hk instanceof RangeError))throw hk;}}};we.prototype.parse=function(ek,fk){this.url=pf(fk);};xe.prototype.parse=function(ek,fk){this.url=pf(fk);};ye.prototype.parse=function(ek,fk){this.m=ek.m||this.m;this.h=sf(fk,"timescale",xf,this.h);this.g=sf(fk,"presentationTimeOffset",yf,this.g);this.a=sf(fk,"indexRange",vf,this.a);this.f=sf(fk,"FBFirstSegmentRange",vf,this.f);this.b=mf(this,fk,ze)||this.b;this.c=mf(this,fk,af)||this.c;};ze.prototype.parse=function(ek,fk){var gk=sf(fk,"sourceURL",zf);this.url=kf(ek.m,gk);this.a=sf(fk,"range",vf,rf(ek.a));};af.prototype.parse=function(ek,fk){var gk=sf(fk,"sourceURL",zf);this.url=kf(ek.m,gk);this.a=sf(fk,"range",vf);};bf.prototype.parse=function(ek,fk){this.m=ek.m||this.m;this.a=sf(fk,"timescale",xf,this.a);this.g=sf(fk,"presentationTimeOffset",yf,this.g);this.c=sf(fk,"duration",xf,this.c);this.i=sf(fk,"startNumber",yf,this.i);this.h=mf(this,fk,af)||this.h;var gk=of(this,fk,cf);this.b=gk&&0<gk.length?gk:this.b;this.f=mf(this,fk,ef)||this.f;};cf.prototype.parse=function(ek,fk){var gk=sf(fk,"media",zf);this.b=kf(ek.m,gk);this.a=sf(fk,"mediaRange",vf);};df.prototype.parse=function(ek,fk){this.b=sf(fk,"timescale",xf,this.b);this.i=sf(fk,"presentationTimeOffset",yf,this.i);this.a=sf(fk,"duration",xf,this.a);this.j=sf(fk,"startNumber",yf,this.j);this.h=sf(fk,"media",zf,this.h);this.f=sf(fk,"index",zf,this.f);this.g=sf(fk,"initialization",zf,this.g);this.c=mf(this,fk,ef)||this.c;};ef.prototype.parse=function(ek,fk){this.a=of(this,fk,ff);};ff.prototype.parse=function(ek,fk){this.b=sf(fk,"t",yf);this.a=sf(fk,"d",yf);this.c=sf(fk,"r",wf);};function jf(ek,fk){if(!fk||0===fk.length)return ek;for(var gk=[],hk=0;hk<fk.length;hk++){var ik=fk[hk].url;null==ek||0===ek.length?gk.push(new zd(ik)):(ik=kf(ek.slice(0,1),ik),gk.push(ik[0]));}return gk;}function kf(ek,fk){if(!fk)return ek;var gk=new zd(fk);return ek?ek.map(function(hk){return hk.resolve(gk);}):[gk];}function lf(ek,fk,gk){var hk=rf(gk);(fk=nf(fk,gk.constructor.TAG_NAME))&&hk.parse(ek,fk);return hk;}function mf(ek,fk,gk){var hk=null;if(fk=nf(fk,gk.TAG_NAME))hk=new gk(),hk.parse(ek,fk);return hk;}function nf(ek,fk){for(var gk=null,hk=0;hk<ek.childNodes.length;hk++)if(ek.childNodes[hk].tagName==fk){if(gk)return null;gk=ek.childNodes[hk];}return gk;}function of(ek,fk,gk){for(var hk=[],ik=0;ik<fk.childNodes.length;ik++)if(fk.childNodes[ik].tagName==gk.TAG_NAME){var jk=new gk();jk.parse.call(jk,ek,fk.childNodes[ik]);hk.push(jk);}return hk;}function pf(ek){ek=ek.firstChild;return ek.nodeType!=Node.TEXT_NODE?null:ek.nodeValue;}function qf(ek){return ek?ek.map(function(fk){return fk.clone();}):null;}function rf(ek){return ek?ek.clone():null;}function sf(ek,fk,gk,hk){ek=gk(ek.getAttribute(fk));return null!=ek?ek:void 0!==hk?hk:null;}function tf(ek){if(!ek)return null;ek=Date.parse(ek);return isNaN(ek)?null:Math.floor(ek/1000);}function uf(ek){if(!ek)return null;var fk=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(ek);if(!fk)return null;ek=0;var gk=yf(fk[1]);gk&&(ek+=31536000*gk);(gk=yf(fk[2]))&&(ek+=2592000*gk);(gk=yf(fk[3]))&&(ek+=86400*gk);(gk=yf(fk[4]))&&(ek+=3600*gk);(gk=yf(fk[5]))&&(ek+=60*gk);fk=i.parseFloat(fk[6]);(fk=isNaN(fk)?null:fk)&&(ek+=fk);return ek;}function vf(ek){var fk=/([0-9]+)-([0-9]+)/.exec(ek);if(!fk)return null;ek=yf(fk[1]);if(null==ek)return null;fk=yf(fk[2]);return null==fk?null:new gf(ek,fk);}function wf(ek){ek=i.parseInt(ek,10);return isNaN(ek)?null:ek;}function xf(ek){ek=i.parseInt(ek,10);return 0<ek?ek:null;}function yf(ek){ek=i.parseInt(ek,10);return 0<=ek?ek:null;}function zf(ek){return ek;}function ag(ek,fk){this.url=ek;this.b=fk||new bg();this.g=this.j=this.h=0;this.a=null;this.c=new ga();this.f=null;}l("shaka.util.AjaxRequest",ag);function bg(){this.body=null;this.a=1;this.g=1000;this.c=0;this.method="GET";this.f="arraybuffer";this.b={};this.i=this.h=false;}function cg(ek){dg(ek);ek.b.body=null;ek.c.destroy();ek.c=null;ek.f=null;}function dg(ek){ek.a&&(ek.a.onload=null,ek.a.onreadystatechange=null,ek.a.onerror=null,ek.a.ontimeout=null);ek.a=null;}ag.prototype.i=function(){if(this.a)return this.c;if(0==this.url.lastIndexOf("data:",0)){var ek=this.url.split(":")[1].split(";").pop().split(","),fk=ek.pop(),fk="base64"==ek.pop()?i.atob(fk.replace(/-/g,"+").replace(/_/g,"/")):i.decodeURIComponent(fk);"arraybuffer"==this.b.f&&(fk=ab(fk).buffer);ek=JSON.parse(JSON.stringify(new XMLHttpRequest()));ek.response=fk;ek.responseText=fk.toString();fk=this.c;fk.resolve(ek);cg(this);return fk;}if(0==this.url.lastIndexOf("idb:",0))return this.v();this.h++;this.j=Date.now();this.g||(this.g=this.b.g);this.a=new XMLHttpRequest();ek=this.url;this.f&&!this.f.supportsCaching()&&(ek=new zd(ek),me(ek.a,"_",Date.now()),ek=ek.toString());this.a.open(this.b.method,ek,true);this.a.responseType=this.b.f;this.a.timeout=this.b.c;this.a.withCredentials=this.b.h;this.a.onload=this.l.bind(this);this.a.onreadystatechange=this.o.bind(this);this.a.onerror=this.u.bind(this);this.a.ontimeout=this.s.bind(this);for(fk in this.b.b)this.a.setRequestHeader(fk,this.b.b[fk]);this.a.send(this.b.body);return this.c;};ag.prototype.send=ag.prototype.i;function eg(ek,fk,gk){fk=Error(fk);fk.type=gk;fk.status=ek.a.status;fk.url=ek.url;fk.method=ek.b.method;fk.body=ek.b.body;fk.hb=ek.a;return fk;}ag.prototype.l=function(ek){this.f&&this.f.sample(Date.now()-this.j,ek.loaded);ek=[403];200<=this.a.status&&299>=this.a.status?(this.c.resolve(this.a),cg(this)):this.h<this.b.a&&-1===ek.indexOf(this.a.status)?fg(this):(ek=eg(this,"HTTP error.","net"),this.c.reject(ek),cg(this));};ag.prototype.o=function(){if(this.a.readyState==XMLHttpRequest.HEADERS_RECEIVED&&(this.a.X=Date.now()-this.j,this.b.i)){var ek=Date.parse(this.a.getResponseHeader("Date"));ek&&(qa=ek-Date.now());}};ag.prototype.u=function(){var ek=eg(this,"Network failure.","net");this.c.reject(ek);cg(this);};ag.prototype.s=function(){if(this.h<this.b.a){fg(this);}else{var ek=eg(this,"Request timed out.","net");this.c.reject(ek);cg(this);}};function fg(ek){dg(ek);i.setTimeout(ek.i.bind(ek),ek.g*(1+.5*(2*Math.random()-1)));ek.g*=2;}function gg(ek,fk,gk,hk){this.b=fk;this.h=gk||0;this.g=null!=hk?hk:null;this.c=this.a=null;this.i=ek;}var hg;l("shaka.util.FailoverUri",gg);function ig(ek,fk){return ek&&0!==ek.length?ek.map(function(gk){return gk.resolve(fk);}):[fk];}gg.setPrefetchCacheValueGetter=function(ek){hg=ek;};function jg(ek,fk,gk){if(ek.a)return ek.a;ek.a=kg(ek,0,fk||new bg(),gk);return ek.a;}gg.prototype.f=function(){if(this.c){this.a=null;var ek=this.c;if(ek.a&&ek.a.readyState!=XMLHttpRequest.DONE){ek.a.abort();var fk=eg(ek,"Request aborted.","aborted");ek.c.reject(fk);cg(ek);}this.c=null;}};function kg(ek,fk,gk,hk){var ik=ek.b[fk].toString();if(ek.h||ek.g){var jk=ek.b[fk].H;!jk.endsWith("fbcdn.net")||jk.startsWith("interncache")||jk.endsWith("ak.fbcdn.net")?gk.b.Range="bytes="+(ek.h+"-"+(null!=ek.g?ek.g:"")):ik+="&bytestart="+ek.h+"&byteend="+ek.g;}ek.i&&(ik=ek.i(ik,gk.b)||ik);jk=null;hg&&(jk=hg(ik));jk||(ek.c=new ag(ik,gk),hk&&(ek.c.f=hk),jk=ek.c.i());ik=jk.then(wa(ek,function(kk){this.c=this.a=null;kk.response.X=kk.X;return Promise.resolve(kk.response);}));return ik=ik.catch(wa(ek,function(kk){if(this.a&&fk+1<this.b.length)return this.a=kg(this,fk+1,gk,hk);this.a=this.c=null;return Promise.reject(kk);}));}gg.prototype.clone=function(){return new gg(this.i,this.b.map(function(ek){return ek.clone();}),this.h,this.g);};gg.prototype.toString=function(){return this.b[0].toString();};function lg(ek,fk){this.a=new bg();this.a.f="text";this.a.a=3;this.a.c=1000*(null!=fk?fk:0);this.a.i=true;this.b=ek;}function mg(ek){var fk=ek.b;return jg(fk,ek.a).then(function(gk){if(gk=ne(gk,fk.b))return Promise.resolve(gk);gk=Error("MPD parse failure.");gk.type="mpd";return Promise.reject(gk);});}function ng(ek,fk,gk,hk){if(!fk.a)return null;var ik=fk.a.h;if(!ik)return fk.m?new gg(ek,fk.m,0,null):null;gk=og(ik,fk.id,gk,fk.bandwidth,hk);if(!gk)return null;fk=ig(fk.m,gk);return new gg(ek,fk,0,null);}function og(ek,fk,gk,hk,ik){var jk={RepresentationID:fk,Number:gk,Bandwidth:hk,Time:ik};ek=ek.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)d)?\$/g,function(lk,mk,nk){if("$$"==lk)return "$";var ok=jk[mk];if(null==ok)return lk;"RepresentationID"==mk&&nk&&(nk=void 0);lk=ok.toString();nk=i.parseInt(nk,10)||1;nk=Math.max(0,nk-lk.length);return Array(nk+1).join("0")+lk;});try{return new zd(ek);}catch(kk){if(kk instanceof URIError)return null;throw kk;}}function pg(ek,fk,gk){var hk=0;fk*=gk;ek=ek.a;gk=[];for(var ik=0;ik<ek.length&&ek[ik].a;++ik){var jk=ek[ik].b,jk=null!=jk?jk:hk,kk=ek[ik].c||0;0>kk&&(kk=ek[ik].a,kk=ik+1===ek.length?Math.ceil((ek[0].b+fk-jk)/kk)-1:Math.ceil((ek[ik+1].b-jk)/kk)-1);0<gk.length&&jk!=hk&&(gk[gk.length-1].end=jk);for(var lk=0;lk<=kk;++lk)hk=jk+ek[ik].a,gk.push({start:jk,end:hk}),jk=hk;}return gk;}function qg(ek,fk,gk,hk,ik){this.b=new gg(null,[new zd(ek)]);this.a=new bg();this.a.body=fk;this.a.method=gk;this.a.a=3;this.a.h=hk;this.a.c=0;ek=ik||{};for(var jk in ek)this.a.b[jk]=ek[jk];}function rg(ek){return jg(ek.b,ek.a).then(function(fk){return Promise.resolve(new Uint8Array(fk));});}function sg(ek,fk,gk){this.b=ek;this.a=fk;this.url=gk;}function tg(ek,fk){for(var gk=ek.length-1;0<=gk;--gk){var hk=ek[gk];if(fk>=hk.b&&(null==hk.a||fk<hk.a))return gk;}return -1;}function ug(ek,fk){return ek.map(function(gk){return new sg(gk.b+fk,null!=gk.a?gk.a+fk:null,gk.url);});}function vg(){}vg.prototype.parse=function(ek,fk,gk,hk,ik){var jk=null;try{ek:{var lk=[],mk=new ha(ek),nk=la(mk);if(1936286840!=la(mk)){jk=null;}else{1==nk&&(nk=ma(mk));var ok=ka(mk);oa(mk,3);oa(mk,4);var pk=la(mk);if(0==pk){jk=null;}else{var qk,rk;0==ok?(qk=la(mk),rk=la(mk)):(qk=ma(mk),rk=ma(mk));oa(mk,2);var sk=mk.b.getUint16(mk.a,mk.c);mk.a+=2;ek=qk;fk=fk+nk+rk;for(nk=0;nk<sk;nk++){var tk=la(mk);rk=(tk&2147483648)>>>31;var ok=tk&2147483647,uk=la(mk);la(mk);if(1==rk){jk=null;break ek;}var vk;vk=0==nk&&ik?ik:new gg(hk,gk,fk,fk+ok-1);lk.push(new sg(ek/pk,(ek+uk)/pk,vk));ek+=uk;fk+=ok;}jk=lk;}}};}catch(kk){if(!(kk instanceof RangeError))throw kk;}return jk;};function wg(){}wg.prototype.parse=function(ek,fk,gk,hk){var ik=null;try{var kk,lk=new zb(fk);if(440786851!=bc(lk).id){kk=null;}else{var mk=bc(lk);if(408125543!=mk.id){kk=null;}else{var nk=mk.a.byteOffset,ok,pk=new zb(mk.a);for(fk=null;ja(pk.a);){var qk=bc(pk);if(357149030==qk.id){fk=qk;break;}}if(fk){for(var rk=new zb(fk.a),pk=1e+06;ja(rk.a);){var sk=bc(rk);if(2807729==sk.id){pk=ec(sk);break;}}ok=pk/1e+09;}else ok=null;kk=ok?{ab:nk,fb:ok}:null;}}if(kk){var tk=bc(new zb(ek));if(475249515!=tk.id){ik=null;}else{var uk=kk.ab,vk=kk.fb;ek=[];var wk=new zb(tk.a);for(kk=tk=-1;ja(wk.a);){var xk=bc(wk);if(187==xk.id){var yk,zk=new zb(xk.a),al=bc(zk);if(179!=al.id){yk=null;}else{var bl=ec(al),cl=bc(zk);if(183!=cl.id){yk=null;}else{for(var dl=new zb(cl.a),nk=0;ja(dl.a);){var el=bc(dl);if(241==el.id){nk=ec(el);break;}}yk={gb:bl,$a:nk};}}if(yk){var fl=vk*yk.gb,gl=uk+yk.$a;if(0<=tk){var hl=new gg(hk,gk,kk,gl-1);ek.push(new sg(tk,fl,hl));}tk=fl;kk=gl;}}}0<=tk&&(hl=new gg(hk,gk,kk,null),ek.push(new sg(tk,null,hl)));ik=ek;}}else ik=null;}catch(jk){if(!(jk instanceof RangeError))throw jk;}return ik;};function xg(ek){this.a=ek;}xg.prototype.destroy=function(){this.a&&(this.a.f(),this.a=null);};xg.prototype.create=function(){return this.a?jg(this.a):Promise.resolve(null);};function yg(ek){this.a=ek;this.pa=0;}yg.prototype.destroy=function(){this.a=null;};yg.prototype.length=function(){return this.a.length;};function zg(ek){if(0==ek.a.length)throw new RangeError("SegmentIndex: There is no first SegmentReference.");return ek.a[0];}function ah(ek){if(0==ek.a.length)throw new RangeError("SegmentIndex: There is no last SegmentReference.");return ek.a[ek.a.length-1];}yg.prototype.get=function(ek){if(0>ek||ek>=this.a.length)throw new RangeError("SegmentIndex: The specified index is out of range.");return this.a[ek];};function bh(ek,fk){var gk=tg(ek.a,fk);return 0<=gk?ek.a[gk]:null;}function ch(ek,fk){var gk=fk-ek.pa;0!=gk&&(ek.a=ug(ek.a,gk),ek.pa=fk);}function dh(ek,fk,gk,hk,ik){this.b=fk;this.c=gk;this.a=null;this.f=ik;}dh.prototype.destroy=function(){this.f=this.c=this.b=null;this.a&&(this.a.destroy(),this.a=null);};dh.prototype.create=function(){if(this.a)return Promise.resolve(this.a);var ek,fk=this.c.a;fk:{ek=this.f;for(var gk=this.c,fk=Math.ceil(this.b.a/(fk.a/fk.b)),hk=gk.a,ik=[],jk=0;jk<fk;++jk){var kk=jk+1,lk=(kk-1)*hk.a,mk=lk/hk.b,lk=(lk+hk.a)/hk.b,kk=ng(ek,gk,kk-1+hk.j,(kk-1)*hk.a);if(!kk){ek=null;break fk;}ik.push(new sg(mk,lk,kk));}ek=ik;};ek?(0<ek.length&&(gk=ek[ek.length-1],ek[ek.length-1]=new sg(gk.b,this.b.a,gk.url)),ek=new yg(ek)):ek=null;this.a=ek;return this.a?Promise.resolve(this.a):(ek=Error("Failed to generate SegmentReferences"),ek.type="stream",Promise.reject(ek));};function eh(ek,fk,gk,hk,ik,jk,kk,lk){this.g=gk;this.a=hk;this.f=ik;this.b=jk;this.i=this.c=null;this.h=lk;}eh.prototype.destroy=function(){this.h=null;this.a.f();this.a=null;this.b&&(this.b.f(),this.b=null);this.f&&(this.f.f(),this.f=null);this.i&&(this.i.destroy(),this.i=null);this.c=null;};eh.prototype.create=function(){if(this.c)return this.c;var ek=[jg(this.a)];"webm"==this.g&&ek.push(jg(this.f));this.b&&jg(this.b);return this.c=Promise.all(ek).then(wa(this,function(fk){var gk=fk[0];fk=fk[1]||null;var hk=null;"mp4"==this.g?(hk=new vg(),hk=hk.parse(new DataView(gk),this.a.h,this.a.b,this.h,this.b)):"webm"==this.g&&(hk=new wg(),hk=hk.parse(new DataView(gk),new DataView(fk),this.a.b,this.h));return hk?Promise.resolve(new yg(hk)):(gk=Error("Failed to parse SegmentReferences from "+this.a.toString()+" (or one of its fallbacks)."),gk.type="stream",Promise.reject(gk));}));};function fh(ek,fk,gk,hk,ik){this.f=fk;this.b=gk;this.a=null;this.c=ik;}fh.prototype.destroy=function(){this.c=this.b=this.f=null;this.a&&(this.a.destroy(),this.a=null);};fh.prototype.create=function(){if(this.a)return Promise.resolve(this.a);for(var ek=this.b.a,fk=pg(ek.c,ek.b||1,this.f.a||0),gk=[],hk=0;hk<fk.length;++hk){var ik=fk[hk].start,jk=ik/ek.b,kk=fk[hk].end/ek.b,ik=ng(this.c,this.b,hk+ek.j,ik);if(!ik)return ek=Error("Failed to generate media URL."),ek.type="dash",Promise.reject(ek);var lk=(ek.i||0)/ek.b;gk.push(new sg(jk-lk,kk-lk,ik));}this.a=new yg(gk);return Promise.resolve(this.a);};function gh(ek,fk,gk,hk,ik){this.b=fk;this.f=gk;this.a=null;this.c=ik;}gh.prototype.destroy=function(){this.c=this.f=this.b=null;this.a&&(this.a.destroy(),this.a=null);};gh.prototype.create=function(){if(this.a)return Promise.resolve(this.a);var ek=this.f.b,fk=[];ek.f&&(fk=pg(ek.f,ek.a||1,this.b.a||0));var gk=0;ek.c&&ek.i?gk=ek.c*ek.i:0<fk.length&&(gk=fk[0].start-(ek.g||0));var hk=gk,ik=ek.b.length;0<fk.length&&fk.length!=ek.b.length&&(ik=Math.min(fk.length,ek.b.length));for(var jk=[],kk=0;kk<ik;++kk){var lk=ek.b[kk],mk=gk/ek.a,nk=null,ok=null;ek.c?(nk=gk+ek.c,ok=nk/ek.a):0<fk.length?(nk=fk[kk].end-(ek.g||0),ok=nk/ek.a):(ok=mk+this.b.a,nk=ok*ek.a);var gk=nk,nk=0,pk=null;lk.a&&(nk=lk.a.V,pk=lk.a.end);ok=Math.min(this.b.a+hk/ek.a,ok);jk.push(new sg(mk,ok,new gg(this.c,lk.b,nk,pk)));}this.a=new yg(jk);return Promise.resolve(this.a);};function hh(ek){this.b=ek;this.a=null;}hh.prototype.destroy=function(){this.a&&(this.a.destroy(),this.a=null);};hh.prototype.create=function(){if(this.a)return Promise.resolve(this.a);var ek=new sg(0,null,this.b);this.a=new yg([ek]);return Promise.resolve(this.a);};function ih(){this.b=jh++;this.id=this.L=this.F=null;this.h=0;this.height=this.width=this.bandwidth=null;this.f=this.c="";this.g=[];this.J=false;this.a=true;}var jh=0;ih.prototype.destroy=function(){this.F&&(this.F.destroy(),this.F=null);this.L&&(this.L.destroy(),this.L=null);};function kh(ek){var fk=ek.c||"";ek.f&&(fk+='; codecs="'+ek.f+'"');return fk;}function lh(){this.b=mh++;this.id=null;this.contentType=this.lang="";this.f=false;this.a=[];this.c=[];}var mh=0;lh.prototype.destroy=function(){for(var ek=0;ek<this.a.length;++ek)this.a[ek].destroy();this.c=this.a=null;};function nh(ek){for(var fk=[],gk=0;gk<ek.c.length;++gk){var hk=new qh();hk.id=ek.b;hk.a=ek.c[gk];hk.contentType=ek.contentType;hk.b=ek.a.length?kh(ek.a[0]):"";fk.push(hk);}return fk;}function oh(){this.id=null;this.start=0;this.b=null;this.a=[];}oh.prototype.destroy=function(){for(var ek=0;ek<this.a.length;++ek)this.a[ek].destroy();this.a=null;};function ph(){this.b=false;this.g=this.h=this.f=null;this.c=0;this.a=[];}ph.prototype.destroy=function(){for(var ek=0;ek<this.a.length;++ek)this.a[ek].destroy();this.a=null;};function qh(){this.id=0;this.a=null;this.b=this.contentType="";}function rh(ek){this.a=ek;}function sh(ek){if(ek.a.length){null==ek.a[0].start&&(ek.a[0].start=0);var fk=function(mk){return 0==mk||!!mk;};"dynamic"==ek.type&&(ek.b=null);fk(ek.b)&&1==ek.a.length&&!fk(ek.a[0].a)&&(ek.a[0].a=ek.b);for(var gk=0,hk=true,ik=0;ik<ek.a.length;++ik){var jk=ek.a[ik-1],kk=ek.a[ik],lk=ek.a[ik+1]||{start:ek.b};!fk(kk.start)&&jk&&fk(jk.start)&&fk(jk.a)&&(kk.start=jk.start+jk.a);!fk(kk.a)&&fk(lk.start)&&(kk.a=lk.start-kk.start);null!=kk.start&&null!=kk.a?gk+=kk.a:hk=false;}fk(ek.b)||(ik=ek.a[ek.a.length-1],hk?ek.b=gk:fk(ik.start)&&fk(ik.a)?ek.b=ik.start+ik.a:"dynamic"!=ek.type&&(ek.b=gk));}}function th(ek,fk,gk,hk){var ik=new oh();ik.id=gk.id;ik.start=gk.start;ik.b=gk.a;var jk=new qb();gk.b.forEach(function(tk){jk.push(tk.contentType||"",tk);});for(var kk=tb(jk),lk=0;lk<kk.length;++lk){var mk=new qb();jk.get(kk[lk]).forEach(function(tk){mk.push(tk.group,tk);});for(var nk=tb(mk),ok=0;ok<nk.length;++ok){var pk=new qb();mk.get(nk[ok]).forEach(function(tk){pk.push(tk.lang,tk);});for(var qk=tb(pk),rk=0;rk<qk.length;++rk){var sk=pk.get(qk[rk]),sk=uh(ek,fk,gk,sk,hk);ik.a.push(sk);}}}return ik;}function uh(ek,fk,gk,hk,ik){t(hk.every(function(rk){return rk.group==hk[0].group&&(rk.lang||"")==(hk[0].lang||"")&&(rk.contentType||"")==(hk[0].contentType||"");}));var jk=new lh(),kk=hk.filter(function(rk){return null!=rk.id;});kk.length==hk.length&&(jk.id=kk.map(function(rk){return rk.id;}).sort().reduce(function(rk,sk){return rk+","+sk;}));jk.lang=hk[0].lang||"";jk.contentType=hk[0].contentType||"";jk.f=hk.some(function(rk){return rk.c;});for(var kk={},lk=0;lk<hk.length;++lk)for(var mk=hk[lk],nk=0;nk<mk.a.length;++nk){var ok=mk.a[nk],pk=xh(ek,ok),qk=jk.c.slice(0);wh(pk,qk);0==qk.length&&0<jk.c.length||!(ok=zh(fk,gk,ok,ik))||(jk.a.push(ok),jk.c=qk,kk[ok.b]=mk);}if(jk.c.some(function(rk){return ""==rk.a;}))return jk.a.forEach(function(rk){rk.J=true;}),jk;ek=vh(hk);for(lk=0;lk<jk.a.length;++lk)ok=jk.a[lk],mk=kk[ok.b],mk==ek&&(ok.J=true);return jk;}function vh(ek){for(var fk=null,gk=null,hk=0;hk<ek.length;++hk)for(var ik=ek[hk],jk=0;jk<ik.a.length;++jk){var kk=ik.a[jk],kk=(kk.width||1)*(kk.height||1)*(kk.bandwidth||1);if(null==fk||kk<fk)fk=kk,gk=ik;}return gk;}function wh(ek,fk){if(0==fk.length){Array.prototype.push.apply(fk,ek);}else for(var gk=0;gk<fk.length;++gk){for(var hk=false,ik=0;ik<ek.length;++ik){var jk=fk[gk],kk=ek[ik];if(jk.a==kk.a&&jk.j==kk.j&&jk.s==kk.s&&jk.f==kk.f&&jk.g==kk.g&&jk.i==kk.i&&jk.l==kk.l&&jk.h==kk.h&&jk.o==kk.o&&db(jk.c,kk.c)){hk=true;break;}}hk||(fk.splice(gk,1),--gk);}}function xh(ek,fk){var gk=[];if(0==fk.c.length){gk.push(new sd());}else if(ek.a)for(var hk=0;hk<fk.c.length;++hk)gk.push.apply(gk,yh(ek,fk.c[hk]));return gk;}function yh(ek,fk){var gk=[];if(2==ek.a.length){var hk=ek.a(fk.schemeIdUri,fk.b);if(!(hk&&hk instanceof Array))return [];for(var ik=0;ik<hk.length;++ik){var jk,kk=hk[ik];jk=new sd();if(kk){var lk=ta(kk,"keySystem");if(null!=lk){jk.a=lk;}else throw Error("'keySystem' cannot be null.");var mk=ta(kk,"licenseServerUrl");if(null!=mk){jk.j=mk;}else if(lk)throw Error("For encrypted streaming content, 'licenseServerUrl' cannot be null or empty.");lk=ua(kk,"withCredentials","boolean");null!=lk&&(jk.s=lk);lk=va(kk,"licensePostProcessor",Function);null!=lk&&(jk.f=lk);lk=va(kk,"licensePreProcessor",Function);null!=lk&&(jk.g=lk);lk=ua(kk,"distinctiveIdentifierRequired","boolean");null!=lk&&(jk.i=lk);lk=ua(kk,"persistentStateRequired","boolean");null!=lk&&(jk.l=lk);lk=ta(kk,"audioRobustness");null!=lk&&(jk.h=lk);lk=ta(kk,"videoRobustness");null!=lk&&(jk.o=lk);lk=va(kk,"serverCertificate",Uint8Array);null!=lk&&(jk.c=lk);if(lk=va(kk,"initData",Object)){kk=va(lk,"initData",Uint8Array);if(null==kk)throw Error("'initData.initData' cannot be null.");lk=ta(lk,"initDataType");if(null==lk)throw Error("'initData.initDataType' cannot be null.");jk.b.push({initData:new Uint8Array(kk.buffer),initDataType:lk});}}0==jk.b.length&&fk.pssh&&fk.pssh.psshBox&&td(jk,[{initData:fk.pssh.psshBox,initDataType:"cenc"}]);gk.push(jk);}}else{hk=ek.a(fk);if(!(hk&&hk instanceof ud))return [];ik=new sd();ik.a=hk.g;ik.j=hk.j;ik.s=hk.s;ik.f=hk.h;ik.g=hk.i;ik.i=hk.f;ik.l=hk.l;ik.h=hk.c;ik.o=hk.o;ik.c=hk.b?new Uint8Array(hk.b.buffer):null;td(ik,hk.a);gk.push(ik);}return gk;}function zh(ek,fk,gk,hk){if(!gk.m||0===gk.m.length)return null;var ik=null,jk=1,kk=0;if(gk.g){fk=gk.f.split("/")[1],"mp4"!=fk&&"webm"!=fk?ik=null:(jk=gk.g,"webm"!=fk||jk.c?jk.a||jk.b&&jk.b.a?(ek=jk.b,ek||(ek=new ze(),ek.url=gk.m,ek.a=jk.a?jk.a.clone():null),ik=bi(ek,hk),ek=jk.c?bi(jk.c,hk):null,jk.f?(jk=jk.f,jk=new gg(hk,gk.m,jk.V,jk.end)):jk=null,hk=new eh(0,0,fk,ik,ek,jk,0,hk),fk=new xg(ek),ek=new ih(),ek.F=hk,ek.L=fk,ik=ek):ik=null:ik=null),jk=gk.g.h,kk=gk.g.g;}else if(gk.b){ek=gk.b,!ek.c&&!ek.f&&1<ek.b.length?ik=null:ek.c||fk.a||ek.f||1!=ek.b.length?ek.f&&0===ek.f.a.length?ik=null:(ek=ek.h?bi(ek.h,hk):null,hk=new gh(0,fk,gk,0,hk),fk=new xg(ek),ek=new ih(),ek.F=hk,ek.L=fk,ik=ek):ik=null,jk=gk.b.a,kk=gk.b.g;}else if(gk.a){ek:if(ik=gk.a,jk=0+(ik.f?1:0),jk+=ik.c?1:0,jk+=ik.a?1:0,0==jk?jk=false:(1!=jk&&(ik.f?(ik.c=null,ik.a=null):ik.c&&(ik.a=null)),jk=true),jk){jk=null;if(ik.g&&(jk=(ik=gk.a.g)?ai(gk,ik,af):null,!jk)){ik=null;break ek;}ik=jk?bi(jk,hk):null;jk=gk.a;jk.f?(fk=gk.f.split("/")[1],"mp4"!=fk&&"webm"!=fk?hk=null:"webm"!=fk||ik?ng(hk,gk,1,0)?(ek=(ek=gk.a.f)?ai(gk,ek,ze):null)?(ek=bi(ek,hk),hk=new eh(0,0,fk,ek,ik,null,0,hk)):hk=null:hk=null:hk=null):hk=jk.h?jk.c?new fh(0,fk,gk,0,hk):jk.a?"dynamic"!=ek.type&&null==fk.a?null:new dh(0,fk,gk,0,hk):null:null;hk?(fk=new xg(ik),ek=new ih(),ek.F=hk,ek.L=fk,ik=ek):ik=null;}else ik=null;;jk=gk.a.b;kk=gk.a.i;}else "text"==gk.f.split("/")[0]&&(ik=new ih(),ik.F=new hh(new gg(hk,gk.m)));if(!ik)return null;ik.id=gk.id;kk&&(ik.h=-1*kk/jk);ik.bandwidth=gk.bandwidth;ik.width=gk.width;ik.height=gk.height;ik.c=gk.f||"";ik.f=gk.h||"";for(hk=0;hk<gk.c.length;++hk)fk=gk.c[hk],fk.a&&ik.g.push(fk.a);return ik;}function ai(ek,fk,gk){fk=og(fk,ek.id,null,ek.bandwidth,null);if(!fk)return null;gk=new gk();gk.url=ig(ek.m,fk);return gk;}function bi(ek,fk){var gk=ek.url,hk=0,ik=null;ek.a&&(hk=ek.a.V,ik=ek.a.end);return new gg(fk,gk,hk,ik);}function ci(ek,fk){ub.call(this,ek);this.b=fk;this.h=true;this.g=this.f=null;this.c=new ga();this.a=null;}m(ci,ub);ci.prototype.A=function(){};ci.prototype.destroy=function(){this.a&&this.b.removeChild(this.a);this.c.destroy();this.s=this.b=this.f=this.g=this.a=this.c=null;};j=ci.prototype;j.ma=function(){return this.f;};j.za=function(){return this.g;};j.Fa=function(){return this.c;};j.Aa=function(){return true;};j.oa=function(ek){ek.F.create().then(wa(this,function(fk){if(this.b){if(0==fk.length())return Promise.reject(Error("No subtitles URL available."));var gk=this.f;this.f=ek;this.g=fk;fk=zg(fk).url.b[0].toString();var hk=this.ta();this.a&&(this.na(false),this.b.removeChild(this.a));this.a=document.createElement("track");this.b.appendChild(this.a);this.a.src=fk;this.na(hk);fk=ea({type:"adaptation",bubbles:true,contentType:"text",size:null,bandwidth:ek.bandwidth});this.dispatchEvent(fk);gk||this.c.resolve(0);}}));};j.Ca=function(){};j.Da=function(){return true;};j.na=function(ek){this.h=ek;this.a&&(this.a.track.mode=ek?"showing":"disabled");};j.ta=function(){return this.h;};j.va=function(){return 0;};function di(ek,fk,gk){ub.call(this,ek);this.b=fk;this.j=gk;this.a=this.f=null;this.i=new fc();this.g={};this.h=[];this.o=0;this.c=new ga();this.l=null;}m(di,ub);di.prototype.destroy=function(){this.s=null;for(var ek=0;ek<this.h.length;++ek)this.h[ek].close().catch(function(){});this.h=[];this.g=this.a=this.f=null;this.c.destroy();this.c=null;this.i.destroy();this.i=null;this.l&&(i.clearTimeout(this.l),this.l=null);this.b=this.j=null;};di.prototype.initialize=function(){var ek=new qb(),fk;fk=this.j;if(fk.w){fk=fk.a.a[0];for(var gk=[],hk=0;hk<fk.a.length;++hk)gk.push.apply(gk,nh(fk.a[hk]));fk=gk;}else fk=[];for(gk=0;gk<fk.length;++gk)hk=fk[gk],hk.a.a||hk.b&&!wi(hk.b)||ek.push(hk.contentType,hk);for(var gk={},hk=false,ik=0;ik<fk.length;++ik){var jk=fk[ik];if(jk.a.a&&!ek.a.hasOwnProperty(jk.contentType)){var kk=jk.a.a,lk=gk[kk];lk||(lk=jk.a,lk={audioCapabilities:void 0,videoCapabilities:void 0,initDataTypes:void 0,distinctiveIdentifier:lk.i?"required":"optional",persistentState:lk.l?"required":"optional",sessionTypes:["temporary"]},gk[kk]=lk);if(jk.b&&(kk=jk.contentType+"Capabilities",kk in lk)){hk=true;lk[kk]||(lk[kk]=[]);var mk;"audio"==jk.contentType?mk=jk.a.h:"video"==jk.contentType&&(mk=jk.a.o);lk[kk].push({contentType:jk.b,robustness:mk});}}}if(!hk)if(fk.length){this.a=fk[0].a;}else throw ek=Error("No DrmInfo exists!"),ek.type="drm",ek;if(0==Object.keys(gk).length)return jj(this.j,ek),this.c.resolve(),Promise.resolve();mk=new ga();gk=ei(gk,mk);gk=gk.then(this.Ia.bind(this,fk,ek));gk=gk.then(this.bb.bind(this));mk.reject(null);return gk;};function ei(ek,fk){for(var gk in ek)fk=fk.catch(function(hk,ik){return navigator.requestMediaKeySystemAccess(hk,[ik]);}.bind(null,gk,ek[gk]));return fk;}j=di.prototype;j.Ia=function(ek,fk,gk){if(!this.b)return fi();for(var hk=gk.keySystem,ik=gk.getConfiguration(),jk=["audio","video"],kk=0;kk<jk.length;++kk){var lk=jk[kk];if(!fk.a.hasOwnProperty(lk)){var mk=ik[lk+"Capabilities"];if(mk&&mk.length){for(var mk=mk[0],nk=[],ok={},pk=0;pk<ek.length;++pk){var qk=ek[pk];if(qk.a.a==hk&&qk.b==mk.contentType&&!(qk.id in ok)){nk.push(qk);ok[qk.id]=true;var rk;if(this.a){rk=this.a;var qk=qk.a,sk=new sd();sk.a=rk.a;sk.j=rk.j;sk.s=rk.s;sk.f=rk.f;sk.g=rk.g;sk.i=rk.i;sk.l=rk.l;sk.h=rk.h;sk.o=rk.o;sk.c=rk.c?new Uint8Array(rk.c.buffer):null;td(sk,rk.b);td(sk,qk.b);rk=sk;}else rk=qk.a;this.a=rk;}}fk.a[lk]=nk;}}}jj(this.j,fk);return gk.createMediaKeys();};j.bb=function(ek){if(!this.b)return fi();this.f=ek;return this.b.setMediaKeys(this.f).then(wa(this,function(){return this.b?this.a.c?this.f.setServerCertificate(this.a.c):Promise.resolve():fi();})).then(wa(this,function(){if(!this.b)return fi();for(var fk=0;fk<this.a.b.length;++fk){var gk=this.a.b[fk];this.Ba({type:"encrypted",initDataType:gk.initDataType,initData:gk.initData});}0==this.a.b.length&&gc(this.i,this.b,"encrypted",this.Ba.bind(this));}));};function fi(){var ek=Error("EmeManager destroyed");ek.type="destroy";return Promise.reject(ek);}j.Ba=function(ek){var fk=new Uint8Array(ek.initData),gk=Array.prototype.join.apply(fk);if(!this.g[gk]){try{var ik=gi(this);}catch(hk){ik=fa(hk);this.dispatchEvent(ik);this.c.reject(hk);return;}ek=ik.generateRequest(ek.initDataType,ek.initData);this.g[gk]=true;ek.catch(wa(this,function(jk){if(this.g){this.g[gk]=false;var kk=fa(jk);this.dispatchEvent(kk);this.c.reject(jk);}}));this.h.push(ik);}};function gi(ek){var fk=null,fk=ek.f.createSession();gc(ek.i,fk,"message",ek.Sa.bind(ek));gc(ek.i,fk,"keystatuseschange",ek.Ma.bind(ek));return fk;}j.Sa=function(ek){hi(this,ek.target,this.a,ek.message);};j.Ma=function(ek){ek=ek.target.keyStatuses;for(var fk={},gk=ek.keys(),hk=gk.next();!hk.done;hk=gk.next()){var ik=cb(new Uint8Array(hk.value)),hk=ek.get(hk.value);fk[ik]=hk;}mj(this.j,fk);};function hi(ek,fk,gk,hk){hk=ii(gk,hk);rg(new qg(hk.url,hk.body,hk.method,gk.s,hk.headers)).then(wa(ek,function(ik){gk.f&&(ik=gk.f(ik));return fk.update(ik);})).then(wa(ek,function(){var ik=ea({type:"sessionReady",detail:fk});this.dispatchEvent(ik);this.o++;this.o>=this.h.length&&this.c.resolve();})).catch(wa(ek,function(ik){ik.lb=fk;ik=fa(ik);this.dispatchEvent(ik);}));}function ii(ek,fk){var gk={url:ek.j,body:fk.slice(0),method:"POST",headers:{}};if(!ek.g)return gk;ek.g(gk);gk.url=ta(gk,"url");if(null==gk.url)throw Error("'url' cannot be null.");if(!(gk.body instanceof ArrayBuffer||"string"==typeof gk.body||null==gk.body))throw new TypeError("'body' must be an ArrayBuffer, a string, or null.");gk.method=ta(gk,"method");if("GET"!=gk.method&&"POST"!=gk.method)throw Error("'method' must be either 'GET' or 'POST'.");gk.headers=va(gk,"headers",Object);if(null==gk.headers)throw Error("'headers' cannot be null.");return gk;}function ji(ek,fk,gk,hk,ik){ub.call(this,ek);this.c=fk;this.a=new xc(gk,hk,ik);this.G=0;this.v=this.B=this.b=null;this.C=false;this.g=null;this.o=false;this.j=null;this.i=false;this.h=new ga();this.l=this.f=false;this.D=0;this.u=15;this.w=false;}m(ji,ub);ji.prototype.A=function(ek){null!=ek.initialStreamBufferSize&&(this.D=Number(ek.initialStreamBufferSize));null!=ek.streamBufferSize&&(this.u=Number(ek.streamBufferSize));null!=ek.segmentRequestTimeout&&(this.a.o=Number(ek.segmentRequestTimeout));};ji.prototype.destroy=function(){qi(this);this.h.destroy();this.b=this.h=null;this.a.destroy();this.s=this.c=this.a=null;};j=ji.prototype;j.ma=function(){return this.b;};j.za=function(){return this.B;};j.Fa=function(ek){this.f||ek.then(function(){this.f=true;this.g||pi(this,0);}.bind(this)).catch(function(){});return this.h;};j.Aa=function(){return this.l;};j.oa=function(ek,fk,gk){ek!=this.b&&(this.v=ek.L.create(),ek.F.create().then(wa(this,function(hk){if(this.c){var ik=this.b;this.b=ek;this.B=hk;this.C=true;this.o||(ik?fk&&ki(this,true,gk):pi(this,0));}})).catch(wa(this,function(hk){"aborted"!=hk.type&&(this.f?(hk=fa(hk),this.dispatchEvent(hk)):this.h.reject(hk));})));};j.Ca=function(){return ki(this,false);};function ki(ek,fk,gk){ek.b&&!ek.o&&(ek.o=true,qi(ek),ed(ek.a).then(wa(ek,function(){var hk=this.c.currentTime;if(!fk&&0<zc(this.a,hk)&&0<=tg(this.a.b,hk))return Promise.resolve();if(gk)return dd(this.a,this.c.currentTime+gk);this.w=true;return cd(this.a);})).then(wa(ek,function(){this.o=false;pi(this,0);})).catch(wa(ek,function(hk){this.o=false;this.f?(hk=fa(hk),this.dispatchEvent(hk)):this.h.reject(hk);})));}j.Da=function(ek){return 0<zc(this.a,ek)&&0<=tg(this.a.b,ek);};j.na=function(){};j.ta=function(){return true;};j.va=function(){return this.i?this.u:Math.min(this.D,this.u);};j.Va=function(){if(this.i&&!this.f){this.g=null;}else{var ek;if(ek=this.f&&!this.l)ek=1<this.a.c.buffered.length?true:false;if(ek){ki(this,true);}else{this.g=null;ek=this.b;var fk=this.B,gk=this.c.currentTime;zc(this.a,this.i?gk:gk+(this.j||0))>=this.va()?(mi(this),pi(this,1000/(5*(Math.abs(this.c.playbackRate)||1)))):(fk=li(this,gk,fk))?(fk=bd(this.a,fk,ek.h,this.v),this.v=null,this.C&&(this.C=false,ni(this,ek)),this.l=false,fk.then(wa(this,function(hk){var ik=hk.pa;hk=hk.Ja;this.i||(this.G=hk);null==this.j&&(this.j=ik);this.w&&0<zc(this.a,gk)&&(this.w=false,this.c.currentTime+=.001);pi(this,0);})).catch(wa(this,function(hk){if("aborted"!=hk.type){var ik=[0,404,410];"net"==hk.type&&-1!=ik.indexOf(hk.hb.status)&&this.b&&pi(this,1000);hk=fa(hk);this.dispatchEvent(hk);}}))):(mi(this),this.f&&!this.l&&(this.l=true,oi(this)),pi(this,200));}}};function li(ek,fk,gk){ek=ek.a;var hk=ek.b.length;ek=0<hk?ek.b[hk-1]:null;return null!=ek?null!=ek.a?bh(gk,ek.a):null:bh(gk,fk)||(gk.length()?ah(gk):null);}function mi(ek){if(!ek.i&&null!=ek.j){ek.i=true;var fk=ek.a,gk=ek.j,hk=gk-fk.s;0!=hk&&(fk.b=ug(fk.b,hk),fk.s=gk);ek.h.resolve(ek.j);}}function ni(ek,fk){var gk;gk=fk.c.split("/")[0];gk=ea({type:"adaptation",bubbles:true,contentType:gk,size:"video"!=gk?null:{width:fk.width,height:fk.height},bandwidth:fk.bandwidth});ek.dispatchEvent(gk);}function oi(ek){var fk=ea({type:"ended"});ek.dispatchEvent(fk);}function pi(ek,fk){ek.g=i.setTimeout(ek.Va.bind(ek),fk);}function qi(ek){null!=ek.g&&(i.clearTimeout(ek.g),ek.g=null);}j.ua=function(){return this.G;};function ri(){this.streamStats=null;this.droppedFrames=this.decodedFrames=NaN;this.bufferingTime=this.playTime=this.estimatedBandwidth=0;this.playbackLatency=NaN;this.bufferingHistory=[];this.bandwidthHistory=[];this.streamHistory=[];}function si(ek,fk){var gk=new ti(fk);ek.streamHistory.push(new ui(gk));if(gk.videoHeight||!ek.streamStats)ek.streamStats=gk;}function ti(ek){this.videoWidth=ek.width;this.videoHeight=ek.height;this.videoMimeType=ek.c;this.videoBandwidth=ek.bandwidth;}function ui(ek){this.timestamp=(Date.now()+qa)/1000;this.value=ek;}function vi(ek){ub.call(this,null);this.a=ek;this.b=null;this.f=new fc();this.j=this.l=null;this.A=0;this.v=null;this.i=false;this.C=true;this.g=new ri();this.c={enableAdaptation:true,streamBufferSize:15,licenseRequestTimeout:0,mpdRequestTimeout:0,segmentRequestTimeout:0,preferredLanguage:"en",restrictions:new xd()};this.o=1;this.B=null;}m(vi,ub);l("shaka.player.Player",vi);vi.version="";vi.isBrowserSupported=function(){return !!i.MediaSource&&!!i.Promise&&!!Element.prototype.requestFullscreen&&!!document.exitFullscreen&&"fullscreenElement" in document&&!!i.Uint8Array;};vi.prototype.da=function(ek){this.C=ek;};vi.prototype.setResumeAfterBuffering=vi.prototype.da;function wi(ek){return "text/vtt"==ek?!!i.VTTCue:MediaSource.isTypeSupported(ek);}vi.isTypeSupported=wi;vi.setTextStyle=function(ek){var fk=document.getElementById("ShakaPlayerTextStyle");fk||(fk=document.createElement("style"),fk.id="ShakaPlayerTextStyle",document.head.appendChild(fk));for(fk=fk.sheet;fk.cssRules.length;)fk.deleteRule(0);fk.insertRule("::cue { "+jd(ek)+" }",0);};vi.prototype.destroy=function(){return this.u().then(wa(this,function(){this.f.destroy();this.a=this.f=null;})).catch(function(){});};vi.prototype.destroy=vi.prototype.destroy;vi.prototype.u=function(){if(!this.b)return Promise.resolve();this.i&&bj(this);this.a.pause();hc(this.f);aj(this);yi(this);this.l&&(this.l.destroy(),this.l=null);this.a.src="";var ek=this.a.setMediaKeys(null);this.b&&(this.b.destroy(),this.b=null);this.i=false;this.g=new ri();return ek;};vi.prototype.unload=vi.prototype.u;vi.prototype.ka=function(ek){hj(ek,this.a);var fk=this.u();this.a.autoplay&&(o("load"),gc(this.f,this.a,"timeupdate",this.La.bind(this)));ek.ka(this.c);ek.G=this.B;this.B=null;fk=fk.then(wa(this,function(){return ek.Z();}));fk.catch(wa(this,function(gk){ek.destroy();return Promise.reject(gk);}));return fk.then(wa(this,function(){if(!this.a)return xi();this.b=ek;gc(this.f,this.b,"seekrangechanged",this.Qa.bind(this));this.l=new di(this,this.a,this.b);return this.l.initialize();})).then(wa(this,function(){if(!this.a)return xi();gc(this.f,this.a,"error",this.cb.bind(this));gc(this.f,this.a,"playing",this.Pa.bind(this));gc(this.f,this.a,"pause",this.Oa.bind(this));return ij(this.b,this,this.a);})).then(wa(this,function(){if(!this.a)return xi();zi(this);})).catch(wa(this,function(gk){if(!this.a)return xi();if("destroy"!=gk.type){var hk=fa(gk);this.dispatchEvent(hk);}return this.u().then(function(){return Promise.reject(gk);});}));};vi.prototype.load=vi.prototype.ka;function xi(){var ek=Error("Player destroyed");ek.type="destroy";return Promise.reject(ek);}j=vi.prototype;j.La=function(){p("load");this.g.playbackLatency=q("load")/1000;this.f.ba(this.a,"timeupdate");};j.cb=function(){if(this.a.error){var ek=this.a.error.code;ek!=MediaError.MEDIA_ERR_ABORTED&&(ek=Error(cj[ek]||"Unknown playback error."),ek.type="playback",ek=fa(ek),this.dispatchEvent(ek));}};j.Pa=function(){o("playing");!this.j&&0>this.o&&(this.a.playbackRate=0,this.w(this.a.currentTime,Date.now(),this.o));this.i&&bj(this);};j.Oa=function(){p("playing");var ek=q("playing");if(!isNaN(ek)){var fk=this.g;fk.playTime+=ek/1000;}yi(this);};j.Qa=function(ek){this.A=ek.start;};j.Ea=function(){if(!this.a.paused){p("playing");var ek=q("playing");if(!isNaN(ek)){var fk=this.g;fk.playTime+=ek/1000;o("playing");}}ek=this.g;fk=this.a;fk.getVideoPlaybackQuality&&(fk=fk.getVideoPlaybackQuality(),ek.decodedFrames=fk.totalVideoFrames,ek.droppedFrames=fk.droppedVideoFrames);return this.g;};vi.prototype.getStats=vi.prototype.Ea;vi.prototype.ja=function(){return this.b?this.b.D():[];};vi.prototype.getVideoTracks=vi.prototype.ja;vi.prototype.ga=function(){return this.b?this.b.S():[];};vi.prototype.getAudioTracks=vi.prototype.ga;vi.prototype.ia=function(){return this.b?this.b.la():[];};vi.prototype.getTextTracks=vi.prototype.ia;vi.prototype.selectVideoTrack=function(ek,fk){return this.b?this.b.selectVideoTrack(ek,void 0==fk?true:fk):false;};vi.prototype.selectVideoTrack=vi.prototype.selectVideoTrack;vi.prototype.la=function(ek,fk){return this.b?oj(this.b,"audio",ek,void 0==fk?true:fk):false;};vi.prototype.selectAudioTrack=vi.prototype.la;vi.prototype.ca=function(ek){return this.b?oj(this.b,"text",ek,false):false;};vi.prototype.selectTextTrack=vi.prototype.ca;vi.prototype.fa=function(ek){this.b&&kj(this.b,ek);};vi.prototype.enableTextTrack=vi.prototype.fa;vi.prototype.G=function(ek){this.h({enableAdaptation:ek});};vi.prototype.enableAdaptation=vi.prototype.G;vi.prototype.M=function(){return this.c.enableAdaptation;};vi.prototype.getAdaptationEnabled=vi.prototype.M;vi.prototype.ea=function(ek){this.h({streamBufferSize:ek});};vi.prototype.setStreamBufferSize=vi.prototype.ea;vi.prototype.S=function(){return Number(this.c.streamBufferSize);};vi.prototype.getStreamBufferSize=vi.prototype.S;vi.prototype.ra=function(ek){this.h({licenseRequestTimeout:ek/1000});};vi.prototype.setLicenseRequestTimeout=vi.prototype.ra;vi.prototype.U=function(ek){this.h({mpdRequestTimeout:ek/1000});};vi.prototype.setMpdRequestTimeout=vi.prototype.U;vi.prototype.$=function(ek){this.h({segmentRequestTimeout:ek/1000});};vi.prototype.setRangeRequestTimeout=vi.prototype.$;vi.prototype.Z=function(ek){this.h({preferredLanguage:ek});};vi.prototype.setPreferredLanguage=vi.prototype.Z;vi.prototype.Y=function(ek){yi(this);0<=ek?this.a.playbackRate=ek:this.a.paused||(this.a.playbackRate=0,this.w(this.a.currentTime,Date.now(),ek));this.o=ek;};vi.prototype.setPlaybackRate=vi.prototype.Y;vi.prototype.P=function(){return this.o;};vi.prototype.getPlaybackRate=vi.prototype.P;vi.prototype.aa=function(ek){this.h({restrictions:ek});};vi.prototype.setRestrictions=vi.prototype.aa;vi.prototype.R=function(){return this.c.restrictions.clone();};vi.prototype.getRestrictions=vi.prototype.R;vi.prototype.sa=function(ek){this.B=ek;};vi.prototype.setPlaybackStartTime=vi.prototype.sa;vi.prototype.D=function(){var ek;this.b?(ek=this.b,ek=ek.a?ek.a.b:false):ek=false;return ek;};vi.prototype.isLive=vi.prototype.D;vi.prototype.h=function(ek){if(ek){var fk=ua(ek,"enableAdaptation","boolean");null!=fk&&(this.c.enableAdaptation=fk);fk=sa(ek,"streamBufferSize");null!=fk&&(this.c.streamBufferSize=fk);fk=sa(ek,"licenseRequestTimeout");null!=fk&&(this.c.licenseRequestTimeout=fk);fk=sa(ek,"mpdRequestTimeout");null!=fk&&(this.c.mpdRequestTimeout=fk);fk=sa(ek,"segmentRequestTimeout");null!=fk&&(this.c.segmentRequestTimeout=fk);fk=ta(ek,"preferredLanguage");null!=fk&&(this.c.preferredLanguage=fk);ek=va(ek,"restrictions",xd);null!=ek&&(this.c.restrictions=ek.clone());this.b&&this.b.ka(this.c);}};vi.prototype.configure=vi.prototype.h;vi.prototype.ha=function(){return this.c;};vi.prototype.getConfiguration=vi.prototype.ha;function yi(ek){ek.j&&(i.clearTimeout(ek.j),ek.j=null);}function zi(ek){aj(ek);ek.v=i.setTimeout(ek.T.bind(ek),100);}function aj(ek){ek.v&&(i.clearTimeout(ek.v),ek.v=null);}vi.prototype.w=function(ek,fk,gk){this.j=null;var hk=(Date.now()-fk)/1000*gk;this.a.currentTime<this.A+(this.D()?1:.05)?this.a.pause():(hk=Math.max(this.A,ek+hk),this.a.currentTime=hk,this.j=i.setTimeout(this.w.bind(this,ek,fk,gk),250));};function bj(ek){p("buffering");var fk=ek.g;fk.bufferingTime+=q("buffering")/1000;ek.i=false;ek.dispatchEvent(ea({type:"bufferingEnd"}));}vi.prototype.T=function(){zi(this);if(!this.a.ended&&!this.a.seeking){var ek=this.a.buffered,fk=ek.length?ek.end(ek.length-1):0,ek=Math.max(fk-this.a.currentTime,0),gk=this.a.duration,hk=this.a.currentTime;if(this.i){var ik,fk=this.b,jk=null;for(ik in fk.c){var kk=fk.c[ik].va();0<kk&&(jk=null!=jk?Math.min(jk,kk):kk);}ik=jk||0;gk=Math.max(gk-hk-.05,0);if(ek>ik||ek>gk)bj(this),this.C&&this.a.play();}else gk=isNaN(gk)?0:Math.max(gk-.05,0),!(this.a.paused||fk>=gk||hk>=gk)&&.2>ek&&(this.i=true,this.a.pause(),this.g.bufferingHistory.push((Date.now()+qa)/1000),o("buffering"),this.dispatchEvent(ea({type:"bufferingStart"})));}};var cj={2:"A network failure occured while loading media content.",3:"The browser failed to decode the media content.",4:"The browser does not support the media content."};function dj(ek,fk){var gk=ek.bandwidth||Number.MAX_VALUE,hk=fk.bandwidth||Number.MAX_VALUE;return gk<hk?-1:gk>hk?1:0;}function ej(){this.a=this.b=null;this.f=new fc();this.c=Number.POSITIVE_INFINITY;this.i=true;this.g=false;}l("shaka.media.SimpleAbrManager",ej);ej.prototype.destroy=function(){this.f.destroy();this.a=this.b=this.f=null;};ej.prototype.initialize=function(ek,fk){this.b||this.a||(this.b=ek,this.a=fk);};ej.prototype.start=function(){this.b&&this.a&&!this.g&&(this.c=Date.now()+4000,gc(this.f,this.b,"bandwidth",this.l.bind(this)),gc(this.f,this.a,"adaptation",this.j.bind(this)),gc(this.f,this.a,"trackschanged",this.h.bind(this)),this.g=true);};ej.prototype.enable=function(ek){this.i=ek;};ej.prototype.getInitialVideoTrackId=function(){if(!this.b||!this.a)return null;var ek=fj(this);return ek?ek.id:null;};ej.prototype.getInitialAudioTrackId=function(){return null;};ej.prototype.selectVideoTrack=function(ek,fk,gk){this.g&&this.a.selectVideoTrack(ek.id,fk,gk);};ej.prototype.l=function(){Date.now()<this.c||this.h();};ej.prototype.h=function(){if(this.i){var ek=fj(this);if(ek){if(ek.active){this.c=Date.now()+3000;return;}this.selectVideoTrack(ek,false);}this.c=Number.POSITIVE_INFINITY;}};ej.prototype.j=function(){this.c==Number.POSITIVE_INFINITY&&(this.c=Date.now()+30000);};function fj(ek){var fk=ek.a.D();if(0==fk.length)return null;fk.sort(rd);var gk;ek:{gk=ek.a.S();for(var hk=0;hk<gk.length;++hk)if(gk[hk].active){gk=gk[hk];break ek;}gk=null;};gk=gk?gk.bandwidth:0;ek=ek.b.getBandwidth();for(var hk=fk[0],ik=0;ik<fk.length;++ik){var jk=fk[ik],kk=ik+1<fk.length?fk[ik+1]:{bandwidth:Number.POSITIVE_INFINITY};if(jk.bandwidth&&(kk=(kk.bandwidth+gk)/.85,ek>=(jk.bandwidth+gk)/.95&&ek<=kk&&(hk=jk,hk.active)))break;}return hk;}function gj(ek,fk,gk){ub.call(this,null);this.a=ek;this.T=fk;this.l=new fc();this.g=new MediaSource();this.f=null;this.ga=this.$=0;this.b=new qb();this.i=gk;this.i.initialize(fk,this);this.w=false;this.v="en";this.U=false;this.A=null;this.j=new ga();this.ca=new ga();this.h=new xd();this.o=null;this.ha=1;this.c={};this.P=new ga();this.B=0;this.da=false;this.u={};this.G=this.C=this.aa=null;this.M={};}m(gj,ub);l("shaka.player.StreamVideoSource",gj);gj.prototype.ka=function(ek){null!=ek.streamBufferSize&&(this.M.streamBufferSize=ek.streamBufferSize);null!=ek.segmentRequestTimeout&&(this.M.segmentRequestTimeout=ek.segmentRequestTimeout);ck(this);null!=ek.enableAdaptation&&this.i.enable(Boolean(ek.enableAdaptation));null!=ek.mpdRequestTimeout&&(this.ga=Number(ek.mpdRequestTimeout));null!=ek.preferredLanguage&&(this.v=kb(String(ek.preferredLanguage)));null!=ek.restrictions&&(this.h=ek.restrictions,this.w&&lj(this));};gj.prototype.destroy=function(){this.j.destroy();this.P.destroy();this.P=this.j=null;this.C&&(i.clearTimeout(this.C),this.C=null);this.aa&&(i.clearTimeout(this.aa),this.aa=null);this.u=null;this.l.destroy();this.l=null;ra(this.c).forEach(function(ek){ek.destroy();});this.b=this.c=null;this.a&&(this.a.destroy(),this.a=null);this.i.destroy();this.s=this.h=this.A=this.f=this.g=this.T=this.i=null;};function hj(ek,fk){gc(ek.l,ek.g,"sourceopen",ek.Na.bind(ek));fk.src=i.URL.createObjectURL(ek.g);}function ij(ek,fk,gk){if(!ek.w)return ek=Error("Cannot call attach() right now."),ek.type="stream",Promise.reject(ek);ek.s=fk;ek.f=gk;ek.A=fk.Ea();gc(ek.l,ek.T,"bandwidth",ek.eb.bind(ek));fk=ek.f.setMediaKeys(ek.f.mediaKeys);ek.ca.then(wa(ek,function(){qj(this).then(wa(this,function(){this.j&&this.j.resolve();})).catch(wa(this,function(hk){this.j&&this.j.reject(hk);}));}));return Promise.all([ek.j,fk]);}gj.prototype.Z=function(){if(this.w){var ek=Error("Cannot call load() right now.");ek.type="stream";return Promise.reject(ek);}if(!this.a||0==this.a.a.length)return ek=Error("The manifest does not specify any content."),ek.type="stream",Promise.reject(ek);if(this.a.b)return ek=Error("Live manifest support not enabled."),ek.type="stream",Promise.reject(ek);for(var ek=this.a.a,fk=0;fk<ek.length;++fk)for(var gk=ek[fk],hk=0;hk<gk.a.length;++hk){for(var ik=gk.a[hk],jk=ik,kk=0;kk<jk.a.length;++kk)wi(kh(jk.a[kk]))||(jk.a.splice(kk,1),--kk);0==ik.a.length&&(gk.a.splice(hk,1),--hk);}for(fk=0;fk<ek.length;++fk)for(gk=ek[fk],hk=0;hk<gk.a.length;++hk)gk.a[hk].a.sort(dj);if(0==this.a.a.length||0==this.a.a[0].a.length)return ek=Error("The manifest specifies content that cannot be displayed on this browser/platform."),ek.type="stream",Promise.reject(ek);this.w=true;this.M.initialStreamBufferSize=this.a.c;ck(this);lj(this);return Promise.resolve();};gj.prototype.D=function(){if(!this.b.a.hasOwnProperty("video"))return [];for(var ek=this.c.video,ek=(ek=ek?ek.ma():null)?ek.b:0,fk=[],gk=this.b.get("video"),hk=0;hk<gk.length;++hk)for(var ik=gk[hk],jk=0;jk<ik.a.length;++jk){var kk=ik.a[jk];if(kk.J&&kk.a){var lk=kk.b,kk=new qd(lk,kk.bandwidth,kk.width,kk.height,kk.id);lk==ek&&(kk.active=true);fk.push(kk);}}return fk;};gj.prototype.getVideoTracks=gj.prototype.D;gj.prototype.S=function(){if(!this.b.a.hasOwnProperty("audio"))return [];for(var ek=this.c.audio,ek=(ek=ek?ek.ma():null)?ek.b:0,fk=[],gk=this.b.get("audio"),hk=0;hk<gk.length;++hk)for(var ik=gk[hk],jk=ik.lang,kk=0;kk<ik.a.length;++kk){var lk=ik.a[kk];if(lk.J&&lk.a){var mk=lk.b,lk=new pd(mk,lk.bandwidth,jk,lk.id);mk==ek&&(lk.active=true);fk.push(lk);}}return fk;};gj.prototype.getAudioTracks=gj.prototype.S;gj.prototype.la=function(){if(!this.b.a.hasOwnProperty("text"))return [];for(var ek=this.c.text,fk=ek?ek.ma():null,fk=fk?fk.b:0,gk=[],hk=this.b.get("text"),ik=0;ik<hk.length;++ik)for(var jk=hk[ik],kk=jk.lang,lk=0;lk<jk.a.length;++lk){var mk=jk.a[lk].b,nk=new wc(mk,kk);mk==fk&&(nk.active=true,nk.enabled=ek.ta());gk.push(nk);}return gk;};gj.prototype.getTextTracks=gj.prototype.la;function jj(ek,fk){if(ek.w){for(var gk={},hk=ek.a.a[0],ik=0;ik<hk.a.length;++ik){var jk=hk.a[ik];gk[jk.b]=jk;}ek.b.a={};hk=tb(fk);for(ik=0;ik<hk.length;++ik){var jk=hk[ik],kk=fk.get(jk);if("video"==jk){var lk=kk[0].id;ek.b.push(jk,gk[lk]);}else if("audio"==jk){for(var lk=kk[0].b.split(";")[0],mk=0;mk<kk.length;++mk){var nk=kk[mk];nk.b.split(";")[0]==lk&&ek.b.push(jk,gk[nk.id]);}}else for(mk=0;mk<kk.length;++mk)lk=kk[mk].id,ek.b.push(jk,gk[lk]);}ek.U=true;if(gk=ek.b.get("audio"))pj(ek,gk),ek.b.a.audio=gk,gk=gk[0].lang||ek.v,hb(2,ek.v,gk)&&(ek.U=false);if(gk=ek.b.get("text"))pj(ek,gk),ek.b.a.text=gk,gk=gk[0].lang||ek.v,hb(2,ek.v,gk)||(ek.U=false);}}gj.prototype.selectVideoTrack=function(ek,fk,gk){return oj(this,"video",ek,fk,gk);};function kj(ek,fk){var gk=ek.c.text;gk&&gk.na(fk);}function lj(ek){if(ek.h){for(var fk=false,gk=0;gk<ek.a.a.length;++gk)for(var hk=ek.a.a[gk],ik=0;ik<hk.a.length;++ik){var jk=hk.a[ik];if("video"==jk.contentType)for(var kk=0;kk<jk.a.length;++kk){var lk=jk.a[kk],mk=lk.a;lk.a=true;ek.h.maxWidth&&lk.width>ek.h.maxWidth&&(lk.a=false);ek.h.maxHeight&&lk.height>ek.h.maxHeight&&(lk.a=false);ek.h.maxBandwidth&&lk.bandwidth>ek.h.maxBandwidth&&(lk.a=false);ek.h.minBandwidth&&lk.bandwidth<ek.h.minBandwidth&&(lk.a=false);mk!=lk.a&&(fk=true);}}0!=rb(ek.b).length&&fk&&(nj(ek),0<ek.D().length||(fk=Error("The applicaion has restricted all video tracks!"),fk.type="stream",fk=fa(fk),ek.dispatchEvent(fk)));}}function mj(ek,fk){for(var gk,hk=false,ik=new qb(),jk=rb(ek.b),kk=0;kk<jk.length;++kk)for(var lk=jk[kk],mk=0;mk<lk.a.length;++mk){var nk=lk.a[mk];nk.g.forEach(function(ok){ik.push(ok,nk);});}for(gk in fk)if(jk=pa[fk[gk]]||null,lk=ik.get(gk)){for(kk=0;kk<lk.length;++kk)nk=lk[kk],mk=nk.J,nk.J=!jk,mk!=nk.J&&(hk=true);}else ya(gk);hk&&(nj(ek),hk=ek.S(),gk=ek.D(),hk=ek.b.a.hasOwnProperty("audio")&&0==hk.length,gk=ek.b.a.hasOwnProperty("video")&&0==gk.length,hk||gk)&&(gk=Error("The key system has restricted all "+(hk&&gk?"audio and video tracks.":hk?"audio tracks.":"video tracks.")),gk.type="drm",gk=fa(gk),ek.dispatchEvent(gk));}function nj(ek){var fk=ea({type:"trackschanged",bubbles:true});ek.dispatchEvent(fk);}function oj(ek,fk,gk,hk,ik){if(!ek.b.a.hasOwnProperty(fk)||!ek.c[fk])return false;for(var jk=ek.b.get(fk),kk=0;kk<jk.length;++kk)for(var lk=jk[kk],mk=0;mk<lk.a.length;++mk){var nk=lk.a[mk];if(nk.b==gk){if(!nk.J||!nk.a)return false;if("text"!=fk&&!ek.da)return gk=ek.u[fk],ek.u[fk]={Ga:nk,xa:null!=gk&&gk.xa||hk,ya:null!=gk&&gk.ya||ik},true;si(ek.A,nk);ek.c[fk].oa(nk,hk,ik);return true;}}return false;}function pj(ek,fk){for(var gk=0;2>=gk;++gk)for(var hk=0;hk<fk.length;++hk){var ik=fk[hk];if(hb(gk,ek.v,ik.lang)){fk.splice(hk,1);fk.splice(0,0,ik);return;}}for(hk=0;hk<fk.length;++hk)if(ik=fk[hk],ik.f){fk.splice(hk,1);fk.splice(0,0,ik);break;}}j=gj.prototype;j.Na=function(){this.l.ba(this.g,"sourceopen");this.ca.resolve();};function qj(ek){for(var fk=[],gk=["audio","video","text"],hk=0;hk<gk.length;++hk){var ik=gk[hk];ek.b.a.hasOwnProperty(ik)&&fk.push(ek.b.get(ik)[0]);}for(var jk=rj(ek,fk),hk=0;hk<gk.length;++hk)if(ik=gk[hk],ek.b.a.hasOwnProperty(ik)&&!jk[ik])return ek=Error("Unable to select an initial "+ik+" stream: all "+ik+" streams have been restricted (by the application or by the key system)."),ek.type="stream",Promise.reject(ek);fk=ra(jk).map(function(kk){return kk.F.create();});return Promise.all(fk).then(wa(ek,function(kk){if(!kk.every(function(lk){return lk.length();}))return kk=Error("Some streams are not available."),kk.type="stream",Promise.reject(kk);kk=ak(this,kk);if(!kk)return kk=Error("Some streams are not available."),kk.type="stream",Promise.reject(kk);if(!sj(this,jk))return kk=Error("Failed to create Stream objects."),kk.type="stream",Promise.reject(kk);this.i.start();uj(this,jk,kk);return Promise.resolve();})).catch(wa(ek,function(kk){if("aborted"!=kk.type)return Object.keys(this.c),this.a.b?(this.jb(),Promise.resolve()):Promise.reject(kk);}));}function rj(ek,fk){for(var gk={},hk=0;hk<fk.length;++hk){var ik=fk[hk],jk=null;if("video"==ik.contentType){var kk=ek.i.getInitialVideoTrackId();if(null==kk)continue;jk=ik.a.filter(function(lk){return lk.b==kk;});if(0==jk.length)continue;jk=jk[0];}else if("audio"==ik.contentType){if(kk=ek.i.getInitialAudioTrackId(),jk=ik.a.filter(function(lk){return lk.b==kk;}),0==jk.length){jk=ik.a.filter(function(lk){return lk.J&&lk.a;});if(0==jk.length)continue;jk=ik.a[Math.floor(jk.length/2)];}else jk=jk[0];}else 0<ik.a.length&&(jk=ik.a[0]);gk[ik.contentType]=jk;}return gk;}function sj(ek,fk){var gk={},hk;for(hk in fk){var ik=fk[hk],ik="text"==hk?new ci(ek,ek.f):tj(ek,ik);if(!ik)return ra(gk).forEach(function(jk){jk.destroy();}),false;gk[hk]=ik;}ek.c=gk;return true;}function tj(ek,fk){var gk=new ji(ek,ek.f,ek.g,kh(fk),ek.T);gk.A(ek.M);return gk;}function uj(ek,fk,gk){ek.ha=ek.f.playbackRate;ek.f.playbackRate=0;wj(ek,gk);var hk;hk=ek.a.b?gk.end:ek.G&&ek.G<=gk.end&&ek.G>=gk.start?ek.G:gk.start;gc(ek.l,ek.f,"seeking",ek.Ra.bind(ek));ek.f.currentTime!=hk&&(ek.f.currentTime=hk,ek.o=hk);xj(ek,gk.start,gk.end);var ik=[],jk;for(jk in ek.c)gk=ek.c[jk],wa(ek,function(kk){ik.push(kk.Fa(this.P).then(wa(this,function(lk){var mk=kk.ua();mk>this.$&&(this.$=mk);return lk;})));})(gk),gc(ek.l,gk,"ended",ek.Ta.bind(ek)),hk=fk[jk],si(ek.A,hk),gk.oa(hk,false);Promise.all(ik).then(ek.Ka.bind(ek)).catch(wa(ek,function(kk){"destroy"!=kk.type&&(kk=fa(kk),this.dispatchEvent(kk));}));kj(ek,ek.U);}j.Ka=function(ek){t(ek&&ek.length==Object.keys(this.c).length);for(var fk=Number.POSITIVE_INFINITY,gk=Number.NEGATIVE_INFINITY,hk=0;hk<ek.length;++hk)var ik=ek[hk],fk=Math.min(fk,ik),gk=Math.max(gk,ik);ek=zj(this);for(hk=0;hk<ek.length;++hk)ch(ek[hk],gk);vj(this,ek,gk);hk=rb(this.b).map(function(jk){return jk.a;}).reduce(function(jk,kk){return jk.concat(kk);},[]).map(function(jk){var kk=[jk.F.create()];jk.L&&kk.push(jk.L.create());return Promise.all(kk);});Promise.all(hk).then(wa(this,function(jk){for(var kk=0;kk<jk.length;++kk)ch(jk[kk][0],gk);this.da=true;for(var lk in this.u)jk=this.u[lk],kk=this.c[lk],si(this.A,jk.Ga),kk.oa(jk.Ga,jk.xa,jk.ya);this.u={};})).catch(wa(this,function(jk){"aborted"!=jk.type&&(jk=fa(jk),this.dispatchEvent(jk));}));};function vj(ek,fk,gk){if(fk=ak(ek,fk))wj(ek,fk),xj(ek,fk.start,fk.end);0!=gk?(gk=ek.f.currentTime+gk,ek.f.currentTime=gk,ek.o=gk):gk=ek.f.currentTime;ek.a.b&&fk&&(ek.B=fk.end-gk,ek.B=Math.max(ek.B,0));ek.f.playbackRate=ek.ha;ek.a.b&&null!=ek.a.f&&ek.kb(ek.B);bk(ek);ek.P.resolve();}function wj(ek,fk){if(ek.a.b){isNaN(ek.g.duration)&&(ek.g.duration=fk.end+2592000);}else if(isNaN(ek.g.duration)||fk.end>ek.g.duration){ek.g.duration=fk.end;for(var gk=0;gk<ek.g.sourceBuffers.length;++gk)ek.g.sourceBuffers[gk].appendWindowEnd=fk.end;}}j.Ua=function(){this.C=null;bk(this);var ek=ak(this,zj(this));ek&&(xj(this,ek.start,ek.end),this.f.paused||yj(this,this.f.currentTime,ek.start,ek.end));};function xj(ek,fk,gk){fk=ea({type:"seekrangechanged",bubbles:true,start:fk,end:gk});ek.dispatchEvent(fk);}j.Ra=function(){var ek=this.f.currentTime;if(null!=this.o){if(ek>=this.o-.01&&ek<=this.o+.01){this.o=null;return;}this.o=null;}var fk=ak(this,zj(this));if(fk){var gk=fk.end;(fk=yj(this,ek,fk.start,gk))||(ek<=gk+.01?fk=false:(this.f.currentTime=gk,fk=true));if(!fk)for(var hk in this.c)this.c[hk].Ca();}};function yj(ek,fk,gk,hk){if(fk>=gk-.01)return false;fk=0;if(ek.a.b){fk=.5;for(var ik in ek.c)if(!ek.c[ik].Da(gk+fk)){fk=ek.a.c;break;}}ek.f.currentTime=Math.min(gk+fk,hk);return true;}j.Ta=function(){if(!this.a.b){for(var ek in this.c)if(!this.c[ek].Aa())return;this.g.endOfStream();}};j.eb=function(){var ek=this.A,fk=this.T.getBandwidth();ek.estimatedBandwidth=fk;ek.bandwidthHistory.push(new ui(fk));};function zj(ek){return ra(ek.c).map(function(fk){return fk.za();}).filter(function(fk){return null!=fk;});}function ak(ek,fk){for(var gk=0,hk=Number.POSITIVE_INFINITY,ik=0;ik<fk.length;++ik){var jk;jk=fk[ik];jk=0<jk.length()?{start:zg(jk).b,end:ah(jk).a}:{start:0,end:0};gk=Math.max(gk,jk.start);null!=jk.end&&(hk=Math.min(hk,jk.end));}if(hk==Number.POSITIVE_INFINITY)if(hk=ek.a.a[0],hk.b){hk=(hk.start||0)+hk.b;}else return null;ek.a.b&&(hk=Math.max(hk-(ek.a.c+ek.B),gk));if(gk>hk)return null;hk=Math.floor(100000*hk)/100000;return {start:gk,end:hk};}function bk(ek){ek.a.b&&(ek.C=i.setTimeout(ek.Ua.bind(ek),1000));}function ck(ek){for(var fk in ek.c)ek.c[fk].A(ek.M);}j.ua=function(){return this.$;};gj.prototype.getLongestInitResponseTime=gj.prototype.ua;function dk(ek,fk,gk,hk){gk||(gk=new wb());hk||(hk=new ej());gj.call(this,null,gk,hk);"string"===typeof ek?this.ra=ek:this.ja=ek;this.ia=fk;this.Y=[];this.ea=[];this.fa=[];this.R=null;}m(dk,gj);l("shaka.player.DashVideoSource",dk);dk.prototype.sa=function(ek,fk,gk){this.Y.push(ek);this.ea.push(fk||"");this.fa.push(gk||"");};dk.prototype.addExternalCaptions=dk.prototype.sa;dk.prototype.Ha=function(ek){this.R=ek;};dk.prototype.setNetworkCallback=dk.prototype.Ha;dk.prototype.destroy=function(){this.R=this.ia=null;gj.prototype.destroy.call(this);};dk.prototype.Z=function(){var ek=wa(this,function(gk){for(var hk=0;hk<this.Y.length;hk++){var ik=gk,jk=this.Y[hk],kk=this.ea[hk],lk=this.fa[hk];if(0!==ik.a.length){var mk=new qe();mk.contentType="text";mk.lang=kk||"en";mk.c=true;kk=new te();kk.bandwidth=0;kk.f=lk||"text/vtt";kk.m=[new zd(jk)];mk.a.push(kk);ik.a[0].b.push(mk);hf(ik.a[0]);}}if("dynamic"==gk.type)return gk=Error("Live manifest support not enabled."),gk.type="stream",Promise.reject(gk);hk=new rh(this.ia);ik=this.R;jk=(Date.now()+qa)/1000;for(lk=0;lk<gk.a.length;++lk)for(mk=gk.a[lk],kk=0;kk<mk.b.length;++kk){var nk=mk.b[kk];if("text"!=nk.contentType)for(var ok=0;ok<nk.a.length;++ok){var pk=nk.a[ok],qk=0,qk=qk+(pk.g?1:0),qk=qk+(pk.b?1:0),qk=qk+(pk.a?1:0);0==qk?(nk.a.splice(ok,1),--ok):1!=qk&&(pk.g?(pk.b=null,pk.a=null):pk.b&&(pk.a=null));}}sh(gk);for(lk=0;lk<gk.a.length;++lk)for(mk=gk.a[lk],kk=0;kk<mk.b.length;++kk){ok=nk=mk.b[kk];pk=null;for(qk=0;qk<ok.a.length;++qk){var rk=ok.a[qk].f||"";pk?rk!=pk&&(ok.a.splice(qk,1),--qk):pk=rk;}0==nk.a.length&&(mk.b.splice(kk,1),--kk);}"dynamic"==gk.type&&null==gk.c&&(gk.c=jk);jk=new ph();"dynamic"==gk.type&&(jk.b=true,jk.f=gk.f,jk.h=new gg(ik,gk.j||gk.url),jk.g=gk.c);jk.c=gk.g||5;for(lk=0;lk<gk.a.length;++lk){mk=gk.a[lk];if(null==mk.start)break;mk=th(hk,gk,mk,ik);jk.a.push(mk);}this.a=jk;return gj.prototype.Z.call(this);});if(this.ja)return ek(this.ja);var fk=[new zd(this.ra)],fk=new gg(this.R,fk);return mg(new lg(fk,this.ga)).then(ek);};}.bind(h,b))();f.exports=h.shaka;},null);
__d('CustomAbrManager',['EventListener','SubscriptionsHandler','VideoPlayerShakaExperiments','Shaka'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=c('Shaka').player.VideoTrack;l.FIRST_SWITCH_INTERVAL=j.firstSwitchInterval||4000;l.MIN_SWITCH_INTERVAL=j.minSwitchInterval||30000;l.MIN_EVAL_INTERVAL=j.minEvalInterval||3000;l.BANDWIDTH_UPGRADE_TARGET=j.bandwidthUpgradeTarget||.85;l.BANDWIDTH_DOWNGRADE_TARGET=j.bandwidthDowngradeTarget||.95;function l(m){'use strict';this.$CustomAbrManager1=null;this.$CustomAbrManager2=null;this.$CustomAbrManager3=new i();this.$CustomAbrManager4=Number.POSITIVE_INFINITY;this.$CustomAbrManager5=true;this.$CustomAbrManager6=false;this.$CustomAbrManager7=m.maxWidth;this.$CustomAbrManager8=m.maxHeight;this.$CustomAbrManager9=m.forceHighQualityDefault;this.$CustomAbrManager10=m.initiallyForcedRepresentations;}l.prototype.destroy=function(){'use strict';this.$CustomAbrManager3.release();this.$CustomAbrManager3.engage();this.$CustomAbrManager1=null;this.$CustomAbrManager2=null;};l.prototype.setResolutionConstraint=function(m,n){'use strict';this.$CustomAbrManager7=m;this.$CustomAbrManager8=n;this.$CustomAbrManager11();};l.prototype.initialize=function(m,n){'use strict';if(this.$CustomAbrManager1||this.$CustomAbrManager2)return;this.$CustomAbrManager1=m;this.$CustomAbrManager2=n;};l.prototype.start=function(){'use strict';if(!this.$CustomAbrManager1||!this.$CustomAbrManager2||this.$CustomAbrManager6)return;this.$CustomAbrManager4=Date.now()+l.FIRST_SWITCH_INTERVAL;this.$CustomAbrManager3.addSubscriptions(h.listen(this.$CustomAbrManager1,'bandwidth',this.$CustomAbrManager12.bind(this)),h.listen(this.$CustomAbrManager2,'adaptation',this.$CustomAbrManager13.bind(this)),h.listen(this.$CustomAbrManager2,'trackschanged',this.$CustomAbrManager14.bind(this)));this.$CustomAbrManager6=true;};l.prototype.$CustomAbrManager14=function(){'use strict';this.$CustomAbrManager11();};l.prototype.forceHighQuality=function(m){'use strict';this.$CustomAbrManager9=m;if(!this.$CustomAbrManager6)return;if(m){var n=this.$CustomAbrManager15();if(n)this.selectVideoTrack(n,true);}else this.$CustomAbrManager11();};l.prototype.enable=function(m){'use strict';this.$CustomAbrManager5=m;};l.prototype.getInitialVideoTrackId=function(){'use strict';if(!this.$CustomAbrManager1||!this.$CustomAbrManager2)return null;var m=this.$CustomAbrManager15();return m?m.id:null;};l.prototype.getInitialAudioTrackId=function(){'use strict';if(!this.$CustomAbrManager1||!this.$CustomAbrManager2)return null;var m=this.$CustomAbrManager16();return m?m.id:null;};l.prototype.selectVideoTrack=function(m,n,o){'use strict';if(!this.$CustomAbrManager6)return;this.$CustomAbrManager2.selectVideoTrack(m.id,n,o);};l.$CustomAbrManager17=function(m){'use strict';for(var n=0;n<m.length;++n)if(m[n].active)return m[n];return null;};l.prototype.$CustomAbrManager12=function(event){'use strict';if(Date.now()<this.$CustomAbrManager4)return;this.$CustomAbrManager11(event);};l.prototype.$CustomAbrManager11=function(event){'use strict';if(!this.$CustomAbrManager5)return;var m=this.$CustomAbrManager15();if(m){if(m.active){this.$CustomAbrManager4=Date.now()+l.MIN_EVAL_INTERVAL;return;}this.selectVideoTrack(m,false);}this.$CustomAbrManager4=Number.POSITIVE_INFINITY;};l.prototype.$CustomAbrManager13=function(event){'use strict';if(this.$CustomAbrManager4==Number.POSITIVE_INFINITY)this.$CustomAbrManager4=Date.now()+l.MIN_SWITCH_INTERVAL;};l.prototype.$CustomAbrManager15=function(){'use strict';var m=this.$CustomAbrManager2.getVideoTracks();if(m.length==0)return null;if(!this.$CustomAbrManager6)for(var n=0;n<m.length;n++)if(this.$CustomAbrManager10&&this.$CustomAbrManager10.includes(m[n].streamInfoID))return m[n];m.sort(k.compare);if(this.$CustomAbrManager9)return m.pop();var o=m[0],p=this.$CustomAbrManager8,q=this.$CustomAbrManager7;m=m.filter(function(y){return y.width<=q||y.height<=p;});var r=l.$CustomAbrManager17(this.$CustomAbrManager2.getAudioTracks()),s=r?r.bandwidth:0,t=this.$CustomAbrManager1.getBandwidth();for(var n=0;n<m.length;n++){var u=m[n],v=n+1<m.length?m[n+1]:{bandwidth:Number.POSITIVE_INFINITY};if(!u.bandwidth)continue;var w=(u.bandwidth+s)/l.BANDWIDTH_DOWNGRADE_TARGET,x=(v.bandwidth+s)/l.BANDWIDTH_UPGRADE_TARGET;if(t>=w&&t<=x){o=u;if(o.active)break;}}return o;};l.prototype.$CustomAbrManager16=function(){'use strict';var m=this.$CustomAbrManager2.getAudioTracks();if(m.length==0)return null;if(!this.$CustomAbrManager6)for(var n=0;n<m.length;n++)if(this.$CustomAbrManager10&&this.$CustomAbrManager10.includes(m[n].streamInfoID))return m[n];return null;};f.exports=l;},null);
__d('VideoPlayerHTML5Shaka',['BlobFactory','CacheStorage','CustomAbrManager','EventEmitter','EventListener','Event','Run','VideoDashPrefetchCache','VideoPlayerShakaExperiments','dispatchEvent','invariant','Shaka'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s,t;if(c.__markCompiled)c.__markCompiled();var u=c('Shaka').player,v=u.Player,w=u.DashVideoSource,x=u.VideoTrack,y=c('Shaka').dash.mpd.parseMpd,z=c('Shaka').util,aa=z.EWMACacheBandwidthEstimator,ba=z.EWMASignedURLBandwidthEstimator,ca=z.FailoverUri,da=window.devicePixelRatio||1,ea=new i('localstorage','_video_'),fa=p.enableAdaptation?new aa(p.cacheDelay,p.cacheBandwidth,p.useStoredBandwidthEstimate?ea.get('bandwidthEstimate'):undefined):new ba();ca.setPrefetchCacheValueGetter(o.getCacheValue);n.onUnload(function(){return ea.set('bandwidthEstimate',fa.getBandwidth());});c('Shaka').polyfill.Fullscreen.install();function ga(ma){var na=ma.getVideoTracks();na.sort(x.compare);return na.pop().id;}function ha(ma){var na=ma.getVideoTracks();na.sort(x.compare);return na.shift().id;}function ia(ma){var na=h.getBlob([ma]);return URL.createObjectURL(na);}function ja(ma,event){var na=l.capture(ma.parentNode,event,function(oa){if(oa.target!=ma)return;na.remove();m.kill(oa);});}function ka(ma,na){'use strict';this.$DisabledAbrManager1=ma;this.$DisabledAbrManager2=na;}ka.prototype.initialize=function(ma,na){'use strict';this.$DisabledAbrManager3=na;};ka.prototype.start=function(){'use strict';if(this.$DisabledAbrManager4)return;this.$DisabledAbrManager4=true;if(this.$DisabledAbrManager2&&this.$DisabledAbrManager1)this.$DisabledAbrManager3.selectVideoTrack(ga(this.$DisabledAbrManager3),false);};ka.prototype.enable=function(){'use strict';};ka.prototype.getInitialVideoTrackId=function(){'use strict';if(this.$DisabledAbrManager2)return ha(this.$DisabledAbrManager3);var ma=this.$DisabledAbrManager1?ga(this.$DisabledAbrManager3):ha(this.$DisabledAbrManager3);return ma;};ka.prototype.destroy=function(){'use strict';this.$DisabledAbrManager3=null;};s=babelHelpers.inherits(la,k);t=s&&s.prototype;function la(ma,na,oa,pa){var qa=pa.width,ra=pa.height,sa=pa.playHighQualityTrack;'use strict';t.constructor.call(this);this.$VideoPlayerHTML5Shaka1=sa;this.$VideoPlayerHTML5Shaka2=false;this.$VideoPlayerHTML5Shaka3=qa;this.$VideoPlayerHTML5Shaka4=ra;this.$VideoPlayerHTML5Shaka5=true;var ta=l.listen(ma,'playing',function(){this.$VideoPlayerHTML5Shaka5=false;ta.remove();}.bind(this));this.$VideoPlayerHTML5Shaka6=new v(ma);this.$VideoPlayerHTML5Shaka6.addEventListener('bufferingStart',function(){return this.$VideoPlayerHTML5Shaka7();}.bind(this));this.$VideoPlayerHTML5Shaka6.addEventListener('bufferingEnd',function(){return this.$VideoPlayerHTML5Shaka8();}.bind(this));this.$VideoPlayerHTML5Shaka6.addEventListener('error',function(ua){return this.$VideoPlayerHTML5Shaka9(ua);}.bind(this));this.$VideoPlayerHTML5Shaka6.addEventListener('adaptation',this.$VideoPlayerHTML5Shaka10.bind(this));this.$VideoPlayerHTML5Shaka6.addEventListener('trackschanged',this.$VideoPlayerHTML5Shaka11.bind(this));this.$VideoPlayerHTML5Shaka12=oa;this.$VideoPlayerHTML5Shaka13=y(na);this.$VideoPlayerHTML5Shaka14=this.$VideoPlayerHTML5Shaka15();this.$VideoPlayerHTML5Shaka16=this.$VideoPlayerHTML5Shaka17();this.$VideoPlayerHTML5Shaka18=ma;this.$VideoPlayerHTML5Shaka6.configure({enableAdaptation:p.enableAdaptation,streamBufferSize:p.streamBufferSize,initialStreamBufferSize:p.initialStreamBufferSize});this.$VideoPlayerHTML5Shaka6.load(this.$VideoPlayerHTML5Shaka16);}la.prototype.selectHighestQualityTrack=function(){'use strict';if(p.enableAdaptation){this.$VideoPlayerHTML5Shaka1=true;this.$VideoPlayerHTML5Shaka14.forceHighQuality(true);return;}this.$VideoPlayerHTML5Shaka6.selectVideoTrack(ga(this.$VideoPlayerHTML5Shaka6),true);};la.prototype.selectLowestQualityTrack=function(){'use strict';if(p.enableAdaptation){this.$VideoPlayerHTML5Shaka1=false;this.$VideoPlayerHTML5Shaka14.forceHighQuality(false);return;}this.$VideoPlayerHTML5Shaka6.selectVideoTrack(ha(this.$VideoPlayerHTML5Shaka6),false);};la.prototype.pause=function(){'use strict';if(this.$VideoPlayerHTML5Shaka19){this.$VideoPlayerHTML5Shaka20=true;this.$VideoPlayerHTML5Shaka21=true;q(this.$VideoPlayerHTML5Shaka18,'pause');this.$VideoPlayerHTML5Shaka6.setResumeAfterBuffering(false);}else this.$VideoPlayerHTML5Shaka18.pause();};la.prototype.play=function(){'use strict';if(this.$VideoPlayerHTML5Shaka19){this.$VideoPlayerHTML5Shaka20=false;this.$VideoPlayerHTML5Shaka21=true;q(this.$VideoPlayerHTML5Shaka18,'play');q(this.$VideoPlayerHTML5Shaka18,'waiting');this.$VideoPlayerHTML5Shaka6.setResumeAfterBuffering(true);}else this.$VideoPlayerHTML5Shaka18.play();};la.prototype.$VideoPlayerHTML5Shaka7=function(){'use strict';ja(this.$VideoPlayerHTML5Shaka18,'pause');this.$VideoPlayerHTML5Shaka19=true;this.$VideoPlayerHTML5Shaka20=false;this.$VideoPlayerHTML5Shaka21=false;this.$VideoPlayerHTML5Shaka6.setResumeAfterBuffering(true);this.emit('bufferingStart');};la.prototype.$VideoPlayerHTML5Shaka8=function(){var ma=this;'use strict';if(!this.$VideoPlayerHTML5Shaka20)ja(this.$VideoPlayerHTML5Shaka18,'play');if(!this.$VideoPlayerHTML5Shaka21)(function(){var na=l.capture(ma.$VideoPlayerHTML5Shaka18.parentNode,'playing',function(oa){if(oa.target!=this.$VideoPlayerHTML5Shaka18)return;na.remove();if(this.$VideoPlayerHTML5Shaka5){this.$VideoPlayerHTML5Shaka5=false;return;}m.kill(oa);}.bind(ma));})();this.$VideoPlayerHTML5Shaka19=false;this.emit('bufferingEnd');};la.prototype.$VideoPlayerHTML5Shaka9=function(ma){'use strict';var na=ma.detail||{},oa=na.type||'undefined',pa=na.message;this.emit('error',{error:'SHAKA_'+oa.toUpperCase(),message:pa});};la.prototype.hasSelectableVideoTracks=function(){'use strict';var ma=this.$VideoPlayerHTML5Shaka6.getVideoTracks();return ma.length>1;};la.prototype.unload=function(){'use strict';this.$VideoPlayerHTML5Shaka6.unload();this.$VideoPlayerHTML5Shaka2=true;};la.prototype.$VideoPlayerHTML5Shaka15=function(){'use strict';var ma=this.$VideoPlayerHTML5Shaka1,na={forceHighQualityDefault:ma,maxWidth:this.$VideoPlayerHTML5Shaka22(),maxHeight:this.$VideoPlayerHTML5Shaka23(),initiallyForcedRepresentations:this.$VideoPlayerHTML5Shaka12};return p.enableAdaptation?new j(na):new ka(ma,p.switchFromLowQuality);};la.prototype.$VideoPlayerHTML5Shaka17=function(){'use strict';!this.$VideoPlayerHTML5Shaka14?r(0):undefined;!this.$VideoPlayerHTML5Shaka13?r(0):undefined;var ma=new w(this.$VideoPlayerHTML5Shaka13,null,fa,this.$VideoPlayerHTML5Shaka14);return ma;};la.prototype.reload=function(ma){'use strict';!this.$VideoPlayerHTML5Shaka2?r(0):undefined;this.$VideoPlayerHTML5Shaka2=false;this.$VideoPlayerHTML5Shaka14=this.$VideoPlayerHTML5Shaka15();this.$VideoPlayerHTML5Shaka16=this.$VideoPlayerHTML5Shaka17();return this.$VideoPlayerHTML5Shaka6.load(this.$VideoPlayerHTML5Shaka16).then(function(){return this.$VideoPlayerHTML5Shaka18.currentTime=ma;}.bind(this));};la.prototype.getLongestInitResponseTime=function(){'use strict';return this.$VideoPlayerHTML5Shaka16.getLongestInitResponseTime();};la.$VideoPlayerHTML5Shaka24=function(){'use strict';return (p.resolutionConstraintFactor*da);};la.prototype.$VideoPlayerHTML5Shaka22=function(){'use strict';if(!p.useResolutionConstraints)return Infinity;return this.$VideoPlayerHTML5Shaka3*la.$VideoPlayerHTML5Shaka24();};la.prototype.$VideoPlayerHTML5Shaka23=function(){'use strict';if(!p.useResolutionConstraints)return Infinity;return this.$VideoPlayerHTML5Shaka4*la.$VideoPlayerHTML5Shaka24();};la.prototype.setDimensions=function(ma,na){'use strict';this.$VideoPlayerHTML5Shaka3=ma;this.$VideoPlayerHTML5Shaka4=na;this.$VideoPlayerHTML5Shaka14.setResolutionConstraint(this.$VideoPlayerHTML5Shaka22(),this.$VideoPlayerHTML5Shaka23());};la.isSupported=function(){'use strict';return v.isBrowserSupported();};la.prototype.$VideoPlayerHTML5Shaka11=function(){'use strict';this.emit('tracksChanged');};la.prototype.$VideoPlayerHTML5Shaka10=function(){'use strict';this.emit('adaptation');};f.exports=la;},null);