/*!CK:3219371410!*//*1456276704,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["DFSPr"]); }

__d("CommentsPluginSentryAction",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={CONFIRM_POST_TO_PROFILE:"confirm_post_to_profile"};},null);
__d("DeveloperCommentsModerationSource",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={APP:"app",URL:"url"};},null);
__d('MentionResultsPropTypes',['React','SearchableEntry','SelectionState'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=h.PropTypes,l={viewID:k.string.isRequired,selection:k.instanceOf(j).isRequired,contextComponent:k.object.isRequired,mentionableEntries:k.array.isRequired,highlightedMentionable:k.instanceOf(i),onMentionSelect:k.func.isRequired,onMentionHighlight:k.func.isRequired,onMentionRenderHighlight:k.func.isRequired};f.exports=l;},null);
__d('MentionsLayer.react',['Bootloader','Locale','MentionResultsPropTypes','React','areEqual'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=k.PropTypes,n=false,o=i.isRTL(),p,q,r,s,t=5,u=k.createClass({displayName:'MentionsLayer',propTypes:babelHelpers['extends']({},j,{typeaheadView:m.func.isRequired,typeaheadViewProps:m.object,autoflip:m.bool,position:m.oneOf(['above','below'])}),getInitialState:function(){return {bootloaded:n};},componentWillMount:function(){if(!this.state.bootloaded)v(function(){this.isMounted()&&this.setState({bootloaded:true});}.bind(this));},_onMentionSelect:function(w,x){x.preventDefault();this.props.onMentionSelect(w,x);},shouldComponentUpdate:function(w,x){return (this.state.bootloaded!==x.bootloaded||!l(this.props.mentionableEntries,w.mentionableEntries)||this.props.highlightedMentionable!==w.highlightedMentionable||this.props.characterOffset!==w.characterOffset);},render:function(){if(!this.state.bootloaded)return null;var w=this.props.mentionableEntries,x=this.props.selection,y=x.isCollapsed()&&x.getHasFocus()&&w&&w.length,z=null,aa=this.props.typeaheadViewProps,ba=false;if(aa&&aa.positionAtContext){ba=true;}else if(y)z=s(this.props.characterOffset,o);var ca={};if(this.props.autoflip){ca.ContextualLayerAutoFlip=q;ca.ContextualLayerUpdateOnScroll=r;}var da=this.props.typeaheadView;return (k.createElement(p,{shown:y,context:this.props.contextComponent,contextBounds:z,containerWidthMatchContext:ba,offsetY:t,position:this.props.position||'below',behaviors:ca},k.createElement(da,{id:this.props.viewID,viewProps:this.props.typeaheadViewProps,highlightedEntry:this.props.highlightedMentionable,entries:w||[],onSelect:this._onMentionSelect,onHighlight:this.props.onMentionHighlight,onRenderHighlight:this.props.onMentionRenderHighlight})));}});function v(w){h.loadModules(["ContextualLayer.react","ContextualLayerAutoFlip","ContextualLayerUpdateOnScroll","getMentionableRect"],function(x,y,z,aa){p=x;q=y;r=z;s=aa;n=true;w();});}f.exports=u;},null);
__d('HashtagSpan.react',['React','cx'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=h.createClass({displayName:'HashtagSpan',render:function(){return (h.createElement('span',babelHelpers['extends']({},this.props,{'data-offset-key':this.props.offsetKey,className:"_5u8n",spellCheck:false}),this.props.children));}});f.exports=j;},null);
__d('MentionSpan.react',['React','cx'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=h.createClass({displayName:'MentionSpan',render:function(){return (h.createElement('span',babelHelpers['extends']({},this.props,{'data-offset-key':this.props.offsetKey,className:"_5u8u",spellCheck:false}),this.props.children));}});f.exports=j;},null);
__d('WeakMentionSpan.react',['React','cx'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=h.createClass({displayName:'WeakMentionSpan',render:function(){return (h.createElement('span',{'data-offset-key':this.props.offsetKey,className:"_whq",spellCheck:false},this.props.children));}});f.exports=j;},null);
__d('getHashtagMatches',['getHashtagRegex'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=h();function j(k,l){var m=k.getText(),n,o,p,q;while((n=i.exec(m))!==null){o=n.index+n[1].length;p=n[2];q=n[3];l(o,o+p.length+q.length);}}f.exports=j;},null);
__d('getMentionsInputDecorator',['CompositeDraftDecorator','EmoticonSpan.react','HashtagSpan.react','MentionSpan.react','WeakMentionSpan.react','getEntityMatcher','getHashtagMatches'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o;function p(){if(!o)o=new h([{strategy:m(function(q){var r=q.getData();return q.getType()==='MENTION'&&r&&r.isWeak;}),component:l},{strategy:m(function(q){return q.getType()==='MENTION';}),component:k},{strategy:m(function(q){return q.getType()==='EMOTICON';}),component:i},{strategy:n,component:j}]);return o;}f.exports=p;},null);
__d('UFIAttachedMediaPreview.react',['Arbiter','BootloadedComponent.react','cx','CloseButton.react','DOMContainer.react','DOMVector','HTML','LoadingIndicator.react','React','ReactDOM','UFIUIEvents','XUISpinner.react','JSResource','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){'use strict';if(c.__markCompiled)c.__markCompiled();var v=p.PropTypes,w=80,x='ufi_photo_preview_test_id',y=p.createClass({displayName:'UFIAttachedMediaPreview',propTypes:{attachedPhoto:v.object,attachedVideo:v.object,attachedSticker:v.object,onRemoveAttachedMediaPreviewClicked:v.func,onRemoveAttachedStickerPreview:v.func,subtitle:v.string,isLoadingPhoto:v.bool,videoFileURL:v.string,videoStatus:v.string,videoProgress:v.number},_height:0,_getScaledDimensions:function(z,aa){var ba,ca,da;if(aa>z){da=w/aa;ba=z*da;ca=aa*da;}else{da=w/z;ba=z*da;ca=aa*da;}return {height:Math.round(ba),width:Math.round(ca)};},_checkHeightChange:function(){var z=q.findDOMNode(this),aa=z?m.getElementDimensions(z).y:0;if(aa!==this._height){this._height=aa;h.inform(r.PhotoPreviewHeightChanged,{node:z});}},componentDidUpdate:function(){if(this.props.monitorHeight)this._checkHeightChange();},render:function(){var z=null,aa=this.props.attachedPhoto||this.props.attachedSticker||this.props.attachedVideo;if(aa&&this.props.attachedSticker){var ba=this._getScaledDimensions(aa.metadata.height,aa.metadata.width),ca=null,da=null;if(window.devicePixelRatio&&window.devicePixelRatio>1){ca=aa.metadata.sprite_uri_2x;da=aa.metadata.source_uri_2x;}else{ca=aa.metadata.sprite_uri;da=aa.metadata.source_uri;}z=p.createElement(i,{bootloadPlaceholder:p.createElement(s,null),bootloadLoader:t('Sticker.react'),animationTrigger:'load_and_hover',frameCount:aa.metadata.frameCount,frameRate:aa.metadata.frameRate,framesPerCol:aa.metadata.framesPerCol,framesPerRow:aa.metadata.framesPerRow,spriteURI:ca,sourceHeight:ba.height,sourceURI:da,sourceWidth:ba.width});}else if(aa&&this.props.attachedPhoto){var ea=aa.markupPreview;if(n.isHTML(ea.markup))ea=n.replaceJSONWrapper(ea.markup).getRootNode();z=p.createElement(l,{'data-testid':x},ea);}else if(this.props.isLoadingPhoto){z=p.createElement(o,{color:'white',className:'UFICommentPhotoAttachedPreviewLoadingIndicator',size:'medium'});}else if(this.props.videoStatus==='uploading'||this.props.attachedVideo&&this.props.videoStatus==='encoding'){z=p.createElement(i,{bootloadLoader:t('OptimisticVideoComment.react'),bootloadPlaceholder:p.createElement('span',null),videoFileURL:this.props.videoFileURL,videoStatus:this.props.videoStatus,progress:this.props.videoProgress});}else if(aa&&this.props.attachedVideo)z=p.createElement('div',{className:"_3f0q"},p.createElement(l,null,aa.markup));var fa=null,ga=this.props.attachedSticker?this.props.onRemoveAttachedStickerPreview:this.props.onRemoveAttachedMediaPreviewClicked;if(z!=null){var ha=null;if(this.props.attachedSticker){ha=u._("Remove Sticker");}else if(this.props.attachedPhoto){ha=u._("Remove Photo");}else if(this.props.attachedVideo)ha=u._("Remove Video");fa=p.createElement('div',{className:'UFICommentPhotoAttachedPreview pas'},z,p.createElement(k,{tooltip:ha,onClick:ga}));}return fa;}});f.exports=y;},null);
__d('AbstractMentionsTextEditor.react',['DraftEditor.react','DraftModifier','EditorState','React','TypeaheadNavigation','clearImmediate','getOrCreateDOMID','setImmediate','uniqueID'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q=k.PropTypes,r=5,s=k.createClass({displayName:'AbstractMentionsTextEditor',propTypes:{mentionsSource:q.object,mentionCreationFn:q.func.isRequired,mentionResultsComponent:q.func.isRequired,mentionResultsProps:q.object,excludedEntries:q.object,handleContentReturn:q.func,onAddMention:q.func,onShowMentions:q.func,autoHighlight:q.bool,maxResults:q.number},getDefaultProps:function(){return babelHelpers['extends']({},h.defaultProps,{autoHighlight:true,maxResults:r});},componentWillMount:function(){this._viewID=p();this._searchTimeouts=[];},componentWillUnmount:function(){this._searchTimeouts.forEach(function(u){return m(u);});this._searchTimeouts=null;},getInitialState:function(){return {highlightedMentionable:null,ariaActiveDescendantID:null,mentionableEntries:null,characterOffset:0};},_onShowMentions:function(u,v){if(!this.isMounted())return;var w=u&&u.length;if(!w){this.setState({highlightedMentionable:null,activeDescendantID:null,mentionableEntries:null,characterOffset:0});return;}var x=u.slice(0,this.props.maxResults),y=this.props.typeaheadViewProps;if(y&&y.mentionSortFn)x.sort(y.mentionSortFn);var z=null;if(this.props.autoHighlight||this.state.highlightedMentionable!==null)z=u[0];this.setState({highlightedMentionable:z,mentionableEntries:x,characterOffset:v});if(this.props.onShowMentions)this.props.onShowMentions(x,v);},_onBlur:function(u){this.setState(this.getInitialState());this.props.onBlur&&this.props.onBlur(u);},_onFocus:function(u){this.props.mentionsSource&&this.props.mentionsSource.bootstrap();this.props.onFocus&&this.props.onFocus(u);},_handleReturn:function(u){if(this.state.highlightedMentionable){this._onMentionSelect(this.state.highlightedMentionable,u);return true;}else if(this.props.handleContentReturn&&this.props.handleContentReturn(u))return true;return false;},_onTab:function(u){if(this.state.highlightedMentionable){u.preventDefault();this._onMentionSelect(this.state.highlightedMentionable,u);}else if(this.props.onTab)this.props.onTab(u);},_onEscape:function(u){if(this.props.onEscape)this.props.onEscape(u);if(this.state.mentionableEntries){u.stopPropagation();this.setState(this.getInitialState());}},_onUpArrow:function(u){if(this.state.mentionableEntries){u.preventDefault();l.moveUp(this.state.mentionableEntries,this.state.highlightedMentionable,this._onMentionHighlight);}else this.props.onUpArrow&&this.props.onUpArrow(u);},_onDownArrow:function(u){if(this.state.mentionableEntries){u.preventDefault();l.moveDown(this.state.mentionableEntries,this.state.highlightedMentionable,this._onMentionHighlight);}else this.props.onDownArrow&&this.props.onDownArrow(u);},_onMentionHighlight:function(u){this.setState({highlightedMentionable:u});},_onMentionRenderHighlight:function(u){var v=n(u);this.setState({ariaActiveDescendantID:v});},_onMentionSelect:function(u,v){var w=this.props.editorState,x=w.getSelection(),y=w.getCurrentContent(),z=x.getAnchorKey(),aa=x.getAnchorOffset(),ba=y.getBlockMap().get(z),ca=aa-t(ba.getText().substr(0,aa),u.getTitle(),this.state.characterOffset),da=i.replaceText(y,x.set('anchorOffset',ca),u.getTitle(),w.getCurrentInlineStyle(),this.props.mentionCreationFn(u)),ea=j.push(w,da,'insert-fragment');this.props.onChange(ea);this.setState(this.getInitialState());if(this.props.onAddMention){var fa=this.state.mentionableEntries.indexOf(u);this.props.onAddMention(u,fa,v);}},shouldComponentUpdate:function(u,v){return (this.props.editorState!==u.editorState||this.props.placeholder!==u.placeholder||this.props.readOnly!==u.readOnly||this.state.mentionableEntries!==v.mentionableEntries||this.state.highlightedMentionable!==v.highlightedMentionable||this.state.ariaActiveDescendantID!==v.ariaActiveDescendantID);},componentDidUpdate:function(u){var v=this.props.editorState;if(v===u.editorState)return;var w=v.getSelection();if(w.getHasFocus()&&w.isCollapsed()){var x=v.getCurrentContent();if(this.props.mentionsSource)this._searchTimeouts.push(o(function(){this.props.mentionsSource.search(x,w,this._onShowMentions);}.bind(this)));}},blur:function(){this.refs.abstractTextEditor.blur();},focus:function(){this.refs.abstractTextEditor.focus();},_renderMentionables:function(){var u=this.state.mentionableEntries;if(!u||!u.length)return null;var v=this.props.mentionResultsComponent;return (k.createElement(v,babelHelpers['extends']({},this.props.mentionResultsProps,{viewID:this._viewID,selection:this.props.editorState.getSelection(),contextComponent:this,characterOffset:this.state.characterOffset,mentionableEntries:u||[],highlightedMentionable:this.state.highlightedMentionable,onMentionSelect:this._onMentionSelect,onMentionHighlight:this._onMentionHighlight,onMentionRenderHighlight:this._onMentionRenderHighlight})));},render:function(){var u=this.state.mentionableEntries,v=!!(u&&u.length),w=this.props.readOnly?null:'-2';return (k.createElement('div',{ref:'container',className:this.props.className,tabIndex:w},k.createElement(h,babelHelpers['extends']({},this.props,{ref:'abstractTextEditor',role:'combobox',ariaActiveDescendantID:this.state.ariaActiveDescendantID,ariaAutoComplete:'list',ariaOwneeID:this._viewID,ariaExpanded:v,ariaHasPopup:v,onBlur:this._onBlur,onFocus:this._onFocus,onTab:this._onTab,onEscape:this._onEscape,onDownArrow:this._onDownArrow,onUpArrow:this._onUpArrow,handleReturn:this._handleReturn})),this._renderMentionables()));}});function t(u,v,w){for(var x=w;x<=v.length;x++)if(u.substr(-x)==v.substr(0,x))w=x;return w;}f.exports=s;},null);
__d('createMentionEntity',['DraftEntity'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j){var k=j.getType().toLowerCase();if(k==='hashtag')return h.create('HASHTAG','IMMUTABLE');var l=k==='user'||k==='fb4c'?'SEGMENTED':'IMMUTABLE',m=j.getAuxiliaryData();return h.create('MENTION',l,{id:j.getUniqueID(),isWeak:m&&m.renderType==='non_member',type:k});}f.exports=i;},null);
__d('MentionsInput.react',['AbstractMentionsTextEditor.react','EditorState','MentionsLayer.react','React','createMentionEntity','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o=k.PropTypes,p=k.createClass({displayName:'MentionsInput',propTypes:{editorState:o.instanceOf(i).isRequired,mentionsSource:o.object,typeaheadView:o.func.isRequired,typeaheadViewPropTypes:o.object,spellCheck:o.bool,placeholder:o.string,className:o.string,autoflip:o.bool,position:o.oneOf(['above','below']),handleContentReturn:o.func,handleDroppedFiles:o.func,handlePastedFiles:o.func,onAddMention:o.func,onShowMentions:o.func,onChange:o.func,onInputFocus:o.func,onInputBlur:o.func},blur:function(){this.refs.textEditor.blur();},focus:function(){clearTimeout(this._focusTimer);this._focusTimer=setTimeout(function(){this.refs.textEditor.focus();}.bind(this),0);},componentWillUnmount:function(){clearTimeout(this._focusTimer);},render:function(){var q=n(this.props.className,"_5yk1");return (k.createElement('div',{className:q,onClick:this.focus,onFocus:this.focus},k.createElement(h,babelHelpers['extends']({},this.props,{mentionResultsComponent:j,mentionResultsProps:{typeaheadView:this.props.typeaheadView,typeaheadViewProps:this.props.typeaheadViewProps,autoflip:this.props.autoflip,position:this.props.position},mentionCreationFn:l,ref:'textEditor',className:"_5yk2",stripPastedStyles:true}))));}});f.exports=p;},null);
__d('DevxFluxDispatcher',['Dispatcher_DEPRECATED'],function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();i=babelHelpers.inherits(k,h);j=i&&i.prototype;k.prototype.handleServerAction=function(l){this.$DevxFluxDispatcher1('serverAction',l);};k.prototype.handleViewAction=function(l){this.$DevxFluxDispatcher1('viewAction',l);};k.prototype.$DevxFluxDispatcher1=function(l,m){this.dispatch(babelHelpers['extends']({source:l},m));};function k(){i.apply(this,arguments);}f.exports=new k();},null);
__d('DevxProxyActions',['DevxFluxDispatcher'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();function i(j){Object.keys(j.ActionHandler).forEach(function(k){this[k]=function(){for(var l=arguments.length,m=Array(l),n=0;n<l;n++)m[n]=arguments[n];h.handleViewAction({action:k,args:m});};}.bind(this));}f.exports=i;},null);
__d('DocumentMentionsRegex',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h='\\.,\\+\\*\\?\\$\\@\\|#{}\\(\\)\\^\\-\\[\\]\\\\\/!%\'"~=<>_:;',i='\\b[A-Z][^\\s'+h+']',j={PUNCTUATION:h,NAME:i};f.exports=j;},null);
__d('AtSignMentionsStrategy',['DocumentMentionsRegex'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=h.PUNCTUATION,j=['@','\\uff20'].join(''),k='[^'+j+i+'\\s]',l='(?:'+'\\.[ |$]|'+' |'+'['+i+']|'+')',m=new RegExp('(?:^|\\s|\\()('+'['+j+']'+'((?:'+k+l+'){0,20})'+')$'),n={name:'AtSignMentionsStrategy',findMentionableString:function(o){var p=m.exec(o);if(p!==null){var q=p[2];if(q.length)return {matchingString:q,leadOffset:p[1].length};}return null;}};f.exports=n;},null);
__d('CapitalizedNameMentionsStrategy',['DocumentMentionsRegex'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=1,j=new RegExp('(^|[^#])((?:'+h.NAME+'{'+i+',})$)'),k={name:'CapitalizedNameMentionsStrategy',findMentionableString:function(l){var m=j.exec(l);if(m!==null)return {matchingString:m[2],leadOffset:m[2].length};return null;}};f.exports=k;},null);
__d('DocumentCompositeMentionsSource',['emptyFunction','invariant','nullthrows'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();function k(m,n){var o=m.getCharacterList().toSeq().slice(0,n).reverse().takeWhile(function(p){return p.getEntity()===null;}).count();return m.getText().slice(n-o,n);}function l(m){!(m.length>0)?i(0):undefined;this.$DocumentCompositeMentionsSource1=m;this.$DocumentCompositeMentionsSource2=false;this.$DocumentCompositeMentionsSource3=null;}l.prototype.bootstrap=function(m){if(this.$DocumentCompositeMentionsSource2)return;this.$DocumentCompositeMentionsSource2=true;m=m||h;var n=this.$DocumentCompositeMentionsSource1.length;function o(){n--;if(!n)m&&m();}this.$DocumentCompositeMentionsSource1.forEach(function(p){p.bootstrap(o);});};l.prototype.search=function(m,n,o){var p=n.getAnchorKey(),q=m.getBlockForKey(p);this.$DocumentCompositeMentionsSource4(k(q,n.getAnchorOffset()),o);};l.prototype.$DocumentCompositeMentionsSource4=function(m,n){var o=this.$DocumentCompositeMentionsSource1.length,p,q;for(var r=0;r<o;r++){p=this.$DocumentCompositeMentionsSource1[r];q=p.findMatch(m);if(q===null){continue;}else{var s=j(q).matchingString;this.$DocumentCompositeMentionsSource3=s;p.search(s,function(t,u){if(this.$DocumentCompositeMentionsSource3===u)n(t,q.leadOffset);}.bind(this));return;}}this.$DocumentCompositeMentionsSource3=null;n(null,null);};f.exports=l;},null);
__d('DocumentMentionsSource',['invariant'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();function i(j,k){!(typeof j.findMentionableString==='function')?h(0):undefined;this.$DocumentMentionsSource1=j;this.$DocumentMentionsSource2=k;this.$DocumentMentionsSource3=false;}i.prototype.findMatch=function(j){return this.$DocumentMentionsSource1.findMentionableString(j);};i.prototype.bootstrap=function(j){if(!this.$DocumentMentionsSource3){this.$DocumentMentionsSource3=true;this.$DocumentMentionsSource2.bootstrap(j);}};i.prototype.search=function(j,k){this.$DocumentMentionsSource2.search(j,k,{strategyName:this.$DocumentMentionsSource1.name});};f.exports=i;},null);
__d('filterCapitalizedNames',['TokenizeUtil'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(m,n){return j(m)&&(n.length>=5||k(m,n));}function j(m){var n=m.getAuxiliaryData()||l;return !n.disableAutosuggest&&!!(m.getType()==='user'||n.connectedPage);}function k(m,n){return h.isExactMatch(n,m.getTitle());}var l={};f.exports=i;},null);
__d("XPluginCommentsBanAuthorAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/plugins\/comments\/moderate\/ban\/{comment_id}\/",{comment_id:{type:"String",required:true}});},null);
__d("XPluginCommentsCreateCommentAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/plugins\/comments\/async\/createComment\/{target_id}\/",{target_id:{type:"Int",required:true}});},null);
__d("XPluginCommentsCreateReplyAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/plugins\/comments\/async\/createReply\/{parent_comment_id}\/",{parent_comment_id:{type:"String",required:true}});},null);
__d("XPluginCommentsDeleteCommentAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/plugins\/comments\/async\/delete\/",{});},null);
__d("XPluginCommentsEditCommentAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/plugins\/comments\/async\/edit\/",{});},null);
__d("XPluginCommentsFlagCommentAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/plugins\/comments\/async\/flag\/",{});},null);
__d("XPluginCommentsHideCommentAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/plugins\/comments\/moderate\/hide\/{url_id}\/",{url_id:{type:"Int",required:true},action:{type:"Enum",required:true,enumType:1},type:{type:"Enum",required:true,enumType:1}});},null);
__d("XPluginCommentsLikeCommentAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/plugins\/comments\/async\/like\/",{action_like:{type:"Bool",defaultValue:false}});},null);
__d("XPluginCommentsPagerAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/plugins\/comments\/async\/{target_id}\/pager\/{ordering}\/",{target_id:{type:"Int",required:true},ordering:{type:"Enum",required:true,enumType:1}});},null);
__d("XPluginCommentsRepliesPagerAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/plugins\/comments\/async\/comment\/{comment_id}\/pager\/",{comment_id:{type:"String",required:true}});},null);
__d('CommentsPluginStore',['AsyncRequest','XPluginCommentsBanAuthorAsyncController','XPluginCommentsCreateCommentAsyncController','XPluginCommentsCreateReplyAsyncController','XPluginCommentsDeleteCommentAsyncController','DeveloperCommentsModerationAction','DeveloperCommentsModerationSource','DeveloperCommentsModerationType','DevxFluxDispatcher','XPluginCommentsEditCommentAsyncController','XPluginCommentsFlagCommentAsyncController','XPluginCommentsLikeCommentAsyncController','XPluginCommentsHideCommentAsyncController','PluginOptin','XPluginCommentsPagerAsyncController','XPluginCommentsRepliesPagerAsyncController','UnverifiedXD','URI','WebStorage','getMentionsTextForContentState','getVisibleValueForContentState','invariant','mixInEventEmitter','nullthrows','uniqueID'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa){'use strict';if(c.__markCompiled)c.__markCompiled();var ga=10,ha='__DEVX__',ia={visibleValue:'',encodedValue:''},ja={change:true,composerChange:true,composerCommentAdded:true,login:true,moreCommentsCompleted:true,moreRepliesCompleted:true,postError:true,sortingCompleted:true,sentryAction:true,previousComposerCommentPrefill:true,actorChange:true,previousPostToFeedPrefill:true,commentsCountChange:true},ka={maxLines:10,maxLength:1000},la=[],ma={},na={userID:null,actors:{},actorsOptIn:{},appID:null,afterCursor:null,channelURL:null,composerSearchSource:{},deeplinkedCommentID:null,href:'',iframeReferer:null,isMobile:false,isModerator:false,mirroredPage:null,moderateURL:null,targetFBID:null,totalCount:0,user:{},minFeedLength:0,maxCommentLength:0,enablePhoto:false,enableSticker:false,ret:null,threadClosed:false,shouldSwitchAccount:false},oa=false,pa={},qa={},ra={},sa={},ta={ordering:null,ranking_allowed:null},ua={},va={},wa={setPostToFeed:true,sort:true,showMoreComments:true,showMoreReplies:true,toggleVisibility:true},xa={restorePreviousState:true,setUser:true,edit:true,showReplyComposer:true,cancelEdit:true,cancelReply:true},ya={addComment:true,addReply:true,saveEdit:true};function za(hb){!gb.hasOwnProperty(hb)?ca(0):undefined;}function ab(){!Array.isArray(la)?ca(0):undefined;!(ma instanceof Object)?ca(0):undefined;}function bb(hb){var ib,jb=fb.getUser().id,kb=hb.action,lb=(ib=gb[hb.action]).bind.apply(ib,[gb].concat(hb.args));if(fb.isLoggedIn()&&(fb.isPlatformEnabled(jb)||xa[kb])||wa[kb]){lb.call();}else{var mb=z.getSessionStorage();if(mb)mb.setItem('previousState',JSON.stringify(cb(hb)));new u('comments').addReturnParams({numposts:Math.min(Math.max(1,na.totalCount),100),order_by:ta.ordering}).start();}}function cb(hb){var ib='',jb='',kb=[],lb={},mb={},nb=oa,ob=fb.getCreateComposerContent();if(ob)ib=ob.encodedValue;if(!ya[hb.action]){jb=hb.action;kb=hb.args;}Object.keys(ua).forEach(function(pb){var qb=fb.getCreateComposerContent(pb);if(qb.encodedValue)lb[pb]=qb.encodedValue;});Object.keys(va).forEach(function(pb){var qb=fb.getEditComposerContent(pb);if(qb.encodedValue)mb[pb]=qb.encodedValue;});return {commentBody:ib,action:jb,commentIDs:kb,replies:lb,edits:mb,postToFeed:nb};}function db(hb,ib,jb){return jb.indexOf(hb)===ib;}function eb(event,hb){if(!na.channelURL)return;hb.href=na.href;x.send({data:JSON.stringify(hb),event:event,type:'sdk_event'},na.channelURL);}var fb={LOGGED_OUT_USER:'0',getCommentIDs:function(){return la;},getByID:function(hb){ab();return ea(ma)[hb];},isOptimisticComment:function(hb){return hb.id.startsWith(ha);},getCurrentSorting:function(){return ea(ta.ordering);},isRankingAllowed:function(){return ea(ta.ranking_allowed);},getTargetFBID:function(){return ea(na.targetFBID);},getCommentsCount:function(){ab();return na.totalCount;},updateCommentsCount:function(hb){na.totalCount+=hb;this.emit('commentsCountChange');},getUser:function(){return na.user;},getIframeReferer:function(){return na.iframeReferer;},getAuthor:function(hb){return this.getByID(this.getByID(hb).authorID);},getPageSize:function(){return ga;},getCommentBodyTruncationLimits:function(){return ka;},getComposerSearchSource:function(){return na.composerSearchSource;},getMirroredPage:function(){return na.mirroredPage;},getMinFeedLength:function(){return na.minFeedLength+1;},getMaxCommentLength:function(){return na.maxCommentLength?na.maxCommentLength:Number.MAX_VALUE;},isMirrored:function(){return this.getMirroredPage()!=null;},isReply:function(hb){var ib=this.getByID(hb);return ib.targetID!==this.getTargetFBID();},getPermalink:function(hb){var ib=this.getByID(hb);return y.getRequestURI().setQueryData({fb_comment_id:hb,href:ib.ogURL,width:this.isMobile()?'100%':document.body.offsetWidth}).toString();},isOptinReturn:function(){return !!na.ret;},setActor:function(hb){na.user=na.actors[hb];},getPostToFeed:function(){return oa;},setPostToFeed:function(hb){oa=hb;},getEnablePhoto:function(){return na.enablePhoto;},getEnableSticker:function(){return na.enableSticker;},isDeeplinkComment:function(){return !!na.deeplinkedCommentID;},getOriginalLink:function(){return na.href;},getCreateComposerAttachment:function(hb){return pa[hb||ha]||null;},setCreateComposerAttachment:function(hb,ib){pa[ib||ha]=hb;this.emit('composerChange');},getEditComposerAttachment:function(hb){return qa[hb]||null;},setEditComposerAttachment:function(hb,ib){qa[ib]=hb;this.emit('composerChange');},getLoadingCreateComposerAttachment:function(hb){return ra[hb||ha]||false;},setLoadingCreateComposerAttachment:function(hb,ib){ra[ib||ha]=hb;this.emit('composerChange');},getLoadingEditComposerAttachment:function(hb){return sa[hb]||false;},setLoadingEditComposerAttachment:function(hb,ib){sa[ib]=hb;this.emit('composerChange');},setCreateComposerState:function(hb,ib){ua[ib||ha]=hb;this.emit('composerChange');},getCreateComposerState:function(hb){return ua[hb||ha]||null;},getCreateComposerContent:function(hb){return this._editorStateToComposerPayload(this.getCreateComposerState(hb));},isEmptyCreateComposer:function(hb){return this.getLoadingCreateComposerAttachment(hb)||this.getCreateComposerContent(hb).visibleValue.trim()===''&&!this.getCreateComposerAttachment(hb);},setEditComposerState:function(hb,ib){va[ib]=hb;this.emit('composerChange');},getEditComposerState:function(hb){return va[hb];},getEditComposerContent:function(hb){return this._editorStateToComposerPayload(this.getEditComposerState(hb));},isEmptyEditComposer:function(hb){return this.getLoadingEditComposerAttachment(hb)||this.getEditComposerContent(hb).visibleValue.trim()===''&&!this.getEditComposerAttachment(hb);},hasTextChanged:function(hb,ib){return hb.trim()!==ib.trim();},hasAttachmentChanged:function(hb,ib){if(hb){return ib?hb.fbid!==ib.fbid:true;}else return !!ib;},hasCommentChanged:function(hb,ib){var jb=this.getByID(hb);return this.hasTextChanged(ib.encodedValue,jb.body.text)||this.hasAttachmentChanged(qa[hb],jb.photo_comment||jb.attachment);},_editorStateToComposerPayload:function(hb){if(!hb)return ia;var ib=hb.getCurrentContent(),jb=ba(ib),kb=aa(ib);return {visibleValue:jb,encodedValue:kb};},hasAttachment:function(){var hb=Object.keys(ra);for(var ib=0;ib<hb.length;ib++)if(ra[hb[ib]]||pa[hb[ib]])return true;return false;},getActorIDs:function(){return Object.keys(na.actors);},getModerateURL:function(){return na.moderateURL;},isLoggedIn:function(){return na.user.id!==fb.LOGGED_OUT_USER;},isPlatformEnabled:function(hb){return na.actorsOptIn[hb];},isMobile:function(){return na.isMobile;},useLegacyMentionsInput:function(){return this.isMobile()||!this.isLoggedIn();},useCustomActorSelector:function(){return this.isMobile()||document.body.offsetWidth<450;},isViewerModerator:function(){return na.isModerator;},isThreadClosed:function(){return na.threadClosed;},shouldSwitchAccount:function(){return na.shouldSwitchAccount;},hasUnloadedComments:function(){return !!na.afterCursor;},hasUnloadedReplies:function(hb){var ib=this.getByID(hb).public_replies;if(!ib)return false;if(ib.afterCursor)return true;if((!ib.commentIDs||ib.commentIDs.length===0)&&ib.totalCount>0)return true;return false;},getUnloadedCommentsCount:function(){return na.totalCount-la.length;},getDialogWidth:function(){return Math.min(document.body.offsetWidth-10,this.isMobile()?320:445);},dispatcherIndex:p.register(function(hb){za(hb.action);bb(hb);}),init:function(hb,ib,jb,kb){na=ib;this.updateCommentData(hb,jb);Object.keys(na.actors).forEach(function(lb){return ma[lb]=na.actors[lb];});this.setActor(na.userID);ta.ranking_allowed=kb;},updateCommentData:function(hb,ib){la=hb.commentIDs;Object.assign(ma,this.initComments(la,hb.idMap));ta.ordering=ib;},initComment:function(hb){hb.collapsed=false;hb.editor=false;hb.composer=false;hb.deleted=false;hb.flagged=false;return hb;},initComments:function(hb,ib){hb.forEach(function(jb){return ib[jb]=this.initComment(ib[jb]);}.bind(this));return ib;},emit:undefined,addListener:undefined,removeCurrentListener:undefined,ActionHandler:undefined};da(fb,ja);var gb={ban:function(hb){var ib=fb.getByID(hb);ib.deleted=true;fb.emit('change');var jb=i.getURIBuilder().setString('comment_id',hb).getURI();new h(jb).setMethod('POST').setData({ban:true,source:n.URL}).send();},hide:function(hb){var ib=fb.getByID(hb);ib.deleted=true;fb.emit('change');var jb=t.getURIBuilder().setInt('url_id',na.targetFBID).setEnum('action',m.DELETE).setEnum('type',o.APPROVED).getURI();new h(jb).setData({comment_ids:[hb]}).setMethod('POST').send();},addComment:function(){var hb=fb.getCreateComposerContent(),ib=this._getAttachmentFBID(fb.getCreateComposerAttachment()),jb=j.getURIBuilder().setInt('target_id',na.targetFBID).getURI();new h(jb).setData({app_id:na.appID,av:fb.getUser().id,text:hb.encodedValue,attached_photo_fbid:ib.photoFBID,attached_sticker_fbid:ib.stickerFBID,post_to_feed:fb.getPostToFeed(),iframe_referer:na.iframeReferer}).setMethod('POST').setHandler(function(kb){var lb=kb.payload,mb=lb.commentID;this._prependComment(lb.idMap[mb]);delete ua[ha];fb.emit('composerCommentAdded',{});eb('comment.create',{commentID:mb,message:hb.visibleValue});if(lb.sentryAction)fb.emit('sentryAction',lb.sentryAction,mb);}.bind(this)).setErrorHandler(function(kb){delete ma[ha];la.shift();fb.updateCommentsCount(-1);fb.emit('change');fb.emit('postError',kb);}).send();this._prependComment({authorID:na.user.id,targetID:na.targetFBID,body:{text:hb.visibleValue}});fb.updateCommentsCount(1);},addReply:function(hb){var ib=fb.getCreateComposerContent(hb),jb=this._getAttachmentFBID(fb.getCreateComposerAttachment(hb)),kb=k.getURIBuilder().setString('parent_comment_id',hb).getURI(),lb=ha+fa();new h(kb).setData({app_id:na.appID,av:fb.getUser().id,text:ib.encodedValue,attached_photo_fbid:jb.photoFBID,attached_sticker_fbid:jb.stickerFBID,iframe_referer:na.iframeReferer,replied_to:fb.getByID(hb).replyToCommentID}).setMethod('POST').setHandler(function(ob){var pb=fb.getByID(hb),qb=Object.assign({},pb.public_replies);Object.assign(ma,ob.payload.idMap);pb=fb.getByID(hb);pb.public_replies=qb;delete ma[lb];delete ua[hb];la.splice(la.indexOf(lb),1);pb.composer=false;delete pb.replyToCommentID;pb.public_replies.commentIDs.pop();pb.public_replies.commentIDs.push(ob.payload.commentID);eb('comment.create',{commentID:ob.payload.commentID,parentCommentID:hb,message:ib.visibleValue});fb.emit('change');}).setErrorHandler(function(ob){delete ma[lb];la.splice(la.indexOf(lb),1);mb=fb.getByID(hb);mb.public_replies.commentIDs.pop();mb.public_replies.totalCount--;mb.composer=false;delete mb.replyToCommentID;fb.emit('change');fb.emit('postError',ob);}).send();var mb=fb.getByID(hb),nb=Object.assign({},mb.public_replies);if(!nb.commentIDs)nb.commentIDs=[];if(!nb.totalCount)nb.totalCount=0;nb.totalCount++;nb.commentIDs.push(lb);mb.public_replies=nb;ma[lb]={authorID:na.user.id,body:{text:ib.visibleValue},targetID:hb,id:lb};la.push(lb);fb.emit('change');},_prependComment:function(hb){if(!hb.id){hb.id=ha;}else{la.shift();delete ma[ha];}la.unshift(hb.id);ma[hb.id]=fb.initComment(hb);fb.emit('change');},_getAttachmentFBID:function(hb){var ib=0,jb=0;if(hb)if(hb.attachmentType==='photo'){ib=ea(hb.fbid);}else if(hb.attachmentType==='sticker')jb=ea(hb.fbid);return {photoFBID:ib,stickerFBID:jb};},edit:function(hb,ib){var jb=fb.getByID(hb);jb.editor=true;jb.prefillText=ib;fb.emit('change');},saveEdit:function(hb){var ib=JSON.parse(JSON.stringify(fb.getByID(hb))),jb=q.getURIBuilder().getURI(),kb=fb.getEditComposerContent(hb),lb=this._getAttachmentFBID(fb.getEditComposerAttachment(hb)),mb=fb.hasCommentChanged(hb,kb);if(mb){new h(jb).setMethod('POST').setData({app_id:na.appID,text:kb.encodedValue,comment_id:hb,av:fb.getAuthor(hb).id,attached_photo_fbid:lb.photoFBID,attached_sticker_fbid:lb.stickerFBID,iframe_referer:na.iframeReferer}).setHandler(function(ob){var pb=ob.payload;ma[pb.commentID]=fb.initComment(pb.idMap[pb.commentID]);delete va[hb];fb.emit('change');}).setErrorHandler(function(ob){ib.editor=false;Object.assign(fb.getByID(hb),ib);fb.emit('change');fb.emit('postError',ob);}).send();var nb=fb.getByID(hb);nb.editor=false;nb.body.text=kb.visibleValue;if(lb.photoFBID===0)delete nb.photo_comment;if(lb.stickerFBID===0)delete nb.attachment;delete nb.ranges;fb.emit('change');}else this.cancelEdit(hb);},cancelEdit:function(hb){var ib=fb.getByID(hb);ib.editor=false;fb.emit('change');},'delete':function(hb){var ib=fb.getByID(hb);ib.deleted=true;var jb=l.getURIBuilder().getURI();new h(jb).setData({app_id:na.appID,comment_id:hb,av:fb.getAuthor(hb).id,iframe_referer:na.iframeReferer}).setMethod('POST').setHandler(function(){return (eb('comment.remove',{commentID:hb}));}).setErrorHandler(function(kb){var lb=fb.getByID(hb);lb.deleted=false;fb.updateCommentsCount(1);fb.emit('change');}).send();fb.updateCommentsCount(-1);fb.emit('change');},like:function(hb){var ib=fb.getByID(hb),jb=s.getURIBuilder().setBool('action_like',!ib.hasLiked).getURI();new h(jb).setData({app_id:na.appID,comment_id:ib.id,iframe_referer:na.iframeReferer}).setMethod('POST').setHandler(function(kb){var lb=kb.payload;Object.assign(ma[lb.commentID],fb.initComment(lb.idMap[lb.commentID]));fb.emit('change');}).setErrorHandler(function(kb){ib.likeCount--;ib.hasLiked=false;fb.emit('postError',kb);}).send();ib.hasLiked=!ib.hasLiked;if(ib.hasLiked){ib.likeCount++;}else if(ib.likeCount>0)ib.likeCount--;ma[ib.id]=ib;fb.emit('change');},sort:function(hb){var ib=v.getURIBuilder().setInt('target_id',na.targetFBID).setEnum('ordering',hb).getURI();new h(ib).setMethod('POST').setData({app_id:na.appID,limit:fb.getPageSize(),iframe_referer:na.iframeReferer}).setHandler(function(jb){var kb=jb.payload;na.afterCursor=kb.afterCursor;fb.updateCommentData(kb,hb);fb.emit('sortingCompleted');fb.emit('change');}).send();},showMoreComments:function(){var hb=v.getURIBuilder().setInt('target_id',na.targetFBID).setEnum('ordering',fb.getCurrentSorting()).getURI();new h(hb).setMethod('POST').setData({app_id:na.appID,after_cursor:na.afterCursor,limit:fb.getPageSize(),deeplinked_comment_id:na.deeplinkedCommentID,iframe_referer:na.iframeReferer}).setHandler(function(ib){var jb=ib.payload;na.afterCursor=jb.afterCursor;la=la.concat(jb.commentIDs).filter(db);Object.assign(ma,fb.initComments(jb.commentIDs,jb.idMap));fb.emit('moreCommentsCompleted');fb.emit('change');}).setErrorHandler(function(ib){fb.emit('postError',ib);fb.emit('moreCommentsCompleted');}).send();},setUser:function(hb){fb.setActor(hb);fb.emit('actorChange');},setPostToFeed:function(hb){fb.setPostToFeed(hb);},showMoreReplies:function(hb){var ib=w.getURIBuilder().setString('comment_id',hb).getURI(),jb=fb.getByID(hb).public_replies;new h(ib).setMethod('POST').setData({app_id:na.appID,after_cursor:jb.afterCursor,limit:fb.getPageSize(),iframe_referer:na.iframeReferer}).setHandler(function(kb){var lb=kb.payload;ma=Object.assign(fb.initComments(lb.commentIDs,lb.idMap),ma);jb.afterCursor=lb.afterCursor;jb.commentIDs=jb.commentIDs.concat(lb.commentIDs).filter(db);fb.emit('moreRepliesCompleted',{commentID:hb});fb.emit('change');}).setErrorHandler(function(kb){fb.emit('postError',kb);fb.emit('moreRepliesCompleted',{commentID:hb});}).send();},toggleVisibility:function(hb){var ib=fb.getByID(hb);ib.collapsed=!ib.collapsed;fb.emit('change');},flag:function(hb){ma[hb].flagged=true;this._sendFlagOrUnflagRequest(hb,'flag');fb.emit('change');},unflag:function(hb){ma[hb].flagged=false;this._sendFlagOrUnflagRequest(hb,'unflag');fb.emit('change');},_sendFlagOrUnflagRequest:function(hb,ib){var jb=r.getURIBuilder().getURI();new h(jb).setData({app_id:na.appID,comment_id:hb,iframe_referer:na.iframeReferer,unflag:ib==='unflag'}).setMethod('POST').setErrorHandler(function(kb){ma[hb].flagged=!ma[hb].flagged;fb.emit('postError',kb);}).send();},report:function(hb){window.open(fb.getByID(hb).reportURI,'_blank');},showReplyComposer:function(hb,ib){var jb=fb.getByID(hb);if(fb.isReply(hb)){var kb=hb;jb=fb.getByID(jb.targetID);jb.replyToCommentID=kb;}jb.prefillText=ib;jb.composer=true;fb.emit('change');},cancelReply:function(hb){var ib=fb.getByID(hb);ib.composer=false;delete ib.replyToCommentID;fb.emit('change');},restorePreviousState:function(){var hb=z.getSessionStorage();if(hb){var ib=JSON.parse(hb.getItem('previousState'));hb.clear();var jb=fb.getCommentIDs();if(ib.action){var kb={};kb.action=ib.action;kb.args=ib.commentIDs;bb(kb);}var lb=ib.replies,mb=ib.edits;jb.map(function(nb){if(lb[nb])this.showReplyComposer(nb,lb[nb]);if(mb[nb])this.edit(nb,mb[nb]);}.bind(this));if(ib.commentBody)fb.emit('previousComposerCommentPrefill',{prefillText:ib.commentBody});if(ib.postToFeed){this.setPostToFeed(ib.postToFeed);fb.emit('previousPostToFeedPrefill');}}}};fb.ActionHandler=gb;f.exports=fb;},null);
__d('CommentsPluginAction',['fbt'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i={EDIT:'edit',DELETE:'delete',FLAG:'flag',SETUSER:'setUser',BAN:'ban',HIDE:'hide',REPORT:'report',COLLAPSE:'collapse',getLabel:function(j){switch(j){case i.COLLAPSE:return h._("Collapse comment");case i.EDIT:return h._("Edit comment");case i.DELETE:return h._("Delete comment");case i.FLAG:return h._("Mark as spam");case i.BAN:return h._("Ban user");case i.HIDE:return h._("Hide comment");case i.REPORT:return h._("Report to Facebook");case i.SETUSER:return h._("Switch Accounts");}},getMenuActions:function(){return [i.COLLAPSE,i.EDIT,i.DELETE,i.FLAG,i.BAN,i.HIDE,i.REPORT];}};f.exports=i;},null);
__d('MixinCommentsPluginConfirmAction',['CommentsPluginAction','CommentsPluginActions','CommentsPluginStore','React','Set','XUIDialog.react','XUIDialogBody.react','XUIDialogButton.react','XUIDialogCancelButton.react','XUIDialogFooter.react','XUIDialogTitle.react','fbt','invariant'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){'use strict';if(c.__markCompiled)c.__markCompiled();var u=120,v={componentWillMount:function(){this.setState({actionConfirmationShown:false,action:null,id:null,pageY:null});},requiresConfirmation:function(w){var x=new l([h.DELETE,h.BAN,h.HIDE]);return x.has(w);},confirmAction:function(w,x,y){this.setState({actionConfirmationShown:true,action:w,id:x,pageY:y});},_onActionConfirmed:function(){i[this.state.action](this.state.id);this.setState({actionConfirmationShown:false});},_onActionCancelled:function(){this.setState({actionConfirmationShown:false});},_getActionMetadata:function(w){switch(w){case h.DELETE:return {body:s._("Are you sure you want to delete this comment?"),button_label:s._("Confirm Delete")};case h.BAN:return {body:s._("Are you sure you want to ban this user?"),button_label:s._("Confirm Ban")};case h.HIDE:return {body:s._("Are you sure you want to hide this comment?"),button_label:s._("Confirm Hide")};case h.SETUSER:return {body:s._("Commenting as another account will clear the attachments you've uploaded."),button_label:s._("Switch Accounts")};default:t(0);}},renderActionConfirmationDialog:function(){var w=this.state.action;if(!w)return null;var x=this._getActionMetadata(w);return (k.createElement(m,{shown:this.state.actionConfirmationShown,fixedTopPosition:this.state.pageY+u<document.body.offsetHeight?this.state.pageY-u/2:null,width:j.getDialogWidth()},k.createElement(r,{showCloseButton:false},h.getLabel(w)),k.createElement(n,null,x.body),k.createElement(q,null,k.createElement(p,{onClick:this._onActionCancelled.bind(this)}),k.createElement(o,{use:'confirm',label:x.button_label,onClick:this._onActionConfirmed.bind(this)}))));}};f.exports=v;},null);
__d('CommentsPluginAuthorSelector.react',['ActorSelector.react','CommentsPluginAction','CommentsPluginActions','CommentsPluginStore','MixinCommentsPluginConfirmAction','React','ShortProfiles','XUIText.react','classWithMixins','cx','fbt','joinClasses','mixin'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){'use strict';var u,v;if(c.__markCompiled)c.__markCompiled();u=babelHelpers.inherits(w,p(m.Component,t(l)));v=u&&u.prototype;function w(x){v.constructor.call(this,x);var y=this;y.$CommentsPluginAuthorSelector1=this.$CommentsPluginAuthorSelector1.bind(this);this.actorIDs=k.getActorIDs();this.state={actorsData:null};}w.prototype.componentWillMount=function(){if(this.actorIDs.length>1&&k.useCustomActorSelector())n.getMulti(this.actorIDs,function(x){this.setState({actorsData:x});}.bind(this));};w.prototype.$CommentsPluginAuthorSelector1=function(x){if(k.hasAttachment()){this.confirmAction(i.SETUSER,x);}else j.setUser(x);};w.prototype.$CommentsPluginAuthorSelector2=function(x){return r._("Commenting as {actorName}",[r.param('actorName',x)]);};w.prototype.render=function(){if(this.actorIDs.length<=1)return null;var x=k.getUser().id;if(k.useCustomActorSelector()){var y=this.state.actorsData;if(!y)return null;return (m.createElement('div',{className:"_3-95"},m.createElement(o,{size:'small',className:"_1y5f _2pih"},r._("Commenting as")),m.createElement('select',{value:x,onChange:function(z){return this.$CommentsPluginAuthorSelector1(z.target.value);}.bind(this),className:"_1y5g"},this.actorIDs.map(function(z){return (m.createElement('option',{value:z,key:z},y&&y[z].name));})),this.renderActionConfirmationDialog()));}return (m.createElement('div',{className:s(this.props.className,'inlineBlock')},m.createElement(h,{actorIDs:this.actorIDs,coverEnabled:false,selectedActorID:x,onChange:function(z){return this.$CommentsPluginAuthorSelector1(z.value);}.bind(this),tooltipConstructor:this.$CommentsPluginAuthorSelector2}),this.renderActionConfirmationDialog()));};f.exports=w;},null);
__d('CommentsPluginComposerMirroringNotice.react',['CommentsPluginStore','React','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';var l,m;if(c.__markCompiled)c.__markCompiled();var n=i.PropTypes;l=babelHelpers.inherits(o,i.Component);m=l&&l.prototype;o.prototype.render=function(){var p=h.getMirroredPage();if(!p)return null;return (i.createElement('div',{className:"_5sge _2ph-"},p.name?this.props.isReply?k._("Your reply may also appear on {page name}'s Facebook Page.",[k.param('page name',i.createElement('a',{href:p.uri,target:'blank'},p.name))]):k._("Your comment may also appear on {page name}'s Facebook Page.",[k.param('page name',i.createElement('a',{href:p.uri,target:'blank'},p.name))]):this.props.isReply?k._("Your reply may also appear on Facebook."):k._("Your comment may also appear on Facebook.")));};function o(){l.apply(this,arguments);}o.propTypes={isReply:n.bool};f.exports=o;},null);
__d('CommentsPluginProfilePicture.react',['Image.react','React','cx'],function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l;if(c.__markCompiled)c.__markCompiled();var m=i.PropTypes;k=babelHelpers.inherits(n,i.Component);l=k&&k.prototype;n.prototype.render=function(){return (i.createElement('a',babelHelpers['extends']({},this.props,{href:this.props.href}),i.createElement(h,{className:(!this.props.isReply?"_1ci":'')+(this.props.isReply?' '+"_1cj":''),src:this.props.src})));};function n(){k.apply(this,arguments);}n.propTypes={href:m.string.isRequired,src:m.string.isRequired,isReply:m.bool};f.exports=n;},null);
__d('CommentsPluginComposer.react',['ActorURI','AsyncRequest','CommentsPluginStore','CommentsPluginComposerMirroringNotice.react','CommentsPluginConfig','CommentsPluginProfilePicture.react','DraftEntity','EditorState','EmoticonsList','MentionsInput.react','React','UFIAttachMediaSection.react','UFIAttachedMediaPreview.react','UFICommentUtils.react','UFIImageBlock.react','UFIStickerButton.react','XUINotice.react','XUITypeaheadView.react','createEditorStateWithEntities','cx','fbt','getMentionsInputDecorator','getVisibleValueForContentState','insertEmoticonIntoEditorState','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa){'use strict';var ga,ha;if(c.__markCompiled)c.__markCompiled();var ia=r.PropTypes,ja=19,ka='/ajax/ufi/sticker_preview/';function la(na){return n.create('MENTION','IMMUTABLE',{id:na.id});}ga=babelHelpers.inherits(ma,r.Component);ha=ga&&ga.prototype;function ma(na,oa){ha.constructor.call(this,na,oa);this.state=this.$CommentsPluginComposer1();var pa=this;pa.$CommentsPluginComposer2=this.$CommentsPluginComposer2.bind(this);pa.$CommentsPluginComposer3=this.$CommentsPluginComposer3.bind(this);}ma.prototype.$CommentsPluginComposer1=function(na){var oa=null,pa=null,qa=na||this.props.prefillText;if(qa){oa=this.$CommentsPluginComposer4(qa);if(this.props.editCommentID){j.setEditComposerState(oa,this.props.editCommentID);}else j.setCreateComposerState(oa,this.props.parentCommentIDOfNewReply);}else{var ra=null,sa=null;if(this.props.editCommentID){pa=j.getByID(this.props.editCommentID);oa=z({text:pa.body.text,ranges:u.shallowCopyRanges(pa.ranges).filter(function(va){return !va.entity.external;}),decorator:ca(),entityCreationFn:la});if(pa.photo_comment){ra=pa.photo_comment;ra.attachmentType='photo';this.$CommentsPluginComposer5(ra);}else if(pa.attachment){sa=pa.attachment;sa.attachmentType='sticker';this.$CommentsPluginComposer5(sa);}}else if(this.props.parentCommentIDOfNewReply){pa=j.getByID(this.props.parentCommentIDOfNewReply);if(pa.replyToCommentID&&j.getAuthor(pa.replyToCommentID).id!==j.getUser().id){var ta=j.getAuthor(pa.replyToCommentID),ua={id:ta.id,text:ta.name,offset:0,length:ta.name.length,entity:{id:ta.id}};oa=o.moveFocusToEnd(z({text:ta.name+' ',ranges:[ua],decorator:ca(),entityCreationFn:la}));}}if(!oa)oa=o.createEmpty(ca());}return {editorState:oa,expanded:qa||!!this.props.alwaysExpanded,attachedPhoto:ra,attachedSticker:sa};};ma.prototype.$CommentsPluginComposer4=function(na){return z({text:na,decorator:ca()});};ma.prototype.$CommentsPluginComposer6=function(){return !this.props.editCommentID&&!this.props.parentCommentIDOfNewReply;};ma.prototype.$CommentsPluginComposer5=function(na){if(this.props.editCommentID){j.setEditComposerAttachment(na,this.props.editCommentID);}else j.setCreateComposerAttachment(na,this.props.parentCommentIDOfNewReply);};ma.prototype.$CommentsPluginComposer7=function(na){if(this.props.editCommentID){j.setLoadingEditComposerAttachment(na,this.props.editCommentID);}else j.setLoadingCreateComposerAttachment(na,this.props.parentCommentIDOfNewReply);};ma.prototype.$CommentsPluginComposer8=function(){if(this.props.editCommentID){return j.getLoadingEditComposerAttachment(this.props.editCommentID);}else return j.getLoadingCreateComposerAttachment(this.props.parentCommentIDOfNewReply);};ma.prototype.$CommentsPluginComposer9=function(){return this.state.isLoadingAttachment||!!this.state.attachedSticker||!!this.state.attachedPhoto;};ma.prototype.getPhotoUploadData=function(){var na=j.getUser().id,oa={profile_id:na,target_id:this.props.targetID,source:ja};oa[h.PARAMETER_ACTOR]=na;return oa;};ma.prototype.onPhotoUploadComplete=function(na){if(!this.$CommentsPluginComposer8())return;var oa=na.getPayload();if(oa&&oa.fbid){oa.attachmentType='photo';this.$CommentsPluginComposer5(oa);this.$CommentsPluginComposer7(false);this.setState({attachedPhoto:oa,isLoadingAttachment:false,expanded:true});}else this.resetAttachment(null);};ma.prototype.onStickerSelected=function(na){this.$CommentsPluginComposer10();new i(ka).setData({sticker_id:na}).setErrorHandler(this.resetAttachment.bind(this)).setHandler(this.$CommentsPluginComposer11.bind(this)).send();};ma.prototype.$CommentsPluginComposer11=function(na){if(!this.$CommentsPluginComposer8())return;var oa=na.getPayload();if(oa&&oa.fbid){oa.attachmentType='sticker';this.$CommentsPluginComposer5(oa);this.$CommentsPluginComposer7(false);this.setState({attachedSticker:oa,isLoadingAttachment:false,expanded:true});}else this.resetAttachment(null);};ma.prototype.insertEmoticonToCommentText=function(na){var oa=p.symbols[na];if(!oa)return;var pa=ea(oa,this.state.editorState);if(pa!==this.state.editorState)this.$CommentsPluginComposer2(pa);};ma.prototype.resetAttachment=function(event){this.$CommentsPluginComposer5(undefined);this.$CommentsPluginComposer7(false);this.setState({attachedPhoto:null,attachedSticker:null,isLoadingAttachment:false});};ma.prototype.$CommentsPluginComposer10=function(){this.$CommentsPluginComposer5(undefined);this.$CommentsPluginComposer7(true);this.setState({attachedSticker:null,attachedPhoto:null,isLoadingAttachment:true});};ma.prototype.componentDidMount=function(){j.addListener('composerCommentAdded',function(event){if(this.$CommentsPluginComposer6()){var na=this.$CommentsPluginComposer1();na.expanded=true;this.setState(na);if(this.refs.composer.style)this.refs.composer.style.cssText='';}}.bind(this));j.addListener('previousComposerCommentPrefill',function(na){var oa=this.$CommentsPluginComposer1(na.prefillText);oa.expanded=true;this.setState(oa);}.bind(this));if(!this.$CommentsPluginComposer6())this.refs.composer.focus();};ma.prototype.$CommentsPluginComposer2=function(na){this.setState({editorState:na});if(this.props.editCommentID){j.setEditComposerState(na,this.props.editCommentID);}else j.setCreateComposerState(na,this.props.parentCommentIDOfNewReply);};ma.prototype.$CommentsPluginComposer12=function(){if(this.props.editCommentID)return j.isReply(this.props.editCommentID);return !!this.props.parentCommentIDOfNewReply;};ma.prototype.$CommentsPluginComposer3=function(){this.setState({expanded:true});};ma.prototype.setFileInput=function(na,oa){this.setState({fileInput:na,fileUploader:oa});};ma.prototype.$CommentsPluginComposer13=function(){return da(this.state.editorState.getCurrentContent());};ma.prototype.$CommentsPluginComposer14=function(na){var oa=na.target,pa=oa.value;oa.value='';oa.value=pa;this.$CommentsPluginComposer3();};ma.prototype.$CommentsPluginComposer15=function(na){var oa=na.target,pa=oa.scrollHeight;if(oa.offsetHeight<pa)oa.style.cssText='height:'+pa+'px';this.$CommentsPluginComposer2(z({text:oa.value}));};ma.prototype.$CommentsPluginComposer16=function(){var na=this.props.placeholder||ba._("Add a comment...");if(j.useLegacyMentionsInput())return (r.createElement('textarea',{className:"_1cb"+(' '+"_1u9t")+(this.props.readOnly?' '+"_5pu_":''),placeholder:na,ref:'composer',onFocus:this.$CommentsPluginComposer14.bind(this),onChange:this.$CommentsPluginComposer15.bind(this),readOnly:this.props.readOnly,value:this.$CommentsPluginComposer13()}));return (r.createElement(q,{className:"_1cb"+(this.props.readOnly?' '+"_5pu_":''),editorState:this.state.editorState,mentionsSource:j.getComposerSearchSource(),onChange:this.$CommentsPluginComposer2,onFocus:this.$CommentsPluginComposer3,placeholder:na,readOnly:this.props.readOnly,typeaheadView:y,ref:'composer'}));};ma.prototype.render=function(){var na=this.props.editCommentID?j.getAuthor(this.props.editCommentID):na=j.getUser(),oa=this.$CommentsPluginComposer12();return (r.createElement(v,{spacing:'medium',className:fa("_4uyl"+(oa?' '+"_1zz6":'')+(!this.state.expanded?' '+"_1zz7":'')+(!!this.state.expanded?' '+"_1zz8":''),this.props.className)},j.useCustomActorSelector()?r.createElement('div',null):r.createElement(m,{href:na.uri,src:na.thumbSrc,isReply:oa,target:'_blank'}),r.createElement('div',null,r.createElement('div',{className:'UFIInputContainer'},this.$CommentsPluginComposer16(),r.createElement('div',{className:"UFICommentAttachmentButtons"+(' '+"clearfix")+(!(l.commentsPluginZemeckisAttachments&&j.isPlatformEnabled(na.id)&&j.isLoggedIn()&&!this.$CommentsPluginComposer9())?' '+"hidden_elem":'')},this.props.allowPhotoAttachments?r.createElement(s,{onPhotoUploadComplete:this.onPhotoUploadComplete.bind(this),getPhotoUploadData:this.getPhotoUploadData.bind(this),prepareForAttachedPhotoPreview:this.$CommentsPluginComposer10.bind(this),setFileInput:this.setFileInput.bind(this),attachment:this.state.attachedPhoto}):null,this.props.allowStickerAttachments?r.createElement(w,{onStickerSelected:this.onStickerSelected.bind(this),onEmoticonSelected:this.insertEmoticonToCommentText.bind(this)}):null)),r.createElement(t,{attachedPhoto:this.state.attachedPhoto,attachedSticker:this.state.attachedSticker,onRemoveAttachedMediaPreviewClicked:this.resetAttachment.bind(this),onRemoveAttachedStickerPreview:this.resetAttachment.bind(this),isLoadingPhoto:this.state.isLoadingAttachment}),this.props.unableToPost?r.createElement(x,{use:'warn'},ba._({"*":"Comments must be less than {lengthLimit} characters"},[ba.param('lengthLimit',j.getMaxCommentLength(),[0])])):null,this.state.expanded?r.createElement('div',{className:"_4uym"},r.createElement(k,{isReply:oa}),this.props.children):null)));};ma.propTypes={editCommentID:ia.string,parentCommentIDOfNewReply:ia.string,readOnly:ia.bool,placeholder:ia.node,alwaysExpanded:ia.bool,unableToPost:ia.bool,allowStickerAttachments:ia.bool,allowPhotoAttachments:ia.bool};f.exports=ma;},null);
__d('CommentsPluginComposerComment.react',['CommentsPluginActions','CommentsPluginAuthorSelector.react','CommentsPluginComposer.react','CommentsPluginStore','Grid.react','InputLabel.react','LeftRight.react','React','XUIButton.react','XUICheckboxInput.react','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){'use strict';var t,u;if(c.__markCompiled)c.__markCompiled();var v=l.GridItem;t=babelHelpers.inherits(w,o.Component);u=t&&t.prototype;function w(x){u.constructor.call(this,x);this.state={selectedActorID:k.getUser().id,postToFeed:false,ablePostToFeed:false,commentLength:0,waitingAsyncResponse:false,unableToPost:false};var y=this;y.$CommentsPluginComposerComment1=this.$CommentsPluginComposerComment1.bind(this);y.$CommentsPluginComposerComment2=this.$CommentsPluginComposerComment2.bind(this);}w.prototype.componentDidMount=function(){k.addListener('composerChange',function(){var x=k.getCreateComposerContent().visibleValue,y=x.trim().length;this.setState({commentLength:y,ablePostToFeed:y>=k.getMinFeedLength(),unableToPost:y>k.getMaxCommentLength()});}.bind(this));k.addListener('composerCommentAdded',function(){this.setState({waitingAsyncResponse:false});this.refs.composer.resetAttachment();}.bind(this));k.addListener('login',function(){this.setState({waitingAsyncResponse:false});}.bind(this));k.addListener('actorChange',function(){this.refs.composer.resetAttachment();this.forceUpdate();}.bind(this));k.addListener('previousPostToFeedPrefill',function(){this.setState({postToFeed:k.getPostToFeed()});}.bind(this));};w.prototype.$CommentsPluginComposerComment2=function(event){var x=!this.state.postToFeed;this.setState({postToFeed:x});h.setPostToFeed(x);};w.prototype.$CommentsPluginComposerComment1=function(){if(k.isLoggedIn())this.setState({waitingAsyncResponse:true});h.setPostToFeed(this.state.postToFeed);h.addComment();};w.prototype.$CommentsPluginComposerComment3=function(){return (this.state.waitingAsyncResponse||this.state.unableToPost||k.isEmptyCreateComposer());};w.prototype.render=function(){var x=k.isLoggedIn()?s._("Post"):s._("Log In to Post"),y=k.getMinFeedLength()-this.state.commentLength;return (o.createElement(j,{allowPhotoAttachments:k.getEnablePhoto(),allowStickerAttachments:k.getEnableSticker(),ref:'composer',className:"_2392",readOnly:this.state.waitingAsyncResponse,unableToPost:this.state.unableToPost},o.createElement(n,{className:"_5tr6 clearfix _2ph-"},!k.isMirrored()?o.createElement(l,{cols:1},o.createElement(v,null,o.createElement(m,{className:"_1u0n"},o.createElement(q,{checked:this.state.postToFeed,onChange:this.$CommentsPluginComposerComment2}),o.createElement('label',{className:"_3-99 _2ern _50f8 _5kx5"},s._("Also post on Facebook")))),o.createElement(v,null,this.state.postToFeed&&!this.state.ablePostToFeed?s._({"*":{"character":"Write {lengthRemain} more character to post to Facebook","characters":"Write {lengthRemain} more characters to post to Facebook"}},[s.param('lengthRemain',y,[0]),s['enum'](y===1?'character':'characters',{character:'character',characters:'characters'})]):o.createElement('span',null))):o.createElement('span',null),o.createElement('span',null,o.createElement(i,null),o.createElement(p,{disabled:this.$CommentsPluginComposerComment3(),label:x,use:'confirm',className:"rfloat _3-99",onClick:this.$CommentsPluginComposerComment1})))));};f.exports=w;},null);
__d('CommentsPluginFooter.react',['ImageBlock.react','React','XDeveloperDocumentationController','cx'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';var l,m;if(c.__markCompiled)c.__markCompiled();l=babelHelpers.inherits(n,i.Component);m=l&&l.prototype;n.prototype.render=function(){return (i.createElement('div',{className:"_5lm5 _2pi3 _3-8y"},i.createElement(h,null,i.createElement('img',{src:'/images/like/icons/fav.png'}),i.createElement('a',{target:'_blank',href:j.getURIBuilder().setString('path1','plugins').setString('path2','comments').getURI().setSubdomain('developers')},'Facebook Comments Plugin'))));};function n(){l.apply(this,arguments);}f.exports=n;},null);
__d('CommentsPluginHeader.react',['CommentsPluginActions','CommentsPluginStore','DeveloperCommentsPluginOrdering','LeftRight.react','Link.react','React','XUISelector.react','XUISpinner.react','XUIText.react','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){'use strict';var s,t;if(c.__markCompiled)c.__markCompiled();var u=n.Option;s=babelHelpers.inherits(v,m.Component);t=s&&s.prototype;function v(w){t.constructor.call(this,w);this.state={sorting:false};var x=this;x.$CommentsPluginHeader1=this.$CommentsPluginHeader1.bind(this);}v.prototype.$CommentsPluginHeader1=function(event){this.setState({sorting:true});i.addListener('sortingCompleted',function(){this.setState({sorting:false});i.removeCurrentListener();}.bind(this));h.sort(event.value);};v.prototype.componentDidMount=function(){i.addListener('commentsCountChange',function(){this.forceUpdate();}.bind(this));};v.prototype.render=function(){var w=null,x=null;if(i.getModerateURL())w=m.createElement('span',null,m.createElement('span',{className:"_52bm"},'|'),m.createElement(l,{href:i.getModerateURL(),target:'_blank'},r._("Moderation Tool")));if(i.isDeeplinkComment())x=m.createElement('span',null,m.createElement('span',{className:"_52bm"},'|'),m.createElement(l,{href:i.getOriginalLink(),target:'_blank'},r._("Original Link")));var y=j.__types.filter(function(z){return z!=='social'||i.isRankingAllowed();});return (m.createElement(k,{className:"_491z"},m.createElement('span',null,m.createElement(p,{weight:'bold'},i.getCommentsCount()!==1?r._("{count} Comments",[r.param('count',i.getCommentsCount())]):r._("1 Comment")),w,x),m.createElement('div',null,this.state.sorting?m.createElement(o,{size:'small',className:"_3-90"}):null,m.createElement('span',{className:"_pup"},r._("Sort by")),' ',m.createElement(n,{alignh:'right',className:"_3-8_",initialValue:i.getCurrentSorting(),onChange:this.$CommentsPluginHeader1},y.map(function(z){return (m.createElement(u,{value:z,key:z},j.__labels[z]));})))));};f.exports=v;},null);
__d('CommentsPluginCommentActions.react',['ActionList.react','CommentsPluginAction','CommentsPluginActions','CommentsPluginStore','Image.react','Link.react','MixinCommentsPluginConfirmAction','React','UFICommentMetadata.react','classWithMixins','cx','fbt','mixin'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){'use strict';var u,v;if(c.__markCompiled)c.__markCompiled();var w=o.PropTypes;u=babelHelpers.inherits(x,q(o.Component,t(n)));v=u&&u.prototype;function x(y,z){v.constructor.call(this,y,z);var aa=this;aa.$CommentsPluginCommentActions1=this.$CommentsPluginCommentActions1.bind(this);aa.$CommentsPluginCommentActions2=this.$CommentsPluginCommentActions2.bind(this);aa.$CommentsPluginCommentActions3=this.$CommentsPluginCommentActions3.bind(this);}x.prototype.$CommentsPluginCommentActions3=function(){j.like(this.props.commentID);};x.prototype.$CommentsPluginCommentActions2=function(){j.showReplyComposer(this.props.commentID);};x.prototype.$CommentsPluginCommentActions1=function(){j.flag(this.props.commentID);};x.prototype.$CommentsPluginCommentActions4=function(y){if(!y.canLike&&k.isLoggedIn())return null;return (o.createElement(m,{onClick:this.$CommentsPluginCommentActions3},y.hasLiked?s._("Unlike"):s._("Like")));};x.prototype.$CommentsPluginCommentActions5=function(){if(k.isThreadClosed()||k.shouldSwitchAccount())return null;return (o.createElement(m,{onClick:this.$CommentsPluginCommentActions2},s._("Reply")));};x.prototype.render=function(){var y=k.getByID(this.props.commentID);return (o.createElement(h,{className:"_2vq9"},this.$CommentsPluginCommentActions4(y),this.$CommentsPluginCommentActions5(),k.isMobile()?y.canEdit?o.createElement(m,{onClick:this.confirmAction.bind(this,i.DELETE,this.props.commentID)},s._("Delete")):o.createElement(m,{onClick:this.$CommentsPluginCommentActions1},s._("Mark as spam")):null,y.likeCount?o.createElement('span',null,o.createElement(l,{src:'/images/ufi/fbfeed/like.png',className:"_3-8_ _4iy4"}),y.likeCount):null,o.createElement(p,{comment:y,permalink:k.getPermalink(this.props.commentID),shortenTimestamp:true,showPermalink:!k.isReply(this.props.commentID),permalinkTarget:'_blank'}),k.isMobile()?this.renderActionConfirmationDialog():null));};x.propTypes={commentID:w.string.isRequired};f.exports=x;},null);
__d('CommentsPluginComposerEdit.react',['CommentsPluginActions','CommentsPluginComposer.react','CommentsPluginStore','React','XUIButton.react','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';var o,p;if(c.__markCompiled)c.__markCompiled();var q=k.PropTypes;o=babelHelpers.inherits(r,k.Component);p=o&&o.prototype;function r(s,t){p.constructor.call(this,s,t);this.state={waitingAsyncResponse:false,unableToPost:false};var u=this;u.$CommentsPluginComposerEdit3=this.$CommentsPluginComposerEdit3.bind(this);u.$CommentsPluginComposerEdit4=this.$CommentsPluginComposerEdit4.bind(this);this.$CommentsPluginComposerEdit1=null;}r.prototype.componentDidMount=function(){this.$CommentsPluginComposerEdit1=j.addListener('composerChange',function(){var s=j.getEditComposerContent(this.props.commentID).visibleValue;this.setState({unableToPost:s.trim().length>j.getMaxCommentLength()});this.forceUpdate();}.bind(this));this.$CommentsPluginComposerEdit2=j.addListener('actorChange',function(){this.refs.composer.resetAttachment();this.forceUpdate();}.bind(this));};r.prototype.componentWillUnmount=function(){if(this.$CommentsPluginComposerEdit1)this.$CommentsPluginComposerEdit1.remove();if(this.$CommentsPluginComposerEdit2)this.$CommentsPluginComposerEdit2.remove();};r.prototype.$CommentsPluginComposerEdit3=function(){this.setState({waitingAsyncResponse:true});h.saveEdit(this.props.commentID);};r.prototype.$CommentsPluginComposerEdit4=function(){this.refs.composer.resetAttachment();h.cancelEdit(this.props.commentID);};r.prototype.$CommentsPluginComposerEdit5=function(){return (this.state.waitingAsyncResponse||this.state.unableToPost||j.isEmptyEditComposer(this.props.commentID));};r.prototype.render=function(){var s=j.getByID(this.props.commentID);return (k.createElement(i,{alwaysExpanded:true,ref:'composer',prefillText:s.prefillText,readOnly:this.state.waitingAsyncResponse,allowPhotoAttachments:j.getEnablePhoto(),allowStickerAttachments:j.getEnableSticker(),editCommentID:this.props.commentID,unableToPost:this.state.unableToPost},k.createElement('div',{className:"_5tr6 clearfix _2ph_"},k.createElement(l,{disabled:this.$CommentsPluginComposerEdit5(),label:n._("Save"),use:'confirm',className:"rfloat _3-99",onClick:this.$CommentsPluginComposerEdit3}),k.createElement(l,{disabled:this.state.waitingAsyncResponse,label:n._("Cancel"),use:'default',className:"rfloat _3-99",onClick:this.$CommentsPluginComposerEdit4})),this.props.children));};r.propTypes={commentID:q.string.isRequired};f.exports=r;},null);
__d('CommentsPluginComposerReply.react',['CommentsPluginActions','CommentsPluginAuthorSelector.react','CommentsPluginComposer.react','CommentsPluginStore','React','XUIButton.react','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){'use strict';var p,q;if(c.__markCompiled)c.__markCompiled();var r=l.PropTypes;p=babelHelpers.inherits(s,l.Component);q=p&&p.prototype;function s(t,u){q.constructor.call(this,t,u);this.state={waitingAsyncResponse:false,unableToPost:false};var v=this;v.$CommentsPluginComposerReply3=this.$CommentsPluginComposerReply3.bind(this);v.$CommentsPluginComposerReply4=this.$CommentsPluginComposerReply4.bind(this);this.$CommentsPluginComposerReply1=null;}s.prototype.componentDidMount=function(){this.$CommentsPluginComposerReply1=k.addListener('composerChange',function(){var t=k.getCreateComposerContent(this.props.commentID).visibleValue;this.setState({unableToPost:t.trim().length>k.getMaxCommentLength()});this.forceUpdate();}.bind(this));this.$CommentsPluginComposerReply2=k.addListener('actorChange',function(){this.refs.composer.resetAttachment();this.forceUpdate();}.bind(this));};s.prototype.componentWillUnmount=function(){if(this.$CommentsPluginComposerReply1)this.$CommentsPluginComposerReply1.remove();if(this.$CommentsPluginComposerReply2)this.$CommentsPluginComposerReply2.remove();};s.prototype.$CommentsPluginComposerReply3=function(){this.setState({waitingAsyncResponse:true});h.addReply(this.props.commentID);this.refs.composer.resetAttachment();};s.prototype.$CommentsPluginComposerReply4=function(){this.refs.composer.resetAttachment();h.cancelReply(this.props.commentID);};s.prototype.$CommentsPluginComposerReply5=function(){return (this.state.waitingAsyncResponse||this.state.unableToPost||k.isEmptyCreateComposer(this.props.commentID));};s.prototype.render=function(){var t=k.getByID(this.props.commentID);return (l.createElement(j,{allowPhotoAttachments:k.getEnablePhoto(),allowStickerAttachments:k.getEnableSticker(),ref:'composer',alwaysExpanded:true,prefillText:t.prefillText,readOnly:this.state.waitingAsyncResponse,parentCommentIDOfNewReply:this.props.commentID,unableToPost:this.state.unableToPost,placeholder:o._("Add a reply...")},l.createElement('div',{className:"_5tr6 clearfix _2ph_"},l.createElement(i,null),l.createElement(m,{disabled:this.state.waitingAsyncResponse,label:o._("Cancel"),use:'default',className:"_3-99",onClick:this.$CommentsPluginComposerReply4}),l.createElement(m,{disabled:this.$CommentsPluginComposerReply5(),label:o._("Reply"),use:'confirm',className:"_3-99",onClick:this.$CommentsPluginComposerReply3}))));};s.propTypes={commentID:r.string.isRequired};f.exports=s;},null);
__d('CommentsPluginMenu.react',['CommentsPluginAction','CommentsPluginActions','CommentsPluginStore','Image.react','MixinCommentsPluginConfirmAction','ReactXUIMenu','PopoverMenu.react','React','Tooltip','classWithMixins','fbt','ix','mixin'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){'use strict';var u,v;if(c.__markCompiled)c.__markCompiled();var w=o.PropTypes,x=m.Item;u=babelHelpers.inherits(y,q(o.Component,t(l)));v=u&&u.prototype;function y(z,aa){v.constructor.call(this,z,aa);this.state={opened:false};var ba=this;ba.$CommentsPluginMenu1=this.$CommentsPluginMenu1.bind(this);ba.$CommentsPluginMenu2=this.$CommentsPluginMenu2.bind(this);ba.$CommentsPluginMenu3=this.$CommentsPluginMenu3.bind(this);}y.prototype.isOpen=function(){return this.state.opened;};y.prototype.$CommentsPluginMenu1=function(){this.setState({opened:true});};y.prototype.$CommentsPluginMenu2=function(){this.setState({opened:false});};y.prototype.$CommentsPluginMenu4=function(){i.toggleVisibility(this.props.commentID);};y.prototype.$CommentsPluginMenu3=function(z,event){var aa=event.item.getValue();if(this.requiresConfirmation(aa)){this.confirmAction(aa,this.props.commentID,event.event.pageY);}else if(aa===h.SHOW||aa===h.COLLAPSE){this.$CommentsPluginMenu4();}else i[aa](this.props.commentID);};y.prototype.$CommentsPluginMenu5=function(z,aa){var ba=j.isReply(aa.id);switch(z){case h.DELETE:if(!aa.canEdit)return null;break;case h.EDIT:if(!aa.canEdit||j.isThreadClosed())return null;break;case h.FLAG:if(aa.canEdit||aa.collapsed||aa.flagged)return null;break;case h.COLLAPSE:if(ba||aa.collapsed||aa.flagged)return null;break;case h.BAN:case h.HIDE:if(!j.isViewerModerator())return null;break;case h.REPORT:if(!aa.reportURI)return null;break;default:break;}return (o.createElement(x,{value:z,key:z},h.getLabel(z)));};y.prototype.render=function(){var z=j.getByID(this.props.commentID);return (o.createElement('div',null,o.createElement(n,{alignh:'right',onShow:this.$CommentsPluginMenu1,onHide:this.$CommentsPluginMenu2,menu:o.createElement(m,{onItemClick:this.$CommentsPluginMenu3},h.getMenuActions().map(function(aa){return this.$CommentsPluginMenu5(aa,z);}.bind(this)))},o.createElement('a',null,o.createElement(k,babelHelpers['extends']({},p.propsFor(r._("Menu")),{src:s('/images/plugins/comments/chevron-down.png')})))),this.renderActionConfirmationDialog()));};y.propTypes={commentID:w.string.isRequired};f.exports=y;},null);
__d('CommentsPluginComment.react',['ActorBio.react','Badge.react','CenteredContainer.react','CommentsPluginActions','CommentsPluginCommentActions.react','CommentsPluginComposerEdit.react','CommentsPluginProfilePicture.react','CommentsPluginMenu.react','CommentsPluginComposerReply.react','CommentsPluginStore','HovercardLinkInterpolator','Link.react','Image.react','React','TruncatedTextWithEntities.react','UFIActor.react','UFICommentAttachment.react','UFICommentUtils.react','UFIImageBlock.react','XUIGrayText.react','XUISpinner.react','XUIText.react','cx','fbt','joinClasses','nullthrows','xuiglyph'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha){'use strict';var ia,ja,ka,la;if(c.__markCompiled)c.__markCompiled();var ma=u.PropTypes;ia=babelHelpers.inherits(na,u.Component);ja=ia&&ia.prototype;function na(pa,qa){ja.constructor.call(this,pa,qa);this.state={showMenu:false};var ra=this;ra.$CommentsPluginComment1=this.$CommentsPluginComment1.bind(this);ra.$CommentsPluginComment2=this.$CommentsPluginComment2.bind(this);ra.$CommentsPluginComment3=this.$CommentsPluginComment3.bind(this);}na.prototype.$CommentsPluginComment1=function(){this.setState({showMenu:true});};na.prototype.$CommentsPluginComment2=function(){if(!this.refs.menu||!this.refs.menu.isOpen())this.setState({showMenu:false});};na.prototype.$CommentsPluginComment3=function(){var pa=ga(q.getByID(this.props.commentID));if(pa.collapsed){k.toggleVisibility(this.props.commentID);}else if(pa.flagged)k.unflag(this.props.commentID);};na.prototype.render=function(){var pa=ga(q.getByID(this.props.commentID));if(pa.deleted)return null;if(pa.editor)return (u.createElement('div',{className:"_3-8y"},u.createElement(m,{commentID:this.props.commentID}),u.createElement(oa,{commentID:this.props.commentID,className:"_3j_p"})));var qa=y.shallowCopyRanges(pa.ranges),ra=y.getCommentTextWithTruncatedURIs(qa,pa.body.text),sa=null;if(pa.collapsed||pa.flagged){sa=u.createElement('div',{className:"_5mlf"},u.createElement(aa,{shade:'light'},ea._("This comment is {action}",[ea.param('action',pa.collapsed?'collapsed. ':'marked as spam. ')]),u.createElement(s,{onClick:this.$CommentsPluginComment3},ea._("Undo"))));}else{if(pa.photoComment){pa.photo_comment=pa.photoComment;delete pa.photoComment;}sa=u.createElement('div',{className:"_30o4"},ra?u.createElement(v,babelHelpers['extends']({className:"_5mdd",text:ra,ranges:qa,interpolator:function(xa,ya){return (r(xa,ya,'_blank'));}},q.getCommentBodyTruncationLimits(),{renderEmoticons:true,renderEmoji:true})):null,u.createElement(x,{comment:pa,disableTheater:true}));}var ta=ga(q.getByID(pa.authorID)),ua=q.isOptimisticComment(pa),va=q.isReply(this.props.commentID),wa=q.isMobile();return (u.createElement(z,{className:"_3-8y"+(!va?' '+"_5nz1":''),spacing:'medium',onMouseEnter:this.$CommentsPluginComment1,onMouseLeave:this.$CommentsPluginComment2},u.createElement(n,{href:ta.uri,src:ta.thumbSrc,isReply:va,target:'_blank'}),u.createElement('div',null,u.createElement(w,{author:ta,delimiter:wa?' ':undefined,key:'author',showHovercard:!wa,target:'_blank'},ta.isVerified?u.createElement(i,{key:'badge',size:'xsmall',type:'verified'}):null,ta.bio?u.createElement('div',{className:"_4q1v"},u.createElement(h,{target:'_blank',preferredTypes:ta.bio.preferredTypes,stats:ta.bio.stats})):null),u.createElement('div',{className:"_3-8m"},sa),ua||pa.collapsed||pa.flagged?null:u.createElement(l,{commentID:this.props.commentID}),u.createElement(oa,{commentID:this.props.commentID})),u.createElement('div',null,this.state.showMenu&&!ua&&!wa?u.createElement(o,{ref:'menu',commentID:this.props.commentID}):null)));};na.propTypes={commentID:ma.string.isRequired};ka=babelHelpers.inherits(oa,u.Component);la=ka&&ka.prototype;function oa(pa,qa){la.constructor.call(this,pa,qa);this.state={loading:false};var ra=this;ra.$CommentsPluginCommentReplies1=this.$CommentsPluginCommentReplies1.bind(this);}oa.prototype.$CommentsPluginCommentReplies1=function(){this.setState({loading:true});q.addListener('moreRepliesCompleted',function(event){if(this.props.commentID===event.commentID){this.setState({loading:false});q.removeCurrentListener();}}.bind(this));k.showMoreReplies(this.props.commentID);};oa.prototype.render=function(){var pa=q.getByID(this.props.commentID),qa=pa.public_replies;if(qa===undefined||pa.collapsed===true||pa.flagged)return pa.composer?u.createElement('div',{className:fa("_44ri _2pis _3-8y",this.props.className)},u.createElement(p,{commentID:this.props.commentID})):null;if(!qa.commentIDs)qa.commentIDs=[];var ra=qa.totalCount-qa.commentIDs.length,sa=q.getPageSize(),ta=ra<sa?ra:sa;return (u.createElement('div',{className:fa("_44ri _2pis",this.props.className)},qa.commentIDs.map(function(ua){if(ua===this.props.commentID)return null;return u.createElement(na,{commentID:ua,key:ua});}.bind(this)),q.hasUnloadedReplies(this.props.commentID)&&ra>0?u.createElement('div',{className:"_5yct _3-8y _3-96 _2ph-"},this.state.loading?u.createElement(j,null,u.createElement(ba,{size:'small'})):u.createElement(s,{onClick:this.$CommentsPluginCommentReplies1},u.createElement(ca,{size:'small',weight:'bold'},ta===1?ea._("Show 1 more reply in this thread"):ea._("Show {number of replies} more replies in this thread",[ea.param('number of replies',ta)])),u.createElement(t,{src:ha({name:'triangle-down'})}))):null,pa.composer?u.createElement('div',{className:"_3-8y"},u.createElement(p,{commentID:this.props.commentID})):null));};oa.propTypes={commentID:ma.string.isRequired};f.exports=na;},null);
__d('CommentsPluginLoadMore.react',['CenteredContainer.react','CommentsPluginActions','CommentsPluginStore','React','XUIButton.react','XUISpinner.react','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){'use strict';var p,q;if(c.__markCompiled)c.__markCompiled();p=babelHelpers.inherits(r,k.Component);q=p&&p.prototype;function r(s,t){q.constructor.call(this,s,t);this.state={loading:false};var u=this;u.$CommentsPluginLoadMore1=this.$CommentsPluginLoadMore1.bind(this);}r.prototype.$CommentsPluginLoadMore1=function(){i.showMoreComments();this.setState({loading:true});j.addListener('moreCommentsCompleted',function(){this.setState({loading:false});j.removeCurrentListener();}.bind(this));};r.prototype.render=function(){var s=j.getUnloadedCommentsCount();if(!j.hasUnloadedComments()||s<1)return null;if(this.state.loading)return (k.createElement(h,{className:"_ndl"},k.createElement(m,{size:'large'})));var t=j.getPageSize(),u=s<t?s:t;return (k.createElement('div',{className:"_5o4h"},k.createElement(l,{className:"_1gl3",role:'button',onClick:this.$CommentsPluginLoadMore1,label:u===1?o._("Load 1 more comment"):o._("Load {pagesize} more comments",[o.param('pagesize',u)])})));};f.exports=r;},null);
__d('CommentsPluginListing.react',['CommentsPluginComment.react','CommentsPluginLoadMore.react','CommentsPluginStore','React','cx'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';var m,n;if(c.__markCompiled)c.__markCompiled();m=babelHelpers.inherits(o,k.Component);n=m&&m.prototype;o.prototype.render=function(){var p=j.getCommentIDs(),q=p.map(function(r){return k.createElement(h,{commentID:r,key:r});});return (k.createElement('div',{className:"_4k-6"},q,k.createElement(i,null)));};function o(){m.apply(this,arguments);}f.exports=o;},null);
__d('CommentsPluginNotice.react',['CommentsPluginStore','React','XUINotice.react','fbt'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';var l,m;if(c.__markCompiled)c.__markCompiled();l=babelHelpers.inherits(n,i.Component);m=l&&l.prototype;n.prototype.render=function(){return (h.isThreadClosed()?i.createElement(j,{use:'notify'},k._("This thread is closed")):h.shouldSwitchAccount()?i.createElement(j,{use:'notify'},k._("Please switch to personal account to post comments.")):null);};function n(){l.apply(this,arguments);}f.exports=n;},null);
__d("XPluginCommentsConfirmPostToFacebookAsyncDialogController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/plugins\/comments\/{comment_id}\/async\/confirm\/publish\/dialog\/",{comment_id:{type:"String",required:true},plugin_width:{type:"Int"},__asyncDialog:{type:"Int"}});},null);
__d('CommentsPlugin.react',['AsyncDialog','AsyncRequest','CommentsPluginActions','CommentsPluginComposerComment.react','CommentsPluginFooter.react','CommentsPluginHeader.react','CommentsPluginListing.react','CommentsPluginNotice.react','CommentsPluginStore','XPluginCommentsConfirmPostToFacebookAsyncDialogController','DOMQuery','PluginResize','React','ReactDOM','CommentsPluginSentryAction','SimpleXUIDialog','cx','fbt','getElementPosition','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa){'use strict';var ba,ca;if(c.__markCompiled)c.__markCompiled();var da=t.PropTypes;ba=babelHelpers.inherits(ea,t.Component);ca=ba&&ba.prototype;ea.prototype.componentWillMount=function(){p.init(this.props.comments,this.props.meta,this.props.initialOrdering,this.props.rankingAllowed);p.addListener('postError',function(fa){w.show(fa.errorSummary||y._("Sorry, something went wrong. Please try again later."),null,null,{width:p.getDialogWidth()});});p.addListener('sentryAction',function(fa,ga){switch(fa){case v.CONFIRM_POST_TO_PROFILE:var ha=q.getURIBuilder().setString('comment_id',ga).setInt('plugin_width',document.body.offsetWidth).getURI();h.send(new i(ha).setData({iframe_referer:p.getIframeReferer()}));break;default:break;}});};ea.prototype.componentDidMount=function(){var fa=u.findDOMNode(this);s.autoHeight(null,fa);new s(function(){},function(){var ga=fa.offsetHeight,ha=r.scry(document.body,'.uiLayer:not(.hidden_elem) .uiContextualLayer'),ia=r.scry(document.body,'.captcha_dialog');if(ha.length===0&&ia.length===0)return ga;var ja=ha.length>0?z(ha[0]):null,ka=ia.length>0?z(ia[0]):null;return Math.max(ga,ja?ja.y+ja.height+1:0,ka?ka.height:0);},'resize.iframe',false).resize().auto();p.addListener('change',function(){this.forceUpdate();}.bind(this));if(p.isOptinReturn())j.restorePreviousState();};ea.prototype.$CommentsPlugin1=function(){return p.isThreadClosed()||p.shouldSwitchAccount();};ea.prototype.render=function(){return (t.createElement('div',{className:aa("_56q9",this.props.className)},t.createElement('div',{className:"_2pi8"},t.createElement(m,null),this.$CommentsPlugin1()?t.createElement(o,null):p.isDeeplinkComment()?null:t.createElement(k,null),t.createElement(n,null),t.createElement(l,null))));};function ea(){ba.apply(this,arguments);}ea.propTypes={comments:da.object.isRequired,meta:da.object.isRequired,initialOrdering:da.string.isRequired,rankingAllowed:da.bool};f.exports=ea;},null);