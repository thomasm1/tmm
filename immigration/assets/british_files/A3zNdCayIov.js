/*!CK:2474365222!*//*1456112509,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["xSLHf"]); }

__d('P2PMemoPhotoUploadSelector.react',['FileInput','FileInputUploader','React','ReactDOM','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n=j.PropTypes,o='/ajax/payments/p2p/memo_photo_upload/',p=1,q=29,r=j.createClass({displayName:'P2PMemoPhotoUploadSelector',propTypes:{attachedPhoto:n.object,isUploading:n.bool,onPhotoUploadComplete:n.func.isRequired,onPhotoUploadStart:n.func.isRequired},fileInput:null,_fileInputSubscription:null,componentDidMount:function(){var s=k.findDOMNode(this.refs.PhotoInputContainer),t=k.findDOMNode(this.refs.PhotoInputControl),u=k.findDOMNode(this.refs.PhotoInput);this.fileInput=new h(s,t,u);this._fileInputSubscription=this.fileInput.subscribe('change',this.handleFileInputChange);},componentWillUnmount:function(){this._fileInputSubscription&&this._fileInputSubscription.unsubscribe();},handleFileInputChange:function(){if(this.fileInput&&this.fileInput.getValue()){var s=new i(this.fileInput.getInput()).setAllowCrossPageTransition(true).setURI(o);s.subscribe(['success','failure'],function(t,u){this.props.onPhotoUploadComplete(u.response);}.bind(this));s.setData({profile_id:p,source:q}).send();this.props.onPhotoUploadStart();}},render:function(){var s=m._("Add Photo");return (j.createElement('div',{'aria-label':s,className:"_m"+(' '+"_3h1u")+(this.props.photoUploading||this.props.attachedPhoto?' '+"_3h1v":''),ref:'PhotoInputContainer'},j.createElement('i',{className:"_3h1w",ref:'PhotoInputControl'},j.createElement('input',{accept:'image/*',className:"_n",name:'file',ref:'PhotoInput',title:s,type:'file'}))));}});f.exports=r;},null);