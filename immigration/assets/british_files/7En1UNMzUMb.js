/*!CK:3193562534!*//*1456653995,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["hykRM"]); }

__d("OptimisticVideoPostEvent",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={VIDEO_POST_ADDED:"video_post_added",VIDEO_POST_REMOVED:"video_post_removed",POST_REMOVED_WITHOUT_REPLACEMENT:"post_removed_without_replacement"};},null);
__d("OptimisticVideoPostSource",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={PAGES_TIMELINE:"pages_timeline",VIDEO_HUB:"video_hub",USERS_TIMELINE:"users_timeline"};},null);
__d("TimelineSeenStateConstants",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={FT_TIMELINE_HASH_IDENTIFIER_KEY:"thid"};},null);
__d("TimelineViewportTrackingLogType",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={IMPRESSION:"impression",DURATION:"duration"};},null);
__d("VideoEditSource",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={PROCESSING_DIALOG:"processing_dialog",OPTIMISTIC_VIDEO_POST:"optimistic_video_post",VIDEO_ASSET_INSIGHTS:"video_asset_insights",PERMALINK:"permalink",TIMELINE:"timeline",SNOWLIFT:"snowlift",LIBRARY:"library",REFERENCE_LIBRARY:"reference_library",UNKNOWN:"unknown"};},null);
__d("VideoLibraryNuxAction",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={IMPRESSION:"impression",DISMISS:"dismiss"};},null);
__d("VideoLibraryNuxType",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={OPTIMISTIC_POST_NUX:"optimistic_post_nux",VIDEO_HUB_NUX:"video_hub_nux",VIDEO_INSIGHTS_NUX:"video_insights_nux"};},null);
__d("VideoLibrarySource",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={VIDEO_UPLOAD_CONFIRMATION_DIALOG:"video_upload_confirmation_dialog",OPTIMISTIC_VIDEO_POST:"optimistic_video_post",VIDEO_INSIGHTS:"video_insights",VIDEOS_HUB:"videos_hub"};},null);
__d('FBProfilePhotoShadow.react',['React','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=h.createClass({displayName:'FBProfilePhotoShadow',render:function(){var l=this.props,m=l.className,n=l.children,o=babelHelpers.objectWithoutProperties(l,['className','children']),p=h.Children.only(n);return (h.createElement('div',babelHelpers['extends']({},o,{className:j(m,"_38vo")}),h.cloneElement(p,{className:j(p.props.className,"_44ma")})));}});f.exports=k;},null);
__d('OptimisticPostMetadata.react',['React','XUIText.react','Link.react','BackgroundImage.react','cx','getDOMImageSize'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=470,o=263,p=472,q=h.createClass({displayName:'OptimisticPostMetadata',componentDidMount:function(){m(this.props.image,this.onGetSize);},getInitialState:function(){return {height:o};},onGetSize:function(r,s,t){var u=r<s?n:o;this.setState({height:u});},render:function(){return (h.createElement('div',null,h.createElement('div',{className:"_1gi0"},h.createElement(i,{size:'medium',weight:'bold',display:'block'},h.createElement(j,null,this.props.title)),h.createElement(i,{size:'medium',weight:'normal',display:'block'},this.props.description)),h.createElement('div',{className:"_2bc-"},h.createElement(k,{src:this.props.image,backgroundSize:'contain',width:p,height:this.state.height}))));}});f.exports=q;},null);
__d('VideoThumbnail',['invariant'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j){'use strict';this.$VideoThumbnail1=j;}i.prototype.getURL=function(){'use strict';return this.$VideoThumbnail1;};i.prototype.getData=function(){'use strict';h(0);};f.exports=i;},null);
__d('CanvasToBlobImpl',['BlobFactory'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j,k){var l=atob(j.substr(j.indexOf(',')+1)),m=new Uint8Array(l.length);for(var n=0;n<l.length;n++)m[n]=l.charCodeAt(n);return h.getBlob([m],{type:k});}f.exports={getBlob:i};},null);
__d('canvasToBlob',['Promise','BlobFactory','CanvasToBlobResource','WebWorker','CanvasToBlobImpl'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=c('CanvasToBlobImpl').getBlob,m=b.URL||b.webkitURL||{};function n(p,q,r){return new h(function(s,t){if(p.toBlob){p.toBlob(s,q,r);}else{var u=p.toDataURL(q,r);o(u,q).then(function(v){s(v);},t);}});}function o(p,q){if(!m.createObjectURL||!i.isSupported)return h.reject("Browser doesn't support this feature");if(k.isSupported()){return new h(function(r,s){var t=new k(j).setMessageHandler(function(u){r(u);t.terminate();}).setErrorHandler(function(event){s(event.message);t.terminate();}).execute().postMessage({dataURL:p,fileType:q});});}else return h.resolve(l(p,q));}f.exports=n;},null);
__d('CanvasVideoThumbnail',['Promise','DOM','EventListener','VideoThumbnail','canvasToBlob'],function a(b,c,d,e,f,g,h,i,j,k,l){var m,n;if(c.__markCompiled)c.__markCompiled();m=babelHelpers.inherits(o,k);n=m&&m.prototype;function o(p,q,r){'use strict';n.constructor.call(this,null);this.$CanvasVideoThumbnail1=p;this.$CanvasVideoThumbnail2=q;this.$CanvasVideoThumbnail3=r;}o.prototype.getURL=function(){'use strict';if(!this.$CanvasVideoThumbnail4)this.$CanvasVideoThumbnail4=this.$CanvasVideoThumbnail1.toDataURL('image/jpeg');return this.$CanvasVideoThumbnail4;};o.prototype.getData=function(){'use strict';var p=i.create('canvas'),q=p.getContext('2d'),r=this.$CanvasVideoThumbnail2;return new h(function(s,t){var u=j.listen(r,'seeked',function(){u.remove();p.width=r.videoWidth;p.height=r.videoHeight;q.drawImage(r,0,0,p.width,p.height);l(p,'image/jpeg').then(s,t);});r.currentTime=this.$CanvasVideoThumbnail3;}.bind(this));};f.exports=o;},null);
__d('generateVideoThumbnails',['Promise','CanvasVideoThumbnail','EventListener','VideoFrameBuffer','VideoThumbnail'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();function m(n,o,p,q){return new h(function(r,s){var t=document.createElement('canvas'),u=[],v=0,w=n.duration/q,x=new l(''),y=new k(t,n,'contain'),z;t.width=o;t.height=p;var aa=function(){y.updateFrameBuffer();var ca=new i(t,n,(v-1)*w);u.push(ca);if(ca.getURL().length>x.getURL().length)x=ca;ba();},ba=function(){if(v===0)z=j.listen(n,'seeked',aa);if(v<q){n.currentTime=v*w;v++;}else{if(z)z.remove();r({thumbnails:u,selectedThumbnail:x});}};if(n.videoWidth===0||n.videoHeight===0){s();return;}ba();});}f.exports=m;},null);
__d('OptimisticPostMetadataWithoutThumbnail.react',['EventListener','OptimisticPostMetadata.react','React','ReactDOM','cx','generateVideoThumbnails'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=j.createClass({displayName:'OptimisticPostMetadataWithoutThumbnail',_loadedmetadataListener:null,getInitialState:function(){return {thumbnail:''};},componentDidMount:function(){var o=k.findDOMNode(this.refs.videoPlayer);this._loadedmetadataListener=h.listen(o,'loadedmetadata',this.generateVideoThumbnails);},componentWillUnmount:function(){if(this._loadedmetadataListener){this._loadedmetadataListener.remove();this._loadedmetadataListener=null;}},generateVideoThumbnails:function(){var o=k.findDOMNode(this.refs.videoPlayer);m(o,200,200,1).done(function(p){this.setState({thumbnail:p.thumbnails[0].getURL()});}.bind(this));},render:function(){return (j.createElement('div',null,j.createElement(i,{title:this.props.title,description:this.props.description,image:this.state.thumbnail}),j.createElement('video',{key:'videoPlayer',ref:'videoPlayer',className:"_2mpk",src:this.props.videoFileUrl})));}});f.exports=n;},null);
__d('OptimisticPostUFISection.react',['Image.react','React','UFICommentLink.react','UFILikeLink.react','UFIShareLink.react','XUICardSection.react','XUIPopoverButton.react','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p=' \u00b7 ',q=' \u0020 ',r=i.createClass({displayName:'OptimisticPostUFISection',getDefaultProps:function(){var s={inlineShareHighlight:true};return {ufiExperiments:s};},render:function(){var s=null;if(this.props.isPagePost)s=i.createElement('div',{className:"_1f6t _3uni"},i.createElement('div',{className:"_3m9g"},i.createElement('div',{className:"_40yk"},i.createElement(n,{haschevron:true,image:i.createElement(h,{width:16,height:16,src:this.props.profilePicture}),ref:'open-menu-button',suppressed:true,type:'button'}))));return (i.createElement(m,null,i.createElement('div',{className:"_sa_"},s,i.createElement('div',{className:"_a7s _3399"},i.createElement('div',{className:"_524d"},i.createElement('div',{className:"_42nr"},i.createElement('span',null,i.createElement(k,{likeAction:true,ufiExperiments:this.props.ufiExperiments})),i.createElement('span',null,i.createElement(j,null)),i.createElement('span',null,i.createElement(l,null))))))));}});f.exports=r;},null);
__d('StoryProfile.react',['BackgroundImage.react','FBProfilePhotoShadow.react','Image.react','ImageBlock.react','InlineBlock.react','Link.react','PrivacyConst','React','XUIGrayText.react','XUIText.react','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){if(c.__markCompiled)c.__markCompiled();var t=o.PropTypes,u=o.createClass({displayName:'StoryProfile',propTypes:{privacySetting:t.number.isRequired,privacyIndicator:t.object,profilePicture:t.string.isRequired,username:t.string.isRequired,uploadTime:t.string.isRequired,profileURL:t.string,openProfileURLInNewPage:t.bool,additionalLink:t.shape({URL:t.string,text:t.string})},getDefaultProps:function(){return {openProfileURLInNewPage:false};},_renderPrivacyIndicator:function(){if(this.props.privacyIndicator){return this.props.privacyIndicator;}else{var v=this.props.privacySetting==n.BaseValue.EVERYONE,w=this.props.privacySetting==n.BaseValue.ALL_FRIENDS;return (o.createElement(h,{width:13,height:12,className:"_14g-"+(v?' '+"_14g_":'')+(w?' '+"_5qhp":'')+(!w&&!v?' '+"_14h0":'')}));}},_renderProfileName:function(){var v,w;if(this.props.profileURL){var x;if(this.props.openProfileURLInNewPage)x='_blank';w='bold';v=o.createElement(m,{href:this.props.profileURL,target:x},this.props.username);}else v=this.props.username;return (o.createElement(q,{className:"_14gz",size:'medium',weight:w,display:'block'},v));},_renderAdditionalLink:function(){if(this.props.additionalLink)return (o.createElement(p,{shade:'light',size:'small',display:'inline'},' · ',o.createElement(m,{href:this.props.additionalLink.URL,target:'_blank'},this.props.additionalLink.text)));return null;},render:function(){return (o.createElement(k,{spacing:'medium',className:s(this.props.className,"_56-3")},o.createElement(i,null,o.createElement(j,{className:"_56-4",src:this.props.profilePicture})),o.createElement(l,{alignv:'middle',height:40,fullWidth:true},this._renderProfileName(),o.createElement('div',null,o.createElement(p,{shade:'light',size:'small',display:'inline'},this.props.uploadTime,' · '),this._renderPrivacyIndicator(),this._renderAdditionalLink()))));}});f.exports=u;},null);
__d("XPagesManagerPublishingToolsController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/{page_token}\/publishing_tools\/",{current_page:{type:"Int"},section:{type:"String"},source:{type:"Enum",enumType:1},page_token:{type:"String",required:true},business_id:{type:"Int"}});},null);
__d('VideoLibraryButton.react',['React','URI','VideoLibrarySource','XPagesManagerPublishingToolsController','XUIDialogButton.react','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){var o,p;if(c.__markCompiled)c.__markCompiled();o=babelHelpers.inherits(q,h.Component);p=o&&o.prototype;q.prototype.$VideoLibraryButton1=function(){'use strict';return k.getURIBuilder().setString('page_token',this.props.pageID).setString('section','VIDEOS').setEnum('source',this.props.source).getURI();};q.prototype.$VideoLibraryButton2=function(){'use strict';this.$VideoLibraryButton1().go();};q.prototype.render=function(){'use strict';return (h.createElement(l,{action:'cancel',className:"_2bhc",label:n._("Video Library"),size:this.props.size,onClick:this.$VideoLibraryButton2.bind(this)}));};function q(){'use strict';o.apply(this,arguments);}q.defaultProps={size:'small'};f.exports=q;},null);
__d("XVideoEditController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/video\/edit\/",{v:{type:"Int",required:true},album:{type:"Int"},source:{type:"Enum",enumType:1}});},null);
__d("XVideoEditDialogController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/video\/edit\/dialog\/",{video_id:{type:"Int"},source:{type:"Enum",enumType:1},story_dom_id:{type:"String"},timeline_identifier:{type:"String"},post_id:{type:"String"},video_asset_id:{type:"Int"},__asyncDialog:{type:"Int"}});},null);
__d('OptimisticVideoPost.react',['ActorURI','AsyncRequest','LeftRight.react','OptimisticPostMetadata.react','OptimisticPostMetadataWithoutThumbnail.react','OptimisticPostUFISection.react','PrivacyConst','ProgressBar.react','React','ReactLayeredComponentMixin','StoryProfile.react','VideoEditSource','VideoLibraryButton.react','VideoLibrarySource','VideoThumbnailConfig','XUIAmbientNUX.react','XUIButton.react','XUICard.react','XUICardSection.react','fbt','cx','XVideoEditController','XVideoEditDialogController'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da){if(c.__markCompiled)c.__markCompiled();var ea=p.PropTypes,fa=p.createClass({displayName:'OptimisticVideoPost',mixins:[q],propTypes:{profilePicture:ea.string,username:ea.string,privacySetting:ea.number,metadataTitle:ea.string,metadataDescription:ea.string,thumbnail:ea.string,videoID:ea.string,isPagePost:ea.bool,shouldShowVideoEditDialog:ea.bool,targetID:ea.string,videoFileUrl:ea.string,shouldShowVideoLibraryNux:ea.bool},getDefaultProps:function(){return {profilePicture:'',username:'',privacySetting:n.BaseValue.EVERYONE,metadataTitle:'',metadataDescription:'',thumbnail:'',progress:0,videoID:'',isPagePost:false,shouldShowVideoEditDialog:false,videoFileUrl:'',shouldShowVideoLibraryNux:false};},getInitialState:function(){return {shouldShowVideoLibraryNux:this.props.shouldShowVideoLibraryNux,videoLibraryNuxImpression:0};},getThumbnail:function(){if(this.props.thumbnail)return this.props.thumbnail;return v.defaultThumbnailURL;},onEditClick:function(){var ga;if(this.props.shouldShowVideoEditDialog){ga=da.getURIBuilder().setInt('video_id',this.props.videoID).setEnum('source',s.OPTIMISTIC_VIDEO_POST).getURI();if(this.props.targetID)ga=h.create(ga,this.props.targetID);new i(ga).send();}else{ga=ca.getURIBuilder().setInt('v',this.props.videoID).setEnum('source',s.OPTIMISTIC_VIDEO_POST).getURI();window.open(ga,'_blank');}},onNuxDismiss:function(){this.setState({shouldShowVideoLibraryNux:false});this.props.onVideoLibraryNuxDismiss();},renderLayers:function(){if(!this.props.shouldShowVideoLibraryNux)return null;return {videoLibraryNux:p.createElement(w,{contextRef:function(){return this.refs.video_library_button;}.bind(this),shown:true,position:'above',onCloseButtonClick:this.props.onVideoLibraryNuxDismiss},'Manage your videos, all in one place.')};},render:function(){var ga=aa._("Just Now"),ha=aa._("Preparing... {number} \u0025",[aa.param('number',this.props.progress)]),ia=null;if(this.props.shouldShowVideoLibraryButton)ia=p.createElement(t,{ref:'video_library_button',pageID:this.props.targetID,source:u.OPTIMISTIC_VIDEO_POST});var ja=this.props.shouldShowVideoLibraryButton,ka=p.createElement(z,{background:'light-wash'},p.createElement('div',{className:"_pro"},p.createElement('div',{className:"_2uu3"},p.createElement(j,{className:"_1mg"},p.createElement('div',null,p.createElement('span',null,p.createElement(o,{className:(!ja?"_1mh":'')+(ja?' '+"_1mi":''),value:this.props.progress,label:ha}))),p.createElement('div',null,ia,p.createElement(x,{className:"_4p26",label:'Edit',size:'small',onClick:this.onEditClick})))))),la=this.props.profilePicture||'',ma=this.props.username||'',na=this.props.privacySetting||-1,oa=p.createElement(r,{className:"_4r8g",profilePicture:la,username:ma,uploadTime:ga,privacySetting:na}),pa=this.props.thumbnail?p.createElement(k,{title:this.props.metadataTitle,description:this.props.metadataDescription,image:this.getThumbnail()}):p.createElement(l,{title:this.props.metadataTitle,description:this.props.metadataDescription,videoFileUrl:this.props.videoFileUrl}),qa=aa._("Boost Post"),ra=this.props.isPagePost?p.createElement('div',{className:"_5c_1"},p.createElement(j,null,p.createElement('div',null),p.createElement(x,{label:qa,use:'confirm'}))):null,sa=p.createElement(m,{ufiExperiments:this.props.ufiExperiments,profilePicture:this.props.profilePicture,isPagePost:this.props.isPagePost}),ta=p.createElement('div',null,oa,pa,ra,sa),ua=p.createElement('div',{className:"_5c_3"});return (p.createElement('div',{className:!!this.props.isPagePost?"_5ctl":''},p.createElement(y,{className:"_4p28"},ka,p.createElement('div',{className:"_prq"},ta,ua))));}});f.exports=fa;},null);
__d('OptimisticVideoPostLogger',['BanzaiLogger'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={logEvent:function(event,j,k,l,m){h.log('OptimisticVideoPostLoggerConfig',{number_of_posts:k,source:j,event:event,target_id:l,video_id:m});}};f.exports=i;},null);
__d('OptimisticVideoPostUtils',['AsyncRequest'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={shouldShowOptimisticPost:function(j){if(j.isScheduledPost||j.isHiddenFromTimeline||j.isSecret||!j.isPageToPage&&!j.isToUserProfile||j.isDraft)return false;return true;},checkVideoStatus:function(j,k,l,m){new h().setURI('/ajax/video/encode/feedback/ping/').setData({video_id:j}).setHandler(function(n){var o=n.getPayload();if(n.error){l(j,n);}else if(o.is_ready){k(j);}else m(j);}).send();}};f.exports=i;},null);
__d("XVideoGenerateStoryController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/video\/generate_story\/",{video_id:{type:"Int"},feed_location:{type:"Enum",enumType:0},timeline_identifier:{type:"String"}});},null);
__d("XVideoLibraryNuxController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/video_library\/nux\/",{action:{type:"Enum",required:true,enumType:1},nux_type:{type:"Enum",required:true,enumType:1}});},null);
__d("XVideoOptimisticPostingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/video\/optimistic_posting\/",{video_id:{type:"Int",required:true}});},null);
__d('OptimisticVideoPostList.react',['Arbiter','AsyncRequest','ChannelConstants','FBFeedLocations','OptimisticVideoPost.react','OptimisticVideoPostEvent','OptimisticVideoPostLogger','OptimisticVideoPostSource','OptimisticVideoPostUtils','PagesComposer','React','ReactDOM','Run','TimelineComposer','VideoLibraryNuxAction','VideoLibraryNuxType','XVideoGenerateStoryController','XVideoLibraryNuxController','XVideoOptimisticPostingController'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){if(c.__markCompiled)c.__markCompiled();var aa=b.URL||b.webkitURL||{},ba='video_encode',ca=7,da=5000,ea=2,fa=r.createClass({displayName:'OptimisticVideoPostList',getInitialState:function(){return {videoPostsMetadata:{},videoPosts:[],shouldShowVideoLibraryNux:this.props.shouldShowVideoLibraryNux,videoLibraryNuxImpression:0,videoLibraryNuxImpressionLogged:false};},componentDidUpdate:function(){if(!this.state.videoLibraryNuxImpressionLogged&&this.state.videoPosts.length>0&&this.state.shouldShowVideoLibraryNux){var ga=y.getURIBuilder().setEnum('action',v.IMPRESSION).setEnum('nux_type',w.OPTIMISTIC_POST_NUX).getURI();new i().setURI(ga).send();this.setState({videoLibraryNuxImpressionLogged:true});}},componentDidMount:function(){var ga=h.subscribe('videoUpload/complete',this.onVideoPostSubmitted),ha=h.subscribe(this.getChannelType(),this.onEncodeUpdate);t.onLeave(function(){return ga.unsubscribe();});t.onLeave(function(){return ha.unsubscribe();});if(this.props.data.length>0)this.initializePosts();},initializePosts:function(){var ga=[],ha={};for(var ia=0;ia<this.props.data.length;ia++){if(!p.shouldShowOptimisticPost(this.props.data[ia]))break;var ja=babelHelpers['extends']({},this.props.data[ia],{shouldRender:false});ja.progress=0;var ka=ja.videoID;ja.inactivityTimer=this.startInactivityTimer(ka);ga.push(ka);ha[ka]=ja;}this.setState({videoPostsMetadata:ha,videoPosts:ga});},getChannelType:function(){return j.getArbiterType(ba);},updateVideoData:function(ga){var ha={};ha[ga.videoID]=babelHelpers['extends']({},ga,{shouldRender:true,fakeProgressTimer:setInterval(function(){return this.fakeInitialProgress(ga.videoID);}.bind(this),700),inactivityTimer:this.startInactivityTimer(ga.videoID)});ha[ga.videoID].progress=0;var ia=babelHelpers['extends']({},this.state.videoPostsMetadata,ha),ja=[ga.videoID].concat(this.state.videoPosts);this.setState({videoPostsMetadata:ia,videoPosts:ja});this.logEvent(m.VIDEO_POST_ADDED,ga.videoID);},onVideoPostSubmitted:function(ga,ha){if(!p.shouldShowOptimisticPost(ha))return;if(!ha.isToUserProfile){this.updateVideoData(ha);return;}var ia=z.getURIBuilder().setInt('video_id',ha.videoID).getURI();new i().setURI(ia).setHandler(function(ja){this.updateVideoData(babelHelpers['extends']({},ja.payload,{videoFileUrl:ha.videoFileURL}));}.bind(this)).send();},checkVideoStatus:function(ga){p.checkVideoStatus(ga,this.onEncodeFinish,this.onEncodeFinish,this.restartInactivityTimer);},startInactivityTimer:function(ga){return setTimeout(function(){return this.checkVideoStatus(ga);}.bind(this),da);},restartInactivityTimer:function(ga){this.stopInactivityTimer(ga);var ha=babelHelpers['extends']({},this.state.videoPostsMetadata),ia=babelHelpers['extends']({},ha[ga]);ia.inactivityTimer=this.startInactivityTimer(ga);ha[ga]=ia;this.setState({videoPostsMetadata:ha});},stopInactivityTimer:function(ga){clearTimeout(this.state.videoPostsMetadata[ga].inactivityTimer);},logEvent:function(event,ga){n.logEvent(event,this.props.isPagePost?o.PAGES_TIMELINE:o.USERS_TIMELINE,this.state.videoPosts.length,this.props.targetID,ga);},fakeInitialProgress:function(ga){var ha=this.state.videoPostsMetadata[ga].progress;if(ha>ca){this.stopFakeInitialProgress(ga);return;}var ia=babelHelpers['extends']({},this.state.videoPostsMetadata),ja=babelHelpers['extends']({},ia[ga]);ja.progress+=1;ia[ga]=ja;this.setState({videoPostsMetadata:ia});this.restartInactivityTimer(ga);},stopFakeInitialProgress:function(ga){if(!this.state.videoPostsMetadata[ga].fakeProgressTimer)return;var ha=babelHelpers['extends']({},this.state.videoPostsMetadata);clearTimeout(ha[ga].fakeProgressTimer);var ia=babelHelpers['extends']({},ha[ga]);ia.fakeProgressTimer=null;ha[ga]=ia;this.setState({videoPostsMetadata:ha});},onEncodeUpdate:function(ga,ha){var ia=String(ha.obj.videoID);if(!this.state.videoPostsMetadata[ia])return;var ja=babelHelpers['extends']({},this.state.videoPostsMetadata);if(ha.obj.progress<ja[ia].progress)return;this.stopFakeInitialProgress(ia);var ka=babelHelpers['extends']({},ja[ia]);ka.progress=ha.obj.progress;ka.shouldRender=true;ja[ia]=ka;this.setState({videoPostsMetadata:ja});if(this._isEncodingFinished(ha.obj.stage)){this.onEncodeFinish(ia);}else this.restartInactivityTimer(ia);},_isEncodingFinished:function(ga){return ga==='finish';},onEncodeFinish:function(ga){if(!this.state.videoPostsMetadata[ga])return;this.stopInactivityTimer(ga);var ha=this.props.isPagePost?k.PAGE_TIMELINE:k.TIMELINE,ia=x.getURIBuilder().setInt('video_id',ga).setEnum('feed_location',ha).getURI();new i().setURI(ia).setData({video_id:ga,feed_location:ha}).setHandler(function(ja){return this.handleRequest(ja,ga);}.bind(this)).send();},handleRequest:function(ga,ha){var ia=ga.payload;if(ia){if(this.props.isPagePost){q.renderStory(s.findDOMNode(this),ia);}else u.renderCapsuleBasedStory(s.findDOMNode(this),ia);}else this.logEvent(m.POST_REMOVED_WITHOUT_REPLACEMENT,ha);this.removeOptimisticPost(ha);},removeOptimisticPost:function(ga){var ha=babelHelpers['extends']({},this.state.videoPostsMetadata);delete ha[ga];var ia=this.state.videoPosts;ia=this.removeVideoID(ia,ga);this.setState({videoPostsMetadata:ha,videoPosts:ia});this.logEvent(m.VIDEO_POST_REMOVED,ga);},removeVideoID:function(ga,ha){var ia=ga.indexOf(ha);ga.splice(ia,1);return ga;},onVideoLibraryNuxShown:function(){var ga=this.state.videoLibraryNuxImpression+1;this.setState({videoLibraryNuxImpression:ga});if(ga>=ea)this.setState({shouldShowVideoLibraryNux:false});},onVideoLibraryNuxDismiss:function(){this.setState({shouldShowVideoLibraryNux:false});var ga=y.getURIBuilder().setEnum('action',v.DISMISS).setEnum('nux_type',w.OPTIMISTIC_POST_NUX).getURI();new i().setURI(ga).send();},renderOptimisticPost:function(ga,ha){if(!ga.shouldRender)return r.createElement('div',{key:ga.videoID});var ia;if(ga.videoThumbnail){ia=ga.videoThumbnail;}else if(aa.createObjectURL&&ga&&ga.videoThumbnailBlob){ia=aa.createObjectURL(ga.videoThumbnailBlob);this.setThumbnailURL(ia,ga.videoID);}else ia='';return (r.createElement(l,{username:ga.userDisplayName,profilePicture:ga.userProfilePictureURI,metadataTitle:ga.videoTitle,metadataDescription:ga.videoDescription,thumbnail:ia,videoID:ga.videoID,videoFileUrl:ga.videoFileUrl,key:ga.videoID,progress:ga.progress,ufiExperiments:this.props.ufiExperiments,privacySetting:ga.privacySetting,isPagePost:this.props.isPagePost,shouldShowVideoEditDialog:this.props.shouldShowVideoEditDialog,targetID:this.props.targetID,shouldShowVideoLibraryButton:this.props.shouldShowVideoLibraryButton,shouldShowVideoLibraryNux:ha,onVideoLibraryNuxDismiss:this.onVideoLibraryNuxDismiss,onVideoLibraryNuxShown:this.onVideoLibraryNuxShown}));},setThumbnailURL:function(ga,ha){var ia=babelHelpers['extends']({},this.state.videoPostsMetadata);ia[ha].videoThumbnail=ga;this.setState({videoPostsMetadata:ia});},render:function(){var ga=this.state.videoPostsMetadata,ha=this.state.videoPosts.map(function(ia,ja){return (this.renderOptimisticPost(ga[ia],ja===0&&this.state.shouldShowVideoLibraryNux));}.bind(this));return (r.createElement('ul',null,ha));}});f.exports=fa;},null);
__d('OptimisticVideoPostController',['React','ReactDOM','CSS','OptimisticVideoPostList.react'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l={init:function(m,n,o,p,q,r,s,t){this._postsContainer=m;i.render(h.createElement(k,{data:n,targetID:o,isPagePost:p,ufiExperiments:q,shouldShowVideoEditDialog:r,shouldShowVideoLibraryButton:s,shouldShowVideoLibraryNux:t}),this._postsContainer);j.show(this._postsContainer);}};f.exports=l;},null);
__d('TimelineContextItemLogger',['BanzaiLogger','Event','FBJSON','Parent','Run','cx','tidyEvent'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o='MTimelineXContextItemsLoggerConfig',p='impression',q='click',r='context_item_url',s='event',t="_md0",u=[];function v(x,y,z){var aa=j.parse(x.getAttribute('data-store'));aa[s]=y;if(z)aa[r]=z;h.log(o,aa);}var w={logWhenVisible:function(x){if(!u.length)l.onLeave(function(){u=[];});u.push(x);},logWhenClicked:function(x){n(i.listen(x,'click',function(y){var z=y.getTarget();if(z.nodeName!=='A')return;var aa=k.byClass(z,t);aa&&v(aa,q,z.href);}));},listenToExpand:function(x){n(x.addListener('expanded',function(){while(u.length)v(u.pop(),p);}));}};f.exports=w;},null);
__d('TimelineCapsule',['Arbiter','CSS','DataStore','DOM','DOMQuery','DOMScroll','Parent','TimelineConstants','TimelineLegacySections','Vector','$','csx','queryThenMutateDOM'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){if(c.__markCompiled)c.__markCompiled();var u=function(){var v={},w={};function x(z){l.scry(z,"._3ram").forEach(function(aa){var ba=aa.getAttribute('data-endmarker'),ca=aa.getAttribute('data-pageindex'),da=function(){if(!aa.parentNode)return;j.set(o.DS_LOADED,z.id,ca);k.remove(aa);h.inform(o.SECTION_FULLY_LOADED,{scrubberKey:ba,pageIndex:ca,capsuleID:z.id,childCount:z.childNodes.length});};if(p.get(ba)){da();}else var ea=h.subscribe(o.SECTION_REGISTERED,function(fa,ga){if(ga.scrubberKey===ba){da();ea.unsubscribe();}});});h.inform('TimelineCapsule/balanced',{capsule:z});}function y(z,aa){var ba=n.byAttribute(z,'data-size');if(ba)if(i.hasClass(z.parentNode,'timelineReportContent')){aa(z);}else aa(ba);}return {removeUnit:function(z){y(z,function(aa){k.remove(aa);});},removeUnitWithID:function(z){u.removeUnit(r(z));},hideUnit:function(z){y(z,function(aa){i.addClass(aa,'fbTimelineColumnHidden');});},undoHideUnit:function(z,aa){k.remove(n.byClass(aa,'hiddenText'));y(z,function(ba){i.removeClass(ba,'fbTimelineColumnHidden');});},unplacehold:function(z){var aa=r(z);aa.style.top=null;i.removeClass(aa,'visiblePlaceholder');i.removeClass(aa,'placeholder');var ba=n.byClass(aa,'fbTimelineCapsule');delete v[ba.id][z];u.balanceCapsule(ba);},scrollToCapsule:function(z){if(!w.hasOwnProperty(z.id)){var aa=q.getElementPosition(z.parentNode);m.scrollTo(new q(q.getScrollPosition().x,aa.y-o.SCROLL_TO_OFFSET,'document'));w[z.id]=true;}},loadTwoColumnUnits:function(z,aa,ba){var ca=r(z);t(function(){var da=n.byClass(ca,'fbTimelineSection');if(da&&!aa){var ea=l.find(ca,"._2t4u"),fa=l.find(ca,"._2t4v"),ga=fa.offsetHeight-ea.offsetHeight;j.set(o.DS_COLUMN_HEIGHT_DIFFERENTIAL,ba,ga);}},x.bind(null,ca));}};}();f.exports=u;},null);
__d('TimelineSection',['Arbiter','CSS','DOM','Parent','ScrollingPager','TimelineConstants','TimelineLegacySections','TimelineScrubberKey','UIPagelet'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();function q(r,s,t,u,v){'use strict';this.$TimelineSection1=r;this.$TimelineSection2=u;this.$TimelineSection3=s;this.$TimelineSection4=null;this.$TimelineSection5=null;this.$TimelineSection6=true;this.$TimelineSection7=true;this.$TimelineSection8=s!==o.RECENT_ACTIVITY;this.$TimelineSection9=v;this.$TimelineSection10=t;this.$TimelineSection11={};this.$TimelineSection12=false;this.$TimelineSection13=[];this.$TimelineSection14=false;}q.prototype.load=function(r,s){'use strict';if(this.$TimelineSection2){this.activateContentScrollLoad();return;}var t=this.$TimelineSection10;h.inform(m.SECTION_LOADING,{data:t,scrubberKey:this.$TimelineSection3});this.$TimelineSection2=true;i.removeClass(this.$TimelineSection1,'fbTimelineTimePeriodUnexpanded');i.removeClass(this.$TimelineSection1,'fbTimelineTimePeriodSuppressed');var u=n.shouldForceNoFriendActivity();t=babelHelpers['extends']({},t,{highlight_unit_data:r,parent_key:this.$TimelineSection4,force_no_friend_activity:u});i.addClass(this.$TimelineSection1,'fbTimelineSectionLoading');this.$TimelineSection6=false;this.activateContentScrollLoad();if(s){this.$TimelineSection1.style.minHeight=window.innerHeight+'px';h.subscribeOnce(m.SECTION_FULLY_LOADED,function(v,w){if(w.scrubberKey===this.$TimelineSection3){this.$TimelineSection1.style.minHeight='';n.destroyOnVisible(this.$TimelineSection3);}}.bind(this));}n.addLoadPagelet(this.$TimelineSection3,p.loadFromEndpoint('ProfileTimelineSectionPagelet',this.$TimelineSection1.id,t,{usePipe:true,jsNonblock:true,constHeight:true,append:false}));n.collapsePlaceHolderHeaders();};q.prototype.preload=function(){'use strict';i.addClass(this.$TimelineSection1,'fbTimelineTimePeriodSuppressed');i.removeClass(this.$TimelineSection1,'fbTimelineTimePeriodUnexpanded');var r=j.find(this.$TimelineSection1,'span.sectionLabel');if(r.getAttribute('data-original-label')){j.setContent(r,r.getAttribute('data-original-label'));r.removeAttribute('data-original-label');}};q.prototype.unload=function(){'use strict';if(!this.$TimelineSection2||!this.$TimelineSection8)return;this.$TimelineSection2=false;n.cancelLoadPagelet(this.$TimelineSection3);i.addClass(this.$TimelineSection1,'fbTimelineTimePeriodUnexpanded');i.removeClass(this.$TimelineSection1,'fbTimelineTimePeriodSuppressed');if(this.$TimelineSection1.nextSibling&&i.hasClass(this.$TimelineSection1.nextSibling,'fbTimelineSection')){j.setContent(this.$TimelineSection1,this.$TimelineSection1.nextSibling);i.show(this.$TimelineSection1.firstChild);}else j.empty(this.$TimelineSection1);this.deactivateScrollLoad();};q.prototype.canScrollLoad=function(){'use strict';return this.$TimelineSection6;};q.prototype.activateScrollLoad=function(){'use strict';this.$TimelineSection6=true;i.removeClass(this.$TimelineSection1,'fbTimelineTimePeriodSuppressed');i.addClass(this.$TimelineSection1,'fbTimelineTimePeriodUnexpanded');var r=n.getOnVisible(this.$TimelineSection3);if(r)r.reset();return this;};q.prototype.deactivateScrollLoad=function(){'use strict';if(!this.$TimelineSection2){this.$TimelineSection6=false;i.removeClass(this.$TimelineSection1,'fbTimelineTimePeriodUnexpanded');i.addClass(this.$TimelineSection1,'fbTimelineTimePeriodSuppressed');var r=n.getOnVisible(this.$TimelineSection3);if(r)r.remove();}j.scry(this.$TimelineSection1,'.fbTimelineSectionExpandPager').forEach(function(s){var t=l.getInstance(s.id);t&&t.removeOnVisible();var u=k.byClass(s,'stat_elem');if(u)i.removeClass(u,'async_saving');});return this;};q.prototype.canContentScrollLoad=function(){'use strict';return this.$TimelineSection7;};q.prototype.activateContentScrollLoad=function(){'use strict';this.$TimelineSection7=true;return this;};q.prototype.deactivateContentScrollLoad=function(){'use strict';this.$TimelineSection7=false;return this;};q.prototype.getNode=function(){'use strict';return this.$TimelineSection1;};q.prototype.getScrubberKey=function(){'use strict';return this.$TimelineSection3;};q.prototype.getParentKey=function(){'use strict';return this.$TimelineSection4;};q.prototype.setParentKey=function(r){'use strict';this.$TimelineSection4=r;return this;};q.prototype.addSubSection=function(r,s){'use strict';if(!Array.isArray(this.$TimelineSection5))this.$TimelineSection5=[];if(Array.isArray(this.$TimelineSection5))this.$TimelineSection5[r]=s;return this;};q.prototype.getSubSections=function(){'use strict';return this.$TimelineSection5;};q.prototype.isLoaded=function(){'use strict';return this.$TimelineSection2;};q.prototype.isRightColumnFinished=function(){'use strict';return this.$TimelineSection12;};q.prototype.setRightColumnFinished=function(){'use strict';this.$TimelineSection12=true;return this;};q.prototype.getHistoricUnitCount=function(){'use strict';return this.$TimelineSection9;};q.prototype.expand=function(r){'use strict';if(!this.$TimelineSection2)return this;var s=j.find(this.$TimelineSection1,'.fbTimelineSectionExpander');i.addClass(s.firstChild,'async_saving');r&&i.addClass(r,'async_saving');h.inform(m.SECTION_EXPAND,this.$TimelineSection3);j.scry(this.$TimelineSection1,'.fbTimelineCapsule').forEach(j.remove);this.$TimelineSection11.new_expand=true;n.cancelLoadPagelet(this.$TimelineSection3);n.addLoadPagelet(this.$TimelineSection3,p.loadFromEndpoint('ProfileTimelineSectionPagelet',s.id,this.$TimelineSection11,{usePipe:true,jsNonblock:true,constHeight:true}));return this;};q.prototype.isPermalinkPeriod=function(){'use strict';return !!this.$TimelineSection10.is_permalink_period;};q.prototype.isHidden=function(){'use strict';return this.$TimelineSection14;};q.prototype.hide=function(){'use strict';this.$TimelineSection14=true;i.hide(j.find(this.$TimelineSection1,'.fbTimelineSection'));return this;};q.prototype.isHiddenFromView=function(){'use strict';return (!this.$TimelineSection2||this.$TimelineSection14||i.hasClass(this.$TimelineSection1,'fbTimelineTimePeriodUnexpanded'));};q.prototype.hasPendingCallbacks=function(){'use strict';return this.$TimelineSection13.length>0;};q.prototype.queueDisplayCallback=function(r,s){'use strict';this.$TimelineSection13[r]=s;return this;};q.prototype.runPendingDisplayCallbacks=function(){'use strict';while(this.hasPendingCallbacks()){var r=this.$TimelineSection13.shift();if(r)r();}return this;};f.exports=q;},null);
__d('TimelineContentLoader',['$','Arbiter','CSS','DOM','DOMScroll','Event','OnVisible','Parent','ScrollingPager','TimelineComponentKeys','TimelineConstants','TimelineController','TimelineDOMID','TimelineLegacySections','TimelineScrubberKey','TimelineSection','TimelineSmartInsert','Vector','arrayContains','csx','debounce','ge','queryThenMutateDOM','setImmediate'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea){if(c.__markCompiled)c.__markCompiled();var fa=false,ga=null,ha={},ia={},ja=[],ka={},la=null,ma=null,na=80,oa=250,pa=500;function qa(){if(fa)return;s.register(q.CONTENT,wa);ma=i.subscribe(r.SECTION_EXPAND,function(xa,ya){wa.navigateToSection(ya);});fa=true;}var ra=ba(function(xa,ya,za){var ab=u.get(xa).getHistoricUnitCount();ya-=ab;za-=1;if(ab==-1||za<=0||ya<0)return;var bb=wa.getNextSectionKey(xa);if(bb){u.get(bb).load();ra(bb,ya,za);}},pa);function sa(xa,ya){if(!ya)ya=0;if(ya<na&&!xa())setTimeout(sa.bind(null,xa,ya+1),oa);}function ta(xa){sa(function(){if(xa===v.WAY_BACK)return true;var ya=wa.getNextSectionKey(xa);if(ya){va(ya);return true;}return false;});}function ua(xa,ya,za){sa(function(){if(ya===v.WAY_BACK)return true;var ab=wa.getNextSectionKey(ya);if(ab){u.addOnVisible(ab,new n(xa,va.bind(null,ab),false,za||1000));return true;}return false;});}function va(xa){var ya=u.get(xa);if(ya&&ya.canScrollLoad()){ya.load();if(la)ra(xa,la.required_units,la.max_parallelism);}}var wa={CURRENT_SECTION_OFFSET:150,registerTimePeriod:function(xa,ya,za,ab,bb,cb,db){qa();if(z(ja,ya))return;if(ia)Object.assign(za||{},ia);var eb=new w(xa,ya,za,ab,db);if(!bb){u.setMainSectionOrder(ya,cb);ha[ya]=true;}else{eb.setParentKey(bb);var fb=u.get(bb);if(fb)fb.addSubSection(cb,eb);}u.set(ya,eb);wa.checkCurrentSectionChange();i.inform(r.SECTION_REGISTERED,{scrubberKey:ya,section:eb});},reset:function(){u.removeAllOnVisibles();u.cancelLoadPagelets();for(var xa in ka){ka[xa].unsubscribe();delete ka[xa];}ma&&ma.unsubscribe();ma=null;u.removeAll();ga=null;ha={};ia={};ja=[];fa=false;},checkCurrentSectionChange:function(){var xa=null;da(function(){xa=wa.getCurrentSection();},function(){var ya=ga&&ga.getScrubberKey();if(xa&&xa.getScrubberKey()!==ya&&!xa.isPermalinkPeriod()){ga=xa;var za=xa.getScrubberKey(),ab=xa.getParentKey();if(!ab){ab=za;za=null;}s.sectionHasChanged(ab,za);}});},setParallelLoadConfig:function(xa){la=xa;},getCurrentSection:function(){var xa={},ya=u.getAll();for(var za in ya){var ab=ya[za];if(!ab||ab.isHiddenFromView())continue;var bb=y.getElementPosition(ab.getNode(),'viewport').y;if(ab.getScrubberKey()===v.RECENT_ACTIVITY)bb--;if(bb<wa.CURRENT_SECTION_OFFSET)xa[bb]=ab;}var cb=Math.max.apply(null,Object.keys(xa)),db=u.getMainSectionOrder(),eb=cb==-Infinity;if(!eb){return xa[cb];}else if(db[0])return u.get(db[0]);return null;},getLastVisibleSection:function(){var xa=u.getMainSectionOrder();for(var ya=xa.length-1;ya>=0;ya--){var za=u.get(xa[ya]);if(za&&!za.isHiddenFromView())return za;}return null;},getRecentActivitySection:function(){return u.get(v.RECENT_ACTIVITY);},capsuleForCurrentSection:function(){var xa=wa.getCurrentSection();return xa&&k.scry(xa.getNode(),'.fbTimelineCapsule')[0];},enableScrollLoad:function(xa,ya,za,ab){xa=h(xa);var bb=o.byClass(xa,'fbTimelineSection')||xa.parentNode,cb=bb&&k.scry(bb,'.fbTimelineCapsule')[0];if(!cb)return;if(za===null){ua(xa,ya,ab);}else s.runOnceWhenSectionFullyLoaded(ua.bind(null,xa,ya,ab),ya,za);},getNextSectionKey:function(xa){var ya=u.getMainSectionOrder();for(var za=0;za<ya.length-1;za++)if(ya[za]==xa){while(za<ya.length-1&&!ya[za+1])za++;return ya[za+1];}var ab=u.get(xa);if(!ab||!ab.getParentKey())return;var bb=u.get(ab.getParentKey());if(!bb)return;var cb=bb.getSubSections(),db=cb[cb.length-1];if(ab.getScrubberKey()===db.getScrubberKey())return wa.getNextSectionKey(ab.getParentKey());for(var eb=0;eb<cb.length-1;eb++)if(cb[eb].getScrubberKey()==xa)return cb[eb+1].getScrubberKey();},hideSection:function(xa){var ya=u.get(xa);if(ya)ya.hide();var za=s.getCurrentScrubber();if(za){var ab=null;if(!ha[xa]){ab=s.getCurrentScrubber().getSubnav(ya.getParentKey(),xa);}else ab=s.getCurrentScrubber().getNav(xa);ab&&j.hide(ab);}var bb=s.getCurrentStickyHeaderNav();bb&&bb.removeTimePeriod(xa);},loadSectionOnClick:function(xa,ya){m.listen(xa,'click',function(za){za.prevent();u.get(ya).load();});},removeSection:function(xa){u.removeOnVisible(xa);u.remove(xa);delete ha[xa];var ya=s.getCurrentStickyHeaderNav();ya&&ya.removeTimePeriod(xa);ja.push(xa);},navigateToSection:function(xa,ya,za){ya=!!ya;var ab=xa,bb=u.get(xa);if(!bb)return;if(!bb.isLoaded()){x.enable();k.scry(h(t.TAB_CONTENT),'.fbTimelineShowOlderSections').forEach(k.remove);}if(!ha[xa]){if(!bb.isLoaded())bb.getNode().style.minHeight=y.getViewportDimensions().y+'px';var cb=i.subscribe(r.SECTION_FULLY_LOADED,function(mb,nb){if(nb.scrubberKey===xa){bb.getNode().style.minHeight='';cb.unsubscribe();}});ab=bb.getParentKey();var db=u.get(ab);if(db){var eb=db.getNode();if(!j.hasClass(eb,'fbTimelineSectionExpanded')){l.scrollTo(eb,0);j.addClass(eb,'fbTimelineSectionExpanded');k.scry(eb,'.fbTimelineCapsule').forEach(k.remove);k.scry(eb,'div.fbTimelineSectionExpandPager').forEach(k.remove);k.scry(eb,'div.fbTimelineContentHeader').forEach(k.remove);k.scry(eb,"._5vf").forEach(function(mb){if(!mb.getAttribute('data-subsection'))k.remove(mb);});}}var fb=wa.getNextSectionKey(ab),gb=u.getOnVisible(fb);if(gb)gb.setBuffer(0);}var hb=u.getMainSectionOrder();for(var ib=0;ib<hb.length;ib++){var jb=hb[ib];if(!jb)continue;if(jb==ab)break;u.get(jb).deactivateScrollLoad().deactivateContentScrollLoad();}bb.load(za,true);u.collapsePlaceHolderHeaders();var kb=y.getScrollPosition().x,lb=y.getElementPosition(bb.getNode()).y;if(!ya)l.scrollTo(new y(kb,lb-r.SCROLL_TO_OFFSET,'document'),true,false,false,0,function(){var mb=y.getElementPosition(bb.getNode()).y;l.scrollTo(new y(kb,mb-r.SCROLL_TO_OFFSET,'document'),false);if(xa!==v.RECENT_ACTIVITY){var nb=k.scry(bb.getNode(),'h3.uiHeaderTitle')[0];if(nb){nb.tabIndex=0;nb.focus();}}});},appendContentAfterLoad:function(xa,ya,za){s.runOnceWhenSectionFullyLoaded(k.appendContent.bind(null,h(xa),ya),za,'0');},markSectionAsLoaded:function(xa,ya,za){s.runOnceWhenSectionFullyLoaded(function(){ca(xa)&&j.removeClass(h(xa).parentNode,'fbTimelineSectionLoading');},ya,za);},scrollToTimeline:function(xa,ya){s.runOnceWhenSectionFullyLoaded(function(){var za=h('fbTimelineHeadline');ea(function(){l.scrollTo(za);});},xa,ya);},suppressSectionsAbove:function(xa){var ya,za,ab=u.getMainSectionOrder();for(var bb=0;bb<ab.length;bb++){var cb=ab[bb];if(!cb)continue;ya=u.get(cb).getNode();za=null;if(Array.from(xa.parentNode.children).indexOf(xa)<=Array.from(ya.parentNode.children).indexOf(ya)){za=cb;break;}u.get(cb).deactivateScrollLoad();}if(za)wa.navigateToSection(za,true);},forceNoFriendActivity:function(){u.forceNoFriendActivity();},removeDupes:function(xa){var ya=ca(xa);if(!ya)return;var za=k.scry(ya,'li.fbTimelineUnit'),ab={};for(var bb=0;bb<za.length;bb++){var cb=za[bb];if(cb.id&&cb.id.startsWith('tl_unit_')){var db=cb.id.substring(8,cb.id.length),eb=k.scry(cb,'div.timelineUnitContainer');if(eb.length>0)db=db+eb[0].getAttribute('data-time');if(ab.hasOwnProperty(db)){cb.id='dupe_unit_'+Math.random();cb.className="hidden_elem";}else ab[db]=1;}}},removeLoadingState:function(xa){ca(xa)&&j.removeClass(h(xa),'fbTimelineSectionLoading');},updatePagerAfterLoad:function(xa,ya,za,ab,bb){var cb=p.getInstance(xa.firstChild.id);if(!cb){ka[xa.firstChild.id]=i.subscribe(p.REGISTERED,function(eb,fb){ka[xa.firstChild.id].unsubscribe();delete ka[xa.firstChild.id];if(fb.id===xa.firstChild.id)wa.updatePagerAfterLoad(xa,ya,za,ab,bb);});return;}var db=cb.getHandler();cb.setHandler(function(eb){j.addClass(xa,'async_saving');db(eb);});s.runOnceWhenSectionFullyLoaded(function(){j.removeClass(xa,'fbTimelineHiddenPager');cb.checkBuffer();},za,ab);if(bb)s.runOnceWhenSectionFullyLoaded(s.adjustScrollingPagerBuffer.bind(null,xa.firstChild.id,za),za,ab);},repositionDialog:function(xa){i.subscribe(r.SECTION_LOADED,function(){xa.updatePosition();});},rightColumnFinished:function(xa){var ya=u.get(xa);ya.setRightColumnFinished();},loadNextSection:function(xa){ta(xa);}};f.exports=wa;},null);
__d('TimelineLogging',['TimelineComponentKeys','TimelineController','reportData'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=false,l=0,m=null,n=null,o={init:function(p){if(k)return;l=p;i.register(h.LOGGING,this);},reset:function(){k=false;l=0;m=null;},log:function(p,q){q.profile_id=l;j(p,{gt:q});},logSectionChange:function(p,q){var r={timeline_section_change:1,key:p};if(m&&p==m){r.timeline_scrubber=1;m=null;}if(n&&p==n){r.sticky_header_nav=1;n=null;}o.log('timeline',r);},logScrubberClick:function(p){m=p;},logStickyHeaderNavClick:function(p){n=p;}};f.exports=o;},null);
__d('TimelineStickyColumn',['Arbiter','CSS','DOMQuery','Event','Run','Style','TimelineComponentKeys','TimelineConstants','TimelineContentLoader','TimelineController','Vector','ViewportBounds','csx','queryThenMutateDOM','requireWeak'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){if(c.__markCompiled)c.__markCompiled();var w=100,x=15,y=35,z=10,aa="._2t4u",ba="._5nb8",ca="._2t4v",da=false,ea={},fa=null,ga=null,ha=null,ia=null,ja,ka,la,ma=0,na=0,oa=0,pa=0,qa=0,ra=0,sa=0,ta;function ua(){var nb;v('ModalLayer',function(ob){return nb=ob;});if(nb)return !!nb.getTopmostModalLayer();return false;}function va(){ja=p.getCurrentSection();ka=p.getRecentActivitySection();if(!ja||!ja.isRightColumnFinished())return;var nb,ob;if(ea.hasDecoupledColumns){nb=hb(ka);ob=fb(ka);}else{ob=fb(ja);nb=gb(ja);}ma=nb?nb.offsetHeight:0;na=ob?ob.offsetHeight:0;oa=r.getViewportDimensions().y;sa=nb?r.getElementPosition(nb).y:0;la=p.getLastVisibleSection();pa=ja.getNode().offsetHeight;ta=document.body.clientWidth<document.body.scrollWidth;}function wa(){if(ua())return false;if(!ea.hasDecoupledColumns&&ja)return ja.isRightColumnFinished();if(ka&&ja===ka&&qa>=ra)return ka.isRightColumnFinished();return true;}function xa(){if(!ja)return;if(!ea.hasDecoupledColumns&&ia&&ia!==ja){var nb=fb(ia);if(nb)ib(nb,'','','');}ra=qa;qa=r.getScrollPosition().y;var ob;if(ea.hasDecoupledColumns){ob=fb(ka);}else ob=fb(ja);if(!ob)return;if(ta){ib(ob,'','','');return;}if(wa()){ya(ob);ia=bb(ob)==='fixed'?ja:null;}}function ya(nb){if(na>=ma||ma<=oa)return;var ob=sa-jb();if(qa<=ob){ib(nb,'','','');return;}var pb=x+y,qb=qa+oa-pb,rb=qa+na+jb(),sb=sa+pa;if(ja===la)sb+=y;if(!ea.hasDecoupledColumns&&sb<=Math.min(rb,qb)){ib(nb,'absolute','',x+'px');return;}var tb=oa-x-jb();if(na<=tb){ib(nb,'fixed',jb()+'px','');return;}if(qa<ra){za(nb);}else ab(nb);}function za(nb){var ob=false;if(bb(nb)==='absolute'){var pb=sa+ma-jb(),qb=qa+jb()-sa;if(!!db(nb)&&qb<=db(nb)){ob=true;}else if(nb.style.bottom!==''&&qa<=pb-na)ob=true;}if(ob){ib(nb,'fixed',jb()+'px','');return;}if(bb(nb)==='absolute'&&!!db(nb))return;if(cb(nb)){if(db(nb)>=jb())return;var rb=oa-y,sb=qa-sa-(na-rb);if(!ea.hasDecoupledColumns&&ja===ka)sb+=w;if(ra)sb+=ra-qa;ib(nb,'absolute',sb+'px','');return;}}function ab(nb){var ob,pb,qb=false;if(!cb(nb)){ob=db(nb);pb=eb(nb);if(ob>0||pb===0){var rb=qa+oa+y-jb(),sb=sa+ob+na-y;if(rb>=sb)qb=true;}}if(!qb)if(qa===ra||!cb(nb))return;if(qb){ob=oa-na-x-y;ib(nb,'fixed',ob+'px','');return;}if(cb(nb)&&db(nb)>=jb()){ob=qa-sa+jb();if(ra)ob+=ra-qa;ib(nb,'absolute',ob+'px','');}}function bb(nb){switch(nb.style.position){case 'absolute':case 'static':return nb.style.position;default:return i.hasClass(nb,'fixed_always')?'fixed':'static';}}function cb(nb){switch(bb(nb)){case 'absolute':case 'static':return false;default:return true;}}function db(nb){return nb.style.top?parseInt(nb.style.top,10):0;}function eb(nb){return nb.style.bottom?parseInt(nb.style.bottom,10):0;}function fb(nb){if(nb)return j.scry(nb.getNode(),ca)[0];return null;}function gb(nb){if(nb)return j.scry(nb.getNode(),aa)[0];return null;}function hb(nb){if(nb)return j.scry(nb.getNode(),ba)[0];return null;}function ib(nb,ob,pb,qb){m.set(nb,'bottom',qb);if(ob==='fixed'){i.addClass(nb,'fixed_always');m.set(nb,'position','');}else{i.removeClass(nb,'fixed_always');m.set(nb,'position',ob);}m.set(nb,'top',pb);h.inform('reflow');}function jb(){return s.getTop()+z;}function kb(){u(va,xa);}function lb(){da=false;ia=null;while(fa&&fa.length)fa.pop().remove();fa=null;if(ga)ga.unsubscribe();if(ha)ha.unsubscribe();}var mb={init:function(nb){if(!da){da=true;ea=nb;fa=[k.listen(window,'scroll',kb),k.listen(window,'resize',kb)];ga=h.subscribe(o.SECTION_FULLY_LOADED,kb);ha=h.subscribe(o.UNIT_SEGMENT_LOADED,kb);l.onLeave(lb);q.register(n.STICKY_COLUMN,this);}},adjust:function(){if(da){va();xa();}}};f.exports=mb;},null);
__d('TimelineViewportTracking',['Arbiter','Banzai','DOM','TimelineSeenStateConstants','TimelineViewportTrackingLogType','ViewportTracking','$','csx','tidyEvent'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q,r;if(c.__markCompiled)c.__markCompiled();var s;q=babelHelpers.inherits(t,m);r=q&&q.prototype;t.prototype.getAllStories=function(){'use strict';var u=j.scry(this.getStream(),"._5pat"),v=[];for(var w=0;w<u.length;w++)if(this.getStoryID(u[w]))v.push(u[w]);return v;};t.prototype.getStream=function(){'use strict';if(!this.$TimelineViewportTracking1)this.$TimelineViewportTracking1=n('timeline_tab_content');return this.$TimelineViewportTracking1;};t.prototype.getStoryID=function(u){'use strict';var v=JSON.parse(u.getAttribute('data-ft'));if(v){var w=k.FT_TIMELINE_HASH_IDENTIFIER_KEY;return v[w];}return null;};t.prototype.getDataToLog=function(u){'use strict';var v=JSON.parse(u.getAttribute('data-ft'));return {ft:v,log_type:l.IMPRESSION};};t.prototype.getTimetrackingDataToLog=function(u){'use strict';var v=r.getTimetrackingDataToLog.call(this,u);v.log_type=l.DURATION;return v;};t.prototype.sendDataToLog=function(u,v,w,x){'use strict';if(!v.ft)return;var y={};if(x)y.retry=x;if(w)y.delay=2000;i.post('timeline_feed_tracking',v,y);};t.prototype.getDataFromConfig=function(u){'use strict';this.timeout=u.record_delay;this.isSeenStateLoggingEnabled=u.is_seen_state_logging_enabled;this.isTimetrackingEnabled=u.is_timetracking_enabled;this.vpvdDebug=!!u.vpvd_debug;p(h.subscribe(['TimelineConstants/unitSegmentLoaded'],function(){this.invalidateAllStoriesCache();this.invalidateVisibleStoriesCache();}.bind(this)));};t.prototype.getTimeout=function(){'use strict';return this.timeout;};t.prototype.cleanup=function(){'use strict';s=null;r.cleanup.call(this);};function t(){'use strict';q.apply(this,arguments);}f.exports={getInstance:function(){return s;},init:function(u){if(s)return;s=new t();s.init(u);}};},null);