/*!CK:1859406795!*//*1456327952,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["Bj7GA"]); }

__d('ComposerCitySharer',['Arbiter','ArbiterMixin','AsyncRequest','CSS','DOM','Event','Parent','mixin'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p,q;if(c.__markCompiled)c.__markCompiled();var r={};p=babelHelpers.inherits(s,o(i));q=p&&p.prototype;function s(t){'use strict';q.constructor.call(this);this.root=t;}s.prototype.init=function(t,u,v,w,x){'use strict';this.cityLink=t;this.closeButton=u;this.input=v;this.disableShareInput=w;this._options=x;this.cityName=l.find(this.cityLink,'.cityName');this.data={};m.listen(this.closeButton,'click',function(){this.clearCity();this.disableShareInput.value='true';}.bind(this));r[this.root]=this;this.inform('init',null,h.BEHAVIOR_PERSISTENT);};s.prototype.changeCity=function(t,u,v){'use strict';this.setCityId(t,u,v);this.toggleLocationSharing(t,u,v,false);};s.prototype.setCityId=function(t,u,v){'use strict';if(u){this.data={city_name:t,city_page_id:u,city_id:v};this.input.value=u;var w=t.lastIndexOf(',');if(w!=-1)t=t.substring(0,w);var x=t;l.setContent(this.cityName,x);k.addClass(this.root,'ComposerCitySharerCitySelected');k.conditionShow(this.closeButton,!this._placeSelected);this.inform('change',this.data,h.BEHAVIOR_PERSISTENT);}};s.prototype.toggleLocationSharing=function(t,u,v,w){'use strict';if(u)new j().setURI('/ajax/places/toggle_location_sharing').setData({city_id:v,city_page_id:u,city_name:t,is_default:w,session_id:this._options.session_id}).send();};s.prototype.setDefaultCity=function(t,u,v){'use strict';this._defaultCityData=[t,u,v];};s.prototype.useDefaultCity=function(){'use strict';if(this._defaultCityData){var t=this._defaultCityData[0],u=this._defaultCityData[1],v=this._defaultCityData[2];this.setCityId(t,u,v);this.toggleLocationSharing(t,u,v,true);}};s.prototype.addPlace=function(t){'use strict';if(t.city_id){this.changeCity(t.city_name,t.city_page_id,t.city_id);}else this.clearCity();this._placeSelected=true;k.addClass(this.cityLink,'placeIconSelected');k.hide(this.closeButton);};s.prototype.clearPlace=function(t){'use strict';this._placeSelected=false;k.removeClass(this.cityLink,'placeIconSelected');k.conditionShow(this.closeButton,this.getValue());};s.prototype.clearCity=function(){'use strict';this.data={};this.input.value='';l.setContent(this.cityName,'');k.removeClass(this.root,'ComposerCitySharerCitySelected');k.hide(this.closeButton);this.inform('change',null,h.BEHAVIOR_PERSISTENT);};s.prototype.getIcon=function(){'use strict';return this.root;};s.prototype.getValue=function(){'use strict';return this.input.value;};s.getInstance=function(t){'use strict';var u=n.byClass(t,'ComposerCitySharer');return u&&r[u];};f.exports=s;},null);
__d('ContextualBlind',['Event','Animation','Arbiter','DOM','Rect','Vector','$','cx','shield'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q=0,r=1,s=.8,t=500;u.prototype.$ContextualBlind6=function(){'use strict';this.$ContextualBlind1&&j.unsubscribe(this.$ContextualBlind1);this.$ContextualBlind1=null;this.$ContextualBlind2=[];this.$ContextualBlind3&&this.$ContextualBlind3.remove();this.$ContextualBlind3=null;this.$ContextualBlind4&&k.remove(this.$ContextualBlind4);this.$ContextualBlind5=false;};u.prototype.show=function(v,w,x,y,z,aa,ba,ca){'use strict';if(ba==null)ba=s;ca=ca||q;this.hide();var da=ca===q?"_2xgb":"_2xgc";for(var ea=0;ea<4;ea++)this.$ContextualBlind2.push(k.create('div',{className:da,style:'opacity:'+ba}));k.appendContent(document.body,this.$ContextualBlind2);if(aa!==false){da=ca===q?"_2xgd":"_2xge";this.$ContextualBlind4=k.create('div',{className:da});k.appendContent(document.body,this.$ContextualBlind4);}var fa=p(this.updatePosition,this,v,w,x,y,z);fa();this.$ContextualBlind1=j.subscribe('reflow',fa);this.$ContextualBlind3=h.listen(window,'resize',fa);this.$ContextualBlind5=true;};u.prototype.fadeIn=function(v,w,x,y,z,aa,ba,ca){'use strict';ca=ca||t;if(ba==null)ba=s;this.show(v,w,x,y,z,aa,ba,q);if(this.$ContextualBlind5)return;for(var da=0;da<this.$ContextualBlind2.length;da++){var ea=this.$ContextualBlind2[da];new i(ea).duration(ca).from('opacity',0).to('opacity',ba).go();}};u.prototype.hide=function(){'use strict';this.$ContextualBlind2&&this.$ContextualBlind2.forEach(k.remove);this.$ContextualBlind6();};u.prototype.fadeOut=function(){'use strict';for(var v=0;v<this.$ContextualBlind2.length;v++){var w=this.$ContextualBlind2[v];new i(w).duration(t).from('opacity',s).to('opacity',0).ondone(k.remove.bind(null,w)).go();}this.$ContextualBlind6();};u.prototype.$ContextualBlind7=function(v,w){'use strict';w.getPositionVector().setElementPosition(v);w.getDimensionVector().setElementDimensions(v);};u.prototype.updatePosition=function(v,w,x,y,z){'use strict';var aa=m.getDocumentDimensions().y,ba=l.getElementBounds(n(v));ba=new l(ba.t-(w||0),ba.r+(x||0),ba.b+(y||0),ba.l-(z||0),ba.domain);var ca=document,da=ca&&ca.documentElement&&ca.documentElement.scrollWidth||ca&&ca.body&&ca.body.scrollWidth||0;this.$ContextualBlind7(this.$ContextualBlind2[0],new l(0,da,ba.t,0,'document'));this.$ContextualBlind7(this.$ContextualBlind2[1],new l(ba.t,da,ba.b,ba.r,'document'));this.$ContextualBlind7(this.$ContextualBlind2[2],new l(ba.b,da,aa,0,'document'));this.$ContextualBlind7(this.$ContextualBlind2[3],new l(ba.t,ba.l,ba.b,0,'document'));if(this.$ContextualBlind4)this.$ContextualBlind7(this.$ContextualBlind4,ba);};function u(){'use strict';}u.STYLE_LIGHT=q;u.STYLE_DARK=r;f.exports=u;},null);
__d('ContextualBlindSingleton',['ContextualBlind'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();f.exports=new h();},null);
__d('ContextualLayerBlind',['ContextualBlind','cx','CSS'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={isModal:false,opacity:.3,paddingTop:8,paddingRight:8,paddingBottom:8,paddingLeft:8,style:h.STYLE_DARK};function l(m,n){'use strict';n=babelHelpers['extends']({},k,n);this.$ContextualLayerBlind4=n.isModal;this.$ContextualLayerBlind2=m;this.$ContextualLayerBlind5=n.opacity;this.$ContextualLayerBlind6=n.paddingTop;this.$ContextualLayerBlind7=n.paddingRight;this.$ContextualLayerBlind8=n.paddingBottom;this.$ContextualLayerBlind9=n.paddingLeft;this.$ContextualLayerBlind10=n.style;}l.prototype.enable=function(){'use strict';this.$ContextualLayerBlind3=[this.$ContextualLayerBlind2.subscribe(['show','reposition'],this.$ContextualLayerBlind11.bind(this)),this.$ContextualLayerBlind2.subscribe('hide',this.$ContextualLayerBlind12.bind(this))];j.addClass(this.$ContextualLayerBlind2.getRoot(),"_4746");this.$ContextualLayerBlind1=new h();};l.prototype.disable=function(){'use strict';this.$ContextualLayerBlind12();j.removeClass(this.$ContextualLayerBlind2.getRoot(),"_4746");while(this.$ContextualLayerBlind3.length)this.$ContextualLayerBlind3.pop().unsubscribe();this.$ContextualLayerBlind3=null;this.$ContextualLayerBlind1=null;};l.prototype.$ContextualLayerBlind11=function(){'use strict';if(this.$ContextualLayerBlind2.isShown()){var m=this.$ContextualLayerBlind2.getContext();this.$ContextualLayerBlind1.show(m,this.$ContextualLayerBlind6,this.$ContextualLayerBlind7,this.$ContextualLayerBlind8,this.$ContextualLayerBlind9,this.$ContextualLayerBlind4,this.$ContextualLayerBlind5,this.$ContextualLayerBlind10);}};l.prototype.$ContextualLayerBlind12=function(){'use strict';this.$ContextualLayerBlind1.hide();};f.exports=l;},null);
__d('OnlyMeSharerSaveNux.react',['AsyncRequest','Banzai','ContextualLayer.react','ContextualLayerBlind','CSS','DataStore','DOM','DOMScroll','Keys','Link.react','Parent','React','ShareModeConst','URI','XSavedForLaterNUXSeenController','XUIContextualDialog.react','XUIContextualDialogBody.react','XUIContextualDialogFooter.react','XUIContextualDialogTitle.react','XUIDialogButton.react','cx','fbt','guid'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da){if(c.__markCompiled)c.__markCompiled();var ea=s.PropTypes,fa=null,ga=null,ha='OnlyMeSharerSaveNux_instance',ia='OnlyMeSharerSaveNux_caretMenuLoaded',ja="_5jmm",ka="_54ne",la='impression',ma='saved_for_later:click',na='only_me_sharer_nux',oa='learn_more_link',pa='only_me_sharer_nux',qa='caret',ra='dismiss_button',sa='esc_button',ta={paddingTop:0,paddingRight:0,paddingBottom:5,paddingLeft:7},ua=s.createClass({displayName:'OnlyMeSharerSaveNux',propTypes:{caretId:ea.string.isRequired,storyContainerId:ea.string.isRequired,wrapper:ea.any,collectionId:ea.number.isRequired,objectId:ea.number,shareType:ea.string.isRequired},statics:{saveOptionLoaded:function(va){var wa=document.getElementById(va);if(wa!=null){var xa=r.byClass(wa,ja);m.set(xa,ia,true);var ya=m.get(xa,ha);if(ya&&ya.state.isShown)ya._onCaretMenuClick();}}},getInitialState:function(){return {isShown:true};},_createCustomContextualLayerBlind:function(va){var wa,xa;wa=babelHelpers.inherits(ya,k);xa=wa&&wa.prototype;function ya(za){'use strict';xa.constructor.call(this,za,va);}return ya;},_getTitle:function(){if(this.props.shareType===t.SELF_POST||this.props.shareType==='own'){return ca._("Share successful");}else return ca._("Message sent");},_onCaretMenuClick:function(event){var va=document.getElementById(this.props.storyContainerId),wa=r.byClass(va,ja);if(m.get(wa,ia)===true)setTimeout(function(){var xa=n.scry(document,'li.save_caret_menu_item');for(var ya=0;ya<xa.length;ya++){var za=xa[ya],ab=r.byClass(za,'uiLayer');if(ab&&l.shown(ab)){l.addClass(za,ka);var bb=m.get(wa,ha);bb._logDismissal(qa);var cb=m.get(ga,'Popover');cb&&cb.subscribeOnce('hide',function(){l.removeClass(za,ka);});break;}}},0);},_onKeyUp:function(event){if(event.keyCode===p.ESC&&this.state.isShown){document.removeEventListener('keyup',this._onKeyUp);this._logDismissal(sa);}},_onButtonClick:function(){this._logDismissal(ra);},_onLearnMoreLinkClick:function(){i.post(ma,{og_object_id:this.props.objectId,collection_id:this.props.collectionId,surface:na,mechanism:oa,event_id:da()},{retry:true,delay:0});},_logDismissal:function(va){this.setState({isShown:false});i.post(ma,{og_object_id:this.props.objectId,collection_id:this.props.collectionId,surface:na,mechanism:va,event_id:da()},{retry:true,delay:0});},_onToggle:function(va){if(ga!==null&&!va)ga.removeEventListener('click',this._onCaretMenuClick);if(this.props.wrapper!=null){var wa=r.byClass(this.props.wrapper,'uiLayer');l.hide(wa);}},componentWillMount:function(){fa=this._createCustomContextualLayerBlind(babelHelpers['extends']({},ta));ga=document.getElementById(this.props.caretId);},componentDidMount:function(){var va=document.getElementById(this.props.storyContainerId),wa=r.byClass(va,ja);m.set(wa,ha,this);ga&&ga.addEventListener('click',this._onCaretMenuClick);document.addEventListener('keyup',this._onKeyUp);setTimeout(function(){o.ensureVisible(ga);},500);var xa=v.getURIBuilder().setEnum('surface','story').setEnum('mechanism',pa).setInt('collection_id',this.props.collectionId).setInt('object_id',this.props.objectId).setEnum('action',la).getURI(),ya=new h(xa);ya.send();},render:function(){return (s.createElement(w,{shown:this.state.isShown,contextRef:function(){return ga;},position:'below',alignment:'right',behaviors:{grayedOutLayer:fa},width:400,offsetX:-3,onToggle:this._onToggle},s.createElement(z,null,this._getTitle()),s.createElement(x,null,ca._("Want a faster way to save posts privately? Open this dropdown menu and click Save.")),s.createElement(y,null,s.createElement(q,{className:"_222f",href:new u('/help/516581611792218'),target:'_blank',onClick:this._onLearnMoreLinkClick},ca._("Learn More")),s.createElement(aa,{label:ca._("Got it"),use:'confirm',action:'cancel',onClick:this._onButtonClick}))));}});f.exports=ua;},null);
__d('SaveCaretMenuItem',['Banzai','CSS','DOM','EntstreamFeedObject','EntstreamFeedObjectFollowup','Event','MenuItem','SaveState','SaveStateHandler','cx','ge'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s,t;if(c.__markCompiled)c.__markCompiled();var u='saved_for_later:caret_action',v='imp';s=babelHelpers.inherits(w,n);t=s&&s.prototype;function w(x){'use strict';t.constructor.call(this,x);this._data=this._updateData();this.getRoot();m.listen(this._anchor,'error',this.handleError.bind(this));p.listen(x.primarysaveid,function(y){this._data=this._updateData();this._doRender(y);}.bind(this));}w.prototype.handleClick=function(){'use strict';var x=t.handleClick.call(this),y=k.getRoot(r(this._data.storydomid));if(this._data.isSaveAction){p.saving(this._data.allsaveids);y&&l.addFollowup(y,this._data.savefollowupmarkup,["_521o","_4-u3","_3yll"]);}else{p.unsaving(this._data.allsaveids);var z=l.getFollowup(y);z&&l.removeFollowup(y);}return x;};w.prototype.handleError=function(){'use strict';if(this._data.isSaveAction){p.saved(this._data.allsaveids);}else p.unsaved(this._data.allsaveids);};w.prototype._updateData=function(){'use strict';var x=babelHelpers['extends']({},this._data);x.isSaveAction=p.isSaveAction(x.primarysaveid);if(x.isSaveAction){x.markup=x.savemarkup;x.ajaxify=x.saveajaxify;x.title=x.savetitle;}else{x.markup=x.unsavemarkup;x.ajaxify=x.unsaveajaxify;x.title=x.unsavetitle;}return x;};w.prototype._doRender=function(x){'use strict';if(!this._root)return;switch(x){case o.SAVING:case o.UNSAVING:i.addClass(this._root,"_5arm");setTimeout(this.disable.bind(this),10);break;case o.SAVED:case o.UNSAVED:i.removeClass(this._root,"_5arm");setTimeout(this.enable.bind(this),10);break;}j.replace(this._anchor,this._renderItemContent());m.listen(this._anchor,'error',this.handleError.bind(this));};w.prototype.onShow=function(){'use strict';var x=this._data.logdata;h.post(u,{action:v,surface:x.surface,story_id:x.story_id,is_save:this._data.isSaveAction});};f.exports=w;},null);
__d('FbFeedOptionsExpander',['BanzaiLogger','CSS','DOMQuery','Event'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l={expand:function(m){var n=m.expander,o=m.menu,p=m.foldedClass,q=m.unfoldedClass,r=m.foldedItemClass,s=m.data;k.listen(n,'click',function(){i.toggleClass(o.getRoot(),p);i.toggleClass(o.getRoot(),q);var t=j.scry(o.getRoot(),'li.'+r);t.forEach(function(u){var v=u.getAttribute('data-feed-option-name');if(v)h.log('FeedStoryOptionMenuLoggerConfig',{option_name:v,is_secondary:1,event_type:'imp',feed_location:s.location,session_id:s.session_id,is_sponsored:s.is_sponsored,is_self_story:s.is_self_story});},this);});}};f.exports=l;},null);
__d('TourAutoPilot',['ContextualBlindSingleton','DOMScroll','Tour'],function a(b,c,d,e,f,g,h,i,j){var k,l;if(c.__markCompiled)c.__markCompiled();k=babelHelpers.inherits(m,j);l=k&&k.prototype;m.prototype.registerStep=function(n,o){'use strict';n.subscribe('tour-dialog-show',this.handleShowDialog.bind(this,n,o));l.registerStep.call(this,n,o);};m.prototype.handleLeavePage=function(){'use strict';this.openDialog&&this.openDialog.destroy();this.hideContextualBlind();l.handleLeavePage.call(this);};m.prototype.handleShowDialog=function(n,o){'use strict';var p=n.getContext();this.showContextualBlind(p,true);i.scrollTo(p,true,true,0);};m.prototype.handleTourStop=function(){'use strict';this.hideContextualBlind(true);l.handleTourStop.call(this);};m.prototype.showContextualBlind=function(n,o){'use strict';if(this.blindShowing){h.show(n,0,0,0,0,o,this.opacity);}else h.fadeIn(n,0,0,0,0,o,this.opacity);this.blindShowing=true;};m.prototype.hideContextualBlind=function(n){'use strict';if(n){h.fadeOut();}else h.hide();this.blindShowing=false;};function m(){'use strict';k.apply(this,arguments);}Object.assign(m.prototype,{blindShowing:false,opacity:null});g.TourAutoPilot=m;},null);
__d('ComposerTour',['Arbiter','AsyncRequest','ComposerCitySharer','CSS','DOM','Parent','Tour','URI','$','TourAutoPilot'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q,r;if(c.__markCompiled)c.__markCompiled();var s=c('TourAutoPilot').TourAutoPilot;q=babelHelpers.inherits(t,s);r=q&&q.prototype;t.prototype.handleShowDialog=function(u,v){'use strict';var w=m.byClass(p('composerTourStart'),'uiComposer');if(v!='start'){r.handleShowDialog.call(this,u,v);this.showContextualBlind(w);}};t.prototype.showContextualBlind=function(u){'use strict';k.addClass(document.body,'composerTourInProgress');r.showContextualBlind.call(this,u);};t.prototype.hideContextualBlind=function(u){'use strict';r.hideContextualBlind.call(this,u);k.removeClass(document.body,'composerTourInProgress');};t.openComposer=function(){'use strict';var u=m.byClass(p('composerTourStart'),'uiComposerAttachment'),v=m.byTag(u,'form');v.action=u.getAttribute('data-endpoint');v.xhpc.value=u.id;v.xhpc.click();};t.closeOnComposerReset=function(){'use strict';h.subscribe('composer/reset',function(){n.getInstance().setTourStop();});};t.sendLocationOption=function(u,v){'use strict';var w=new o(v).addQueryData({use_location:u});new i(w.toString()).send();};t.addCity=function(){'use strict';var u=m.byClass(p('composerTourLocation'),'uiComposer'),v=j.getInstance(l.scry(u,'span.ComposerCitySharer')[0]);v&&v.useDefaultCity();};t.clearCity=function(){'use strict';var u=m.byClass(p('composerTourLocation'),'uiComposer'),v=j.getInstance(l.scry(u,'span.ComposerCitySharer')[0]);v&&v.clearCity();};t.hideStartDialog=function(){'use strict';var u=n.getInstance().steps.start;u&&u.hide();};function t(){'use strict';q.apply(this,arguments);}f.exports=t;},null);
__d('legacy:composer-tour-js',['ComposerTour'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();b.ComposerTour=c('ComposerTour');},3);