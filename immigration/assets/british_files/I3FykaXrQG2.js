/*!CK:908081306!*//*1456688765,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["oOyW0"]); }

__d('UFIReactionsDialogLayerImpl.react',['BrowserSupport','CSS','Parent','React','ReactDOM','ReactTransitionEvents','ViewportBounds','cx','getElementPosition','requestAnimationFrame'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r,s;if(c.__markCompiled)c.__markCompiled();var t=k.PropTypes,u="_1oxh",v="_2r6k",w="_2r6j",x=h.hasCSSAnimations(),y="_10ir";r=babelHelpers.inherits(z,k.Component);s=r&&r.prototype;function z(aa,ba){'use strict';s.constructor.call(this,aa,ba);this.onHideEnd=this.onHideEnd.bind(this);this.onShowEnd=this.onShowEnd.bind(this);this.state={shown:aa.shown};}z.prototype.onHideEnd=function(){'use strict';var aa=l.findDOMNode(this.refs.root);m.removeEndEventListener(aa,this.onHideEnd);q(function(){i.removeClass(aa,v);i.removeClass(aa,y);this.setState({shown:false});}.bind(this));};z.prototype.onShowEnd=function(){'use strict';var aa=l.findDOMNode(this.refs.root);m.removeEndEventListener(aa,this.onShowEnd);q(function(){i.removeClass(aa,w);});};z.prototype.componentWillMount=function(){'use strict';i.conditionClass(document.body,"_5hho",this.state.shown);};z.prototype.componentWillReceiveProps=function(aa){'use strict';if(aa.shown&&!this.props.shown){this.setState({shown:true});}else if(!x&&!aa.shown&&this.props.shown)this.setState({shown:false});};z.prototype.componentWillUpdate=function(aa,ba){'use strict';if(!this.state.shown&&ba.shown)i.conditionClass(document.body,"_5hho",ba.shown);};z.prototype.componentDidMount=function(){'use strict';if(!x||!this.props.shown)return;this.animateShow();};z.prototype.componentDidUpdate=function(aa,ba){'use strict';if(!this.state.shown&&ba.shown)i.conditionClass(document.body,"_5hho",this.state.shown);if(this.props.shown&&!aa.shown){this.animateShow();}else if(!this.props.shown&&aa.shown)this.animateHide();};z.prototype.animateShow=function(){'use strict';if(!x)return;var aa=l.findDOMNode(this.refs.root),ba=l.findDOMNode(this.refs.content),ca=p(ba).y,da=n.getTop(),ea=j.byClass(ba,'uiScrollableArea');if(ea)da=Math.max(da,p(ea).y);i.conditionClass(aa,u,ca<da);m.addEndEventListener(aa,this.onShowEnd);i.addClass(aa,w);i.addClass(aa,y);};z.prototype.animateHide=function(){'use strict';if(!x)return;var aa=l.findDOMNode(this.refs.root);m.addEndEventListener(aa,this.onHideEnd);i.addClass(aa,v);};z.prototype.render=function(){'use strict';var aa=this.props.reactionsCount;return (k.createElement('div',{className:"_1oxj"+(!this.state.shown?' '+"accessible_elem":''),ref:'root'},k.createElement('div',{className:"_2r6l"+(aa==8?' '+"_5hhp":'')+(aa==9?' '+"_5hhq":''),onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave},k.createElement('div',{className:"_1oxk",ref:'content'},this.props.children,k.createElement('div',{className:"_41nt",style:{height:this.props.height}})))));};z.propTypes={shown:t.bool};f.exports=z;},null);
__d('UFIReactionsMenuImpl.react',['Event','Locale','RTLKeys','React','ReactDOM','SubscriptionsHandler','UFIConfig','UFIReactionTypes','UFIReactionsDialogLayerImpl.react','addFocusEvents','cx','getVendorPrefixedName','joinClasses','shallowCompare','UFIReactionsAnimatedIcon'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){var v,w;if(c.__markCompiled)c.__markCompiled();var x=c('UFIReactionsAnimatedIcon').module,y=8,z=96,aa=48,ba=44,ca=o.reactions,da=s('transform'),ea=q('span');v=babelHelpers.inherits(fa,k.Component);w=v&&v.prototype;function fa(ga,ha){'use strict';w.constructor.call(this);var ia=ga.supportedReactions.filter(function(ka){return ca[ka];}),ja=ga.allowKeyboardFocus?Math.max(0,ia.indexOf(ga.initialReaction)):-1;this.state={hasKeyboardFocus:ga.allowKeyboardFocus,selectedIndex:ja,supportedReactions:ia};this.focusSelected=this.focusSelected.bind(this);this.onDragStart=this.onDragStart.bind(this);this.onKeyDown=this.onKeyDown.bind(this);}fa.prototype.componentWillReceiveProps=function(ga){'use strict';if(!ga.shown&&this.props.shown)this.setState({hasKeyboardFocus:ga.allowKeyboardFocus,selectedIndex:-1});this.setState({supportedReactions:ga.supportedReactions.filter(function(ha){return ca[ha];})});};fa.prototype.componentDidMount=function(){'use strict';if(this.props.allowKeyboardFocus)this.focusSelected();};fa.prototype.componentDidUpdate=function(ga,ha){'use strict';if(this.props.allowKeyboardFocus&&!ga.allowKeyboardFocus)this.focusSelected();if(this.props.isLongPressing&&!ga.isLongPressing){var ia,ja=new m();ja.addSubscriptions(h.listen(document.documentElement,'touchmove',function(event){event.preventDefault();var ka=event.touches[0],la=document.elementFromPoint(ka.clientX,ka.clientY),ma=parseInt(la.getAttribute('data-reaction'),10)||null;if(ma!==ia){if(ia)this.onReactionMouseLeave(ia,event);if(ma)this.onReactionMouseEnter(ma,event);ia=ma;}}.bind(this)),h.listen(document.documentElement,'touchend',function(event){if(ia)this.onReactionClick(ia,event);if(ja){ja.release();ja=null;}}.bind(this)));}};fa.prototype.focusSelected=function(){'use strict';var ga=l.findDOMNode(this.refs[this.state.selectedIndex]);if(ga)ga.focus();};fa.prototype.shouldComponentUpdate=function(ga,ha){'use strict';return u(this,ga,ha);};fa.prototype.onDragStart=function(event){'use strict';event.preventDefault();};fa.prototype.onKeyboardFocus=function(ga,event){'use strict';this.setState({hasKeyboardFocus:true,selectedIndex:ga});this.props.onFocus&&this.props.onFocus(event);};fa.prototype.onKeyDown=function(event){'use strict';switch(event.keyCode){case j.ESC:this.props.onBlur&&this.props.onBlur(event);break;case j.RETURN:event.preventDefault();var ga=this.state.supportedReactions[this.state.selectedIndex];this.props.onReactionClick&&this.props.onReactionClick(ga,event);break;case j.getLeft():case j.getRight():event.preventDefault();this.setState({selectedIndex:Math.max(0,Math.min(this.state.selectedIndex+(event.keyCode===j.getLeft()?-1:1),this.state.supportedReactions.length-1))},this.focusSelected);break;}};fa.prototype.onReactionClick=function(ga,event){'use strict';event.preventDefault();this.props.onReactionClick&&this.props.onReactionClick(ga,event);};fa.prototype.onReactionMouseEnter=function(ga,event){'use strict';this.setState({selectedIndex:this.props.supportedReactions.indexOf(ga)});this.props.onReactionMouseEnter&&this.props.onReactionMouseEnter(ga);};fa.prototype.onReactionMouseLeave=function(ga,event){'use strict';this.setState({selectedIndex:-1});this.props.onReactionMouseLeave&&this.props.onReactionMouseLeave(ga);};fa.prototype.render=function(){'use strict';var ga=this.state.supportedReactions.length,ha=n.reactionsHasMegaDock&&ga>2,ia=(ga*aa-z)/(ga-1),ja=this.state.selectedIndex,ka=this.state.supportedReactions.map(function(la,ma){var na=ca[la].display_name,oa=this.onReactionClick.bind(this,la),pa=Math.max(0,this.state.supportedReactions.indexOf(this.props.initialReaction))===ma,qa=null;if(ha&&ja!==-1){var ra,sa=(ja===ma?z:ia)/z,ta=0;if(ma<ja){ta=-(aa-aa*sa+(aa-z*sa)*ma);}else if(ma>ja){ta=(aa-ia)*(ga/2-ma);}else ta=-(aa*ma-ia*ma);if(i.isRTL())ta=-ta;qa=(ra={},ra[da]='translateX('+Math.floor(ta)+'px) scale('+sa+')',ra);}var ua;if(x){ua=k.createElement(x,{animate:this.props.shown,maxSize:z,reaction:ca[la].name});}else ua=k.createElement('i',{className:t(o.reactions[la].name,"_iuz")});return (k.createElement(ea,{'aria-pressed':this.props.initialReaction===la,'aria-label':na,className:"_iuw"+(ja===ma?' '+"_iuy":''),href:'#',key:'reaction_'+la,onClick:oa,onDragStart:this.onDragStart,onKeyboardFocus:this.onKeyboardFocus.bind(this,ma),onMouseEnter:this.onReactionMouseEnter.bind(this,la),onMouseLeave:this.onReactionMouseLeave.bind(this,la),onTouchStart:this.onDragStart,onTouchEnd:oa,ref:ma,role:'button',tabIndex:pa&&!this.props.shown?0:-1},k.createElement('div',{className:"_39m",'data-reaction':la},k.createElement('div',{className:"_39n",style:qa},ua,k.createElement('div',{className:"_d6l"},k.createElement('div',{className:"_4sm1"},na))))));}.bind(this));return (k.createElement(p,{height:(ha?ja!==-1?ia:aa:ba)+y,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,reactionsCount:this.state.supportedReactions.length,shown:this.props.shown},k.createElement('div',{className:"_iu-"+(this.state.hasKeyboardFocus?' '+"_5wkt":'')+(ha?' '+"_17hc":''),onKeyDown:this.onKeyDown,ref:'root',role:'toolbar'},ka)));};f.exports=fa;},null);