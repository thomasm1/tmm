, "S6C"
, "S6D"
, "S4"
)
var.list
var.list4
str(var.list)
str(var.list4)
table(var.list4)
# subset of data
addhealth.sub <- subset(AddHealth, select = var.list)
addhealth.sub.full <- subset(AddHealth, select = var.list)
addhealth.sub4 <- subset(addhealth_public4, select = var.list4)
addhealth.sub.full$gradHS <- addhealth_public4$h4ed1
addhealth.sub.full$gradBA <- addhealth_public4$h4ed2
addhealth.sub.full$someCollege <- addhealth_public4$h4ed2
dim(addhealth.sub)
dim(addhealth.sub4)
dim(addhealth.sub.full)
#matrix(addhealth.sub)
#str(addhealth.sub)
sort(colnames(addhealth.sub))
addhealth.sub <- addhealth.sub[order(addhealth.sub$AID, decreasing=FALSE),]
dim(addhealth.sub)
library(plyr) # for rename(dat, c("from" = "to"))
addhealth.sub <- rename(addhealth.sub, c(
"AID"        =  "AID"
, "BIO_SEX"        = "Sex"
, "H1GI1M"       = "BirthMonth"
, "IMONTH"     = "SurveyMonth"
, "H1GI1Y"      = "BirthYear"
, "IYEAR"      = "SurveyYear"
, "IDAY"       = "SurveyDay"
, "H1GI3"        = "BirthDay"
, "age"          = "Age"
, "H1EE1"          = "DesireCollege"
, "H1EE2"     = "ExpectCollege"
, "H1EE3"     = "Working"
, "H1EE4"     = "HoursWorked"
, "H1WP11"    = "ParentConcernM"
, "H1WP16"      = "ParentConcernF"
, "H1GI8"    = "Race"
, "H1GI6A" = "White1"
, "H1GI6B" = "Black2"
, "H1GI6C" = "Native3"
, "H1GI6D" = "AsianOth4"
, "H1GI4" = "Latino5"
, "S6A" = "White"
, "S6B" = "Black"
, "S6C" = "Asian"
, "S6D" = "Native"
, "S4" = "Latino"
))
str(addhealth.sub)
addhealth.sub.full <- rename(addhealth.sub.full, c(
"AID"        =  "AID"
, "BIO_SEX"        = "Sex"
, "H1GI1M"       = "BirthMonth"
, "IMONTH"     = "SurveyMonth"
, "H1GI1Y"      = "BirthYear"
, "IYEAR"      = "SurveyYear"
, "IDAY"       = "SurveyDay"
, "H1GI3"        = "BirthDay"
, "age"          = "Age"
, "H1EE1"          = "DesireCollege"
, "H1EE2"     = "ExpectCollege"
, "H1EE3"     = "Working"
, "H1EE4"     = "HoursWorked"
, "H1WP11"    = "ParentConcernM"
, "H1WP16"      = "ParentConcernF"
, "H1GI8"    = "Race"
, "H1GI6A" = "White1"
, "H1GI6B" = "Black2"
, "H1GI6C" = "Native3"
, "H1GI6D" = "AsianOth4"
, "H1GI4" = "Latino5"
, "S6A" = "White"
, "S6B" = "Black"
, "S6C" = "Asian"
, "S6D" = "Native"
, "S4" = "Latino"
, "gradHS" = "gradHS"
, "gradBA" = "gradBA"
, "someCollege" ="someCollege"
))
str(addhealth.sub)
str(addhealth.sub.full)
library(dplyr) # for rename(dat, c("from" = "to"))
addhealth.sub <- rename(addhealth.sub, c(
"AID"        =  "AID"
, "BIO_SEX"        = "Sex"
, "H1GI1M"       = "BirthMonth"
, "IMONTH"     = "SurveyMonth"
, "H1GI1Y"      = "BirthYear"
, "IYEAR"      = "SurveyYear"
, "IDAY"       = "SurveyDay"
, "H1GI3"        = "BirthDay"
, "age"          = "Age"
, "H1EE1"          = "DesireCollege"
, "H1EE2"     = "ExpectCollege"
, "H1EE3"     = "Working"
, "H1EE4"     = "HoursWorked"
, "H1WP11"    = "ParentConcernM"
, "H1WP16"      = "ParentConcernF"
, "H1GI8"    = "Race"
, "H1GI6A" = "White1"
, "H1GI6B" = "Black2"
, "H1GI6C" = "Native3"
, "H1GI6D" = "AsianOth4"
, "H1GI4" = "Latino5"
, "S6A" = "White"
, "S6B" = "Black"
, "S6C" = "Asian"
, "S6D" = "Native"
, "S4" = "Latino"
))
str(addhealth.sub)
addhealth.sub.full <- rename(addhealth.sub.full, c(
"AID"        =  "AID"
, "BIO_SEX"        = "Sex"
, "H1GI1M"       = "BirthMonth"
, "IMONTH"     = "SurveyMonth"
, "H1GI1Y"      = "BirthYear"
, "IYEAR"      = "SurveyYear"
, "IDAY"       = "SurveyDay"
, "H1GI3"        = "BirthDay"
, "age"          = "Age"
, "H1EE1"          = "DesireCollege"
, "H1EE2"     = "ExpectCollege"
, "H1EE3"     = "Working"
, "H1EE4"     = "HoursWorked"
, "H1WP11"    = "ParentConcernM"
, "H1WP16"      = "ParentConcernF"
, "H1GI8"    = "Race"
, "H1GI6A" = "White1"
, "H1GI6B" = "Black2"
, "H1GI6C" = "Native3"
, "H1GI6D" = "AsianOth4"
, "H1GI4" = "Latino5"
, "S6A" = "White"
, "S6B" = "Black"
, "S6C" = "Asian"
, "S6D" = "Native"
, "S4" = "Latino"
, "gradHS" = "gradHS"
, "gradBA" = "gradBA"
, "someCollege" ="someCollege"
))
dim(AddHealth) # n=6504 vars = 2829
dim(addhealth_public4)
str(addhealth_public4)
addhealth.sub <- as.data.frame(AddHealth)
var.list4 <- c("h4ed1" # what is hs graduaation status
, "h4ed2" #what highest ed 1<9,2hs,3hsgrad,45some,7BA
)
var.list <- c("AID"
, "H1GI1M"
, "IMONTH"
, "H1GI1Y"
, "H1GI3"
, "IYEAR"
, "IDAY"
, "age"
, "BIO_SEX"
, "H1EE1"
, "H1EE2"
, "H1EE3"
, "H1EE4"
, "H1WP11"
, "H1WP16"
, "H1GI8"
, "H1GI6A"
, "H1GI6B"
, "H1GI6C"
, "H1GI6D"
, "H1GI4"
, "S6A"
, "S6B"
, "S6C"
, "S6D"
, "S4"
)
var.list
var.list4
str(var.list)
str(var.list4)
table(var.list4)
addhealth.sub <- subset(AddHealth, select = var.list)
addhealth.sub.full <- subset(AddHealth, select = var.list)
addhealth.sub4 <- subset(addhealth_public4, select = var.list4)
addhealth.sub.full$gradHS <- addhealth_public4$h4ed1
addhealth.sub.full$gradBA <- addhealth_public4$h4ed2
addhealth.sub.full$someCollege <- addhealth_public4$h4ed2
dim(addhealth.sub)
dim(addhealth.sub4)
dim(addhealth.sub.full)
sort(colnames(addhealth.sub))
addhealth.sub <- addhealth.sub[order(addhealth.sub$AID, decreasing=FALSE),]
dim(addhealth.sub)
addhealth.sub <- rename(addhealth.sub, c(
"AID"        =  "AID"
, "BIO_SEX"        = "Sex"
, "H1GI1M"       = "BirthMonth"
, "IMONTH"     = "SurveyMonth"
, "H1GI1Y"      = "BirthYear"
, "IYEAR"      = "SurveyYear"
, "IDAY"       = "SurveyDay"
, "H1GI3"        = "BirthDay"
, "age"          = "Age"
, "H1EE1"          = "DesireCollege"
, "H1EE2"     = "ExpectCollege"
, "H1EE3"     = "Working"
, "H1EE4"     = "HoursWorked"
, "H1WP11"    = "ParentConcernM"
, "H1WP16"      = "ParentConcernF"
, "H1GI8"    = "Race"
, "H1GI6A" = "White1"
, "H1GI6B" = "Black2"
, "H1GI6C" = "Native3"
, "H1GI6D" = "AsianOth4"
, "H1GI4" = "Latino5"
, "S6A" = "White"
, "S6B" = "Black"
, "S6C" = "Asian"
, "S6D" = "Native"
, "S4" = "Latino"
))
library(plyr) # for rename(dat, c("from" = "to"))
addhealth.sub <- rename(addhealth.sub, c(
"AID"        =  "AID"
, "BIO_SEX"        = "Sex"
, "H1GI1M"       = "BirthMonth"
, "IMONTH"     = "SurveyMonth"
, "H1GI1Y"      = "BirthYear"
, "IYEAR"      = "SurveyYear"
, "IDAY"       = "SurveyDay"
, "H1GI3"        = "BirthDay"
, "age"          = "Age"
, "H1EE1"          = "DesireCollege"
, "H1EE2"     = "ExpectCollege"
, "H1EE3"     = "Working"
, "H1EE4"     = "HoursWorked"
, "H1WP11"    = "ParentConcernM"
, "H1WP16"      = "ParentConcernF"
, "H1GI8"    = "Race"
, "H1GI6A" = "White1"
, "H1GI6B" = "Black2"
, "H1GI6C" = "Native3"
, "H1GI6D" = "AsianOth4"
, "H1GI4" = "Latino5"
, "S6A" = "White"
, "S6B" = "Black"
, "S6C" = "Asian"
, "S6D" = "Native"
, "S4" = "Latino"
))
str(addhealth.sub)
library(plyr) # for rename(dat, c("from" = "to"))
addhealth.sub <- rename(addhealth.sub, c(
"AID"        =  "AID"
, "BIO_SEX"        = "Sex"
, "H1GI1M"       = "BirthMonth"
, "IMONTH"     = "SurveyMonth"
, "H1GI1Y"      = "BirthYear"
, "IYEAR"      = "SurveyYear"
, "IDAY"       = "SurveyDay"
, "H1GI3"        = "BirthDay"
, "age"          = "Age"
, "H1EE1"          = "DesireCollege"
, "H1EE2"     = "ExpectCollege"
, "H1EE3"     = "Working"
, "H1EE4"     = "HoursWorked"
, "H1WP11"    = "ParentConcernM"
, "H1WP16"      = "ParentConcernF"
, "H1GI8"    = "Race"
, "H1GI6A" = "White1"
, "H1GI6B" = "Black2"
, "H1GI6C" = "Native3"
, "H1GI6D" = "AsianOth4"
, "H1GI4" = "Latino5"
, "S6A" = "White"
, "S6B" = "Black"
, "S6C" = "Asian"
, "S6D" = "Native"
, "S4" = "Latino"
))
str(addhealth.sub)
addhealth.sub.full <- rename(addhealth.sub.full, c(
"AID"        =  "AID"
, "BIO_SEX"        = "Sex"
, "H1GI1M"       = "BirthMonth"
, "IMONTH"     = "SurveyMonth"
, "H1GI1Y"      = "BirthYear"
, "IYEAR"      = "SurveyYear"
, "IDAY"       = "SurveyDay"
, "H1GI3"        = "BirthDay"
, "age"          = "Age"
, "H1EE1"          = "DesireCollege"
, "H1EE2"     = "ExpectCollege"
, "H1EE3"     = "Working"
, "H1EE4"     = "HoursWorked"
, "H1WP11"    = "ParentConcernM"
, "H1WP16"      = "ParentConcernF"
, "H1GI8"    = "Race"
, "H1GI6A" = "White1"
, "H1GI6B" = "Black2"
, "H1GI6C" = "Native3"
, "H1GI6D" = "AsianOth4"
, "H1GI4" = "Latino5"
, "S6A" = "White"
, "S6B" = "Black"
, "S6C" = "Asian"
, "S6D" = "Native"
, "S4" = "Latino"
, "gradHS" = "gradHS"
, "gradBA" = "gradBA"
, "someCollege" ="someCollege"
))
library(lubridate)
install.packages("lubridate")
install.packages("lubridate")
library(lubridate)
DOBYear <- (addhealth.sub$BirthYear + 1900)
SurvYear <- (addhealth.sub$SurveyYear + 1900)
AgeYear <- (SurvYear - DOBYear)
head(AgeYear)
AgeYearMos <- AgeYear*12
head(AgeYearMos)
AgeMonth <- (addhealth.sub$SurveyMonth - addhealth.sub$BirthMonth)
head(AgeMonth)
head(addhealth.sub$BirthMonth)
AgeYearsMonths <- AgeYearMos + AgeMonth
head(AgeYearsMonths)
Age <- AgeYearsMonths/12
head(Age)
addhealth.sub$Age <- Age
BirthDayX <-rep(15, 6504)
str(addhealth.sub)
str(addhealth.sub.full)
install.packages(plyr)
install.packages("plyr")
install.packages("plyr")
library(plyr) # for rename(dat, c("from" = "to"))
addhealth.sub <- rename(addhealth.sub, c(
"AID"        =  "AID"
, "BIO_SEX"        = "Sex"
, "H1GI1M"       = "BirthMonth"
, "IMONTH"     = "SurveyMonth"
, "H1GI1Y"      = "BirthYear"
, "IYEAR"      = "SurveyYear"
, "IDAY"       = "SurveyDay"
, "H1GI3"        = "BirthDay"
, "age"          = "Age"
, "H1EE1"          = "DesireCollege"
, "H1EE2"     = "ExpectCollege"
, "H1EE3"     = "Working"
, "H1EE4"     = "HoursWorked"
, "H1WP11"    = "ParentConcernM"
, "H1WP16"      = "ParentConcernF"
, "H1GI8"    = "Race"
, "H1GI6A" = "White1"
, "H1GI6B" = "Black2"
, "H1GI6C" = "Native3"
, "H1GI6D" = "AsianOth4"
, "H1GI4" = "Latino5"
, "S6A" = "White"
, "S6B" = "Black"
, "S6C" = "Asian"
, "S6D" = "Native"
, "S4" = "Latino"
))
str(addhealth.sub)
addhealth.sub.full <- rename(addhealth.sub.full, c(
"AID"        =  "AID"
, "BIO_SEX"        = "Sex"
, "H1GI1M"       = "BirthMonth"
, "IMONTH"     = "SurveyMonth"
, "H1GI1Y"      = "BirthYear"
, "IYEAR"      = "SurveyYear"
, "IDAY"       = "SurveyDay"
, "H1GI3"        = "BirthDay"
, "age"          = "Age"
, "H1EE1"          = "DesireCollege"
, "H1EE2"     = "ExpectCollege"
, "H1EE3"     = "Working"
, "H1EE4"     = "HoursWorked"
, "H1WP11"    = "ParentConcernM"
, "H1WP16"      = "ParentConcernF"
, "H1GI8"    = "Race"
, "H1GI6A" = "White1"
, "H1GI6B" = "Black2"
, "H1GI6C" = "Native3"
, "H1GI6D" = "AsianOth4"
, "H1GI4" = "Latino5"
, "S6A" = "White"
, "S6B" = "Black"
, "S6C" = "Asian"
, "S6D" = "Native"
, "S4" = "Latino"
, "gradHS" = "gradHS"
, "gradBA" = "gradBA"
, "someCollege" ="someCollege"
))
str(addhealth.sub)
str(addhealth.sub.full)
install.packages("lubridate")
library(lubridate)
DOBYear <- (addhealth.sub$BirthYear + 1900)
SurvYear <- (addhealth.sub$SurveyYear + 1900)
AgeYear <- (SurvYear - DOBYear)
head(AgeYear)
AgeYearMos <- AgeYear*12
head(AgeYearMos)
AgeMonth <- (addhealth.sub$SurveyMonth - addhealth.sub$BirthMonth)
head(AgeMonth)
head(addhealth.sub$BirthMonth)
AgeYearsMonths <- AgeYearMos + AgeMonth
Age <- AgeYearsMonths/12
addhealth.sub$Age <- Age
BirthDayX <-rep(15, 6504)
addhealth.sub$BirthDayX <- BirthDayX
date.sub <- subset(addhealth.sub, select = c(SurveyDay, SurveyMonth, SurveyYear, BirthDayX, BirthMonth, BirthYear))
str(date.sub)
library(lubridate)
## interview date
# combinemonth, and year into one text string
cdate.text <- paste(date.sub$SurveyDay, date.sub$SurveyMonth,date.sub$SurveyYear)
head(cdate.text)
# create date object by interpretting the day, month, year with dmy()
cdate.date <- dmy(cdate.text)
head(cdate.date)
## date of birth
# combine day, month, and year into one text string
dob.text <- paste(date.sub$BirthDayX, date.sub$BirthMonth, date.sub$BirthYear)
head(dob.text)
dob.date <- dmy(dob.text)
head(dob.date)
#Now that we have the interview date and date of birth as date objects,  we calculate the difference to give the person's age at the time of the interview.  Because the difference of dates is in the unit "days", we convert to years.
dob.date <- dmy(dob.text)
install.packages("Hmisc")
library(Hmisc) # for label()
library(Hmisc) # for label()
label(addhealth.sub$AID) <- "Unique ID no alphabetics"
label(addhealth.sub$BirthMonth)     <- "Birth month, two digits"
label(addhealth.sub$BirthYear)       <- "Birth year, two digits"
label(addhealth.sub$DesireCollege) <- "Desire to go to college"
label(addhealth.sub$DesireCollegeNum) <- "Desire to go to college-Numeral"
label(addhealth.sub$ExpectCollegeNum)     <- "Expectation to go to college-Numeral"
library(Hmisc) # for label()
library(Hmisc) # for label()
label(addhealth.sub$AID) <- "Unique ID no alphabetics"
label(addhealth.sub$Sex) <- "Gender"
label(addhealth.sub$BirthMonth)     <- "Birth month, two digits"
label(addhealth.sub$BirthYear)       <- "Birth year, two digits"
label(addhealth.sub$DesireCollege) <- "Desire to go to college"
label(addhealth.sub$DesireCollegeNum) <- "Desire to go to college-Numeral"
label(addhealth.sub$ExpectCollege)     <- "Expectation to go to college"
label(addhealth.sub$ExpectCollegeNum)     <- "Expectation to go to college-Numeral"
label(addhealth.sub$Working)       <- "Whether worked in past four weeks"
label(addhealth.sub$HoursWorked)   <- "Non-summer hours worked per week"
label(addhealth.sub$ParentConcernF)   <- "Father's Concern about College Attend."
label(addhealth.sub$RaceEth)   <- "Race-Ethnicity"
label(addhealth.sub$HoursWorkedCat)   <- "Hours Worked Category"
label(addhealth.sub$ParenConcernMean)   <- "Mean Parental Concern"
label(addhealth.sub$Studen)   <- "Student quad, High-Low Parental Concern \n Work-Not Workl"
install.packages("editrules")
fn.edit.rules <- "C:/Users/thoma/Dropbox/__CCCreative__/__ADA1/ADA1_Content/NouvelleAllHW12/ADA1_AddhealthTM_EditRules.txt"
fn.edit.rules <- "C:/Users/Acer valued customer/Creative Cloud Files/public_html/tmm/stat/Data-Dynamic-light/AddHealthTM_EditRules.txt"
readLines(fn.edit.rules)
pwd
dir
fn.edit.rules <- "C:/Users/Acer valued customer/Creative Cloud Files/public_html/tmm/stat/Data-Dynamic-light/editrules/AddHealthTM_EditRules.txt"
readLines(fn.edit.rules)
library(editrules)
EditRules.AH.sub <- editfile(fn.edit.rules)
ve.AH.sub <- violatedEdits(EditRules.AH.sub, addhealth.sub)
summary(ve.AH.sub)
op <- par(no.readonly = TRUE)         # save plot settings
par(mfrow=c(1,1), mar = c(0,0,0,0))
plot(EditRules.AH.sub)
par(op)                               # restore plot settings
dim(addhealth.sub)
install.packages("ggplot2")
install.packages("ggplot2")
library(ggplot2)
p1 <- ggplot(data = addhealth.sub, aes(x = Sex))
p1 <- p1 + geom_bar(binwidth = 1, alpha = .25)
p1 <- p1 + labs(title = "Gender", x = "Sex")
p1r <- ggplot(data = addhealth.sub, aes(x = RaceEth))
p1r <- p1r + geom_bar(binwidth = 1, alpha = .25)
p1r <- p1r + labs(title = "Race-Ethnicity Count", x = "Race-Ethnicity")
p1w <- ggplot(data = addhealth.sub, aes(x = Working))
p1w <- p1w + geom_bar(binwidth = 1, alpha = .25)
p1w <- p1w + labs(title = "Working Status", x = "Working Status")
p1ag <- ggplot(data = addhealth.sub, aes(x = AgeCat))
p1ag <- p1ag + geom_bar(binwidth = 1, alpha = .25)
p1ag <- p1ag + labs(title = "Age", x = "Age")
p1a <- ggplot(data = addhealth.sub, aes(x = HoursWorkedCat))
p1a <- p1a + geom_bar(binwidth = 5, alpha = .25)
p1a <- p1a + labs(title = "Hours Worked", x = "Hours Worked", y = "count")
p2p <- ggplot(data = addhealth.sub, aes(x = ParenConcernMean))
p2p <- p2p + geom_bar(binwidth = 1, alpha = .25)
p2p <- p2p + labs(title = "Parental \nCollege Concern", x = "Parental \n College Concern", y = "count")
p2 <- ggplot(data = addhealth.sub, aes(x = DesireCollegeNum))
p2 <- p2 + geom_bar(binwidth = 1, alpha = .25)
p2 <- p2 + labs(title = "Desire \nto Attend College", x = "Desire \n to Attend College", y = "count")
p2a <- ggplot(data = addhealth.sub, aes(x = ExpectCollegeNum))
p2a <- p2a + geom_bar(binwidth = 1, alpha = .25)
p2a <- p2a + labs(title = "Expectation \n to Attend College", x = "Expectation \n to Attend College", y = "count")
install.packages("gridExtra")
library(gridExtra)
grid.arrange(p1, p1r, p1w, p1ag, p1a, p2p, p2, p2a, nrow=2)
